if(!1===MouseEvent.prototype.hasOwnProperty("pointerType")&&Object.defineProperty(MouseEvent.prototype,"pointerType",{get(){return this.sourceCapabilities.firesTouchEvents?"touch":"mouse"}}),Element.prototype.setPointerCapture){let t=Element.prototype.setPointerCapture;Element.prototype.setPointerCapture=function(e){if(t.call(this,e),!1!==this.hasPointerCapture(e)){{let t,i,s,n=!1,a=!1,l=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",i),this.removeEventListener("lostpointercapture",s)};this.addEventListener("pointerup",t=t=>{t.pointerId===e&&(n=!0,l())}),this.addEventListener("pointercancel",i=t=>{t.pointerId===e&&(a=!0,l())}),this.addEventListener("lostpointercapture",s=t=>{if(t.pointerId===e&&(l(),!1===n&&!1===a)){let t=new PointerEvent("pointercancel",{pointerId:e});this.dispatchEvent(t)}})}{let t,i,s=`* {cursor: ${getComputedStyle(this).cursor} !important; user-select: none !important; -webkit-user-select: none !important;}`,n=[];for(let t=this.parentNode||this.host;t&&t!==document;t=t.parentNode||t.host)if(t.nodeType===document.DOCUMENT_FRAGMENT_NODE){let e=document.createElementNS(t.host.namespaceURI,"style");e.textContent=s,t.append(e),n.push(e)}else if(t.nodeType===document.DOCUMENT_NODE){let e=document.createElement("style");e.textContent=s,t.head.append(e),n.push(e)}this.addEventListener("lostpointercapture",t=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}}),window.addEventListener("pointerup",i=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}},!0)}}}}Object.defineProperty(Animation.prototype,"finished",{get(){return new Promise((t=>{"finished"===this.playState?t():this.addEventListener("finish",(()=>t()),{once:!0})}))}}),window.requestIdleCallback||(window.requestIdleCallback=(t,e={})=>{let i=e.timeout||1,s=performance.now();return setTimeout((()=>{t({get didTimeout(){return!e.timeout&&performance.now()-s-1>i},timeRemaining:()=>Math.max(0,performance.now()-s+1)})}),1)}),Object.defineProperty(HTMLHeadingElement.prototype,"disabled",{enumerable:!1,configurable:!1,get(){return this.hasAttribute("disabled")},set(t){!0===t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),Object.defineProperty(HTMLParagraphElement.prototype,"disabled",{enumerable:!1,configurable:!1,get(){return this.hasAttribute("disabled")},set(t){!0===t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),Node.prototype.append||(Node.prototype.append=function(t){this.appendChild(t)}),Node.prototype.prepend||(Node.prototype.prepend=function(t){this.insertBefore(t,this.firstElementChild)}),Node.prototype.before||(Node.prototype.before=function(t){this.parentElement.insertBefore(t,this)}),Node.prototype.after||(Node.prototype.after=function(t){this.parentElement.insertBefore(t,this.nextElementSibling)}),Node.prototype.closest||(Node.prototype.closest=function(t){return this.parentNode?this.parentNode.closest(t):null}),Node.prototype.replaceWith||(Node.prototype.replaceWith=function(t){this.parentNode.replaceChild(t,this)});const{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:s,getOwnPropertyDescriptor:n}=Object;let{freeze:a,seal:l,create:r}=Object,{apply:o,construct:h}="undefined"!=typeof Reflect&&Reflect;a||(a=function(t){return t}),l||(l=function(t){return t}),o||(o=function(t,e,i){return t.apply(e,i)}),h||(h=function(t,e){return new t(...e)});const d=E(Array.prototype.forEach),c=E(Array.prototype.pop),u=E(Array.prototype.push),p=E(String.prototype.toLowerCase),m=E(String.prototype.toString),b=E(String.prototype.match),g=E(String.prototype.replace),f=E(String.prototype.indexOf),x=E(String.prototype.trim),w=E(Object.prototype.hasOwnProperty),v=E(RegExp.prototype.test),k=(y=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return h(y,e)});var y;const C=E(Number.isNaN);function E(t){return function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return o(t,e,s)}}function z(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;e&&e(t,null);let a=s.length;for(;a--;){let e=s[a];if("string"==typeof e){const t=n(e);t!==e&&(i(s)||(s[a]=t),e=t)}t[e]=!0}return t}function $(t){for(let e=0;e<t.length;e++){w(t,e)||(t[e]=null)}return t}function S(e){const i=r(null);for(const[s,n]of t(e)){w(e,s)&&(Array.isArray(n)?i[s]=$(n):n&&"object"==typeof n&&n.constructor===Object?i[s]=S(n):i[s]=n)}return i}function M(t,e){for(;null!==t;){const i=n(t,e);if(i){if(i.get)return E(i.get);if("function"==typeof i.value)return E(i.value)}t=s(t)}return function(){return null}}const L=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),A=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=a(["#text"]),I=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),O=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=l(/<%[\w\W]*|[\w\W]*%>/gm),G=l(/\${[\w\W]*}/gm),X=l(/^data-[\-\w.\u00B7-\uFFFF]/),_=l(/^aria-[\-\w]+$/),Z=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=l(/^(?:\w+script|data):/i),Y=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=l(/^html$/i),W=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var V=Object.freeze({__proto__:null,MUSTACHE_EXPR:N,ERB_EXPR:F,TMPLIT_EXPR:G,DATA_ATTR:X,ARIA_ATTR:_,IS_ALLOWED_URI:Z,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:Y,DOCTYPE_NAME:q,CUSTOM_ELEMENT:W});const K=1,J=3,Q=7,tt=8,et=9,it=function(){return"undefined"==typeof window?null:window};var st=function e(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();const s=t=>e(t);if(s.version="3.1.3",s.removed=[],!i||!i.document||i.document.nodeType!==et)return s.isSupported=!1,s;let{document:n}=i;const l=n,o=l.currentScript,{DocumentFragment:h,HTMLTemplateElement:y,Node:E,Element:$,NodeFilter:N,NamedNodeMap:F=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:G,DOMParser:X,trustedTypes:_}=i,U=$.prototype,Y=M(U,"cloneNode"),W=M(U,"nextSibling"),st=M(U,"childNodes"),nt=M(U,"parentNode");if("function"==typeof y){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let at,lt="";const{implementation:rt,createNodeIterator:ot,createDocumentFragment:ht,getElementsByTagName:dt}=n,{importNode:ct}=l;let ut={};s.isSupported="function"==typeof t&&"function"==typeof nt&&rt&&void 0!==rt.createHTMLDocument;const{MUSTACHE_EXPR:pt,ERB_EXPR:mt,TMPLIT_EXPR:bt,DATA_ATTR:gt,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:xt,ATTR_WHITESPACE:wt,CUSTOM_ELEMENT:vt}=V;let{IS_ALLOWED_URI:kt}=V,yt=null;const Ct=z({},[...L,...A,...R,...T,...B]);let Et=null;const zt=z({},[...I,...O,...H,...j]);let $t=Object.seal(r(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,Mt=null,Lt=!0,At=!0,Rt=!1,Pt=!0,Tt=!1,Dt=!0,Bt=!1,It=!1,Ot=!1,Ht=!1,jt=!1,Nt=!1,Ft=!0,Gt=!1,Xt=!0,_t=!1,Zt={},Ut=null;const Yt=z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qt=null;const Wt=z({},["audio","video","img","source","image","track"]);let Vt=null;const Kt=z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",te="http://www.w3.org/1999/xhtml";let ee=te,ie=!1,se=null;const ne=z({},[Jt,Qt,te],m);let ae=null;const le=["application/xhtml+xml","text/html"];let re=null,oe=null;const he=n.createElement("form"),de=function(t){return t instanceof RegExp||t instanceof Function},ce=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!oe||oe!==t){if(t&&"object"==typeof t||(t={}),t=S(t),ae=-1===le.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,re="application/xhtml+xml"===ae?m:p,yt=w(t,"ALLOWED_TAGS")?z({},t.ALLOWED_TAGS,re):Ct,Et=w(t,"ALLOWED_ATTR")?z({},t.ALLOWED_ATTR,re):zt,se=w(t,"ALLOWED_NAMESPACES")?z({},t.ALLOWED_NAMESPACES,m):ne,Vt=w(t,"ADD_URI_SAFE_ATTR")?z(S(Kt),t.ADD_URI_SAFE_ATTR,re):Kt,qt=w(t,"ADD_DATA_URI_TAGS")?z(S(Wt),t.ADD_DATA_URI_TAGS,re):Wt,Ut=w(t,"FORBID_CONTENTS")?z({},t.FORBID_CONTENTS,re):Yt,St=w(t,"FORBID_TAGS")?z({},t.FORBID_TAGS,re):{},Mt=w(t,"FORBID_ATTR")?z({},t.FORBID_ATTR,re):{},Zt=!!w(t,"USE_PROFILES")&&t.USE_PROFILES,Lt=!1!==t.ALLOW_ARIA_ATTR,At=!1!==t.ALLOW_DATA_ATTR,Rt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Tt=t.SAFE_FOR_TEMPLATES||!1,Dt=!1!==t.SAFE_FOR_XML,Bt=t.WHOLE_DOCUMENT||!1,Ht=t.RETURN_DOM||!1,jt=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,Ot=t.FORCE_BODY||!1,Ft=!1!==t.SANITIZE_DOM,Gt=t.SANITIZE_NAMED_PROPS||!1,Xt=!1!==t.KEEP_CONTENT,_t=t.IN_PLACE||!1,kt=t.ALLOWED_URI_REGEXP||Z,ee=t.NAMESPACE||te,$t=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($t.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($t.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&($t.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Tt&&(At=!1),jt&&(Ht=!0),Zt&&(yt=z({},B),Et=[],!0===Zt.html&&(z(yt,L),z(Et,I)),!0===Zt.svg&&(z(yt,A),z(Et,O),z(Et,j)),!0===Zt.svgFilters&&(z(yt,R),z(Et,O),z(Et,j)),!0===Zt.mathMl&&(z(yt,T),z(Et,H),z(Et,j))),t.ADD_TAGS&&(yt===Ct&&(yt=S(yt)),z(yt,t.ADD_TAGS,re)),t.ADD_ATTR&&(Et===zt&&(Et=S(Et)),z(Et,t.ADD_ATTR,re)),t.ADD_URI_SAFE_ATTR&&z(Vt,t.ADD_URI_SAFE_ATTR,re),t.FORBID_CONTENTS&&(Ut===Yt&&(Ut=S(Ut)),z(Ut,t.FORBID_CONTENTS,re)),Xt&&(yt["#text"]=!0),Bt&&z(yt,["html","head","body"]),yt.table&&(z(yt,["tbody"]),delete St.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw k('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw k('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');at=t.TRUSTED_TYPES_POLICY,lt=at.createHTML("")}else void 0===at&&(at=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(i=e.getAttribute(s));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(_,o)),null!==at&&"string"==typeof lt&&(lt=at.createHTML(""));a&&a(t),oe=t}},ue=z({},["mi","mo","mn","ms","mtext"]),pe=z({},["foreignobject","annotation-xml"]),me=z({},["title","style","font","a","script"]),be=z({},[...A,...R,...P]),ge=z({},[...T,...D]),fe=function(t){u(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},xe=function(t,e){try{u(s.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){u(s.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Et[t])if(Ht||jt)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},we=function(t){let e=null,i=null;if(Ot)t="<remove></remove>"+t;else{const e=b(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===ae&&ee===te&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const s=at?at.createHTML(t):t;if(ee===te)try{e=(new X).parseFromString(s,ae)}catch(t){}if(!e||!e.documentElement){e=rt.createDocument(ee,"template",null);try{e.documentElement.innerHTML=ie?lt:s}catch(t){}}const a=e.body||e.documentElement;return t&&i&&a.insertBefore(n.createTextNode(i),a.childNodes[0]||null),ee===te?dt.call(e,Bt?"html":"body")[0]:Bt?e.documentElement:a},ve=function(t){return ot.call(t.ownerDocument||t,t,N.SHOW_ELEMENT|N.SHOW_COMMENT|N.SHOW_TEXT|N.SHOW_PROCESSING_INSTRUCTION|N.SHOW_CDATA_SECTION,null)},ke=function(t){return t instanceof G&&(void 0!==t.o&&"number"!=typeof t.o||void 0!==t.p&&"number"!=typeof t.p||"string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof F)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ye=function(t){return"function"==typeof E&&t instanceof E},Ce=function(t,e,i){ut[t]&&d(ut[t],(t=>{t.call(s,e,i,oe)}))},Ee=function(t){let e=null;if(Ce("beforeSanitizeElements",t,null),ke(t))return fe(t),!0;const i=re(t.nodeName);if(Ce("uponSanitizeElement",t,{tagName:i,allowedTags:yt}),t.hasChildNodes()&&!ye(t.firstElementChild)&&v(/<[/\w]/g,t.innerHTML)&&v(/<[/\w]/g,t.textContent))return fe(t),!0;if(t.nodeType===Q)return fe(t),!0;if(Dt&&t.nodeType===tt&&v(/<[/\w]/g,t.data))return fe(t),!0;if(!yt[i]||St[i]){if(!St[i]&&$e(i)){if($t.tagNameCheck instanceof RegExp&&v($t.tagNameCheck,i))return!1;if($t.tagNameCheck instanceof Function&&$t.tagNameCheck(i))return!1}if(Xt&&!Ut[i]){const e=nt(t)||t.parentNode,i=st(t)||t.childNodes;if(i&&e){for(let s=i.length-1;s>=0;--s){const n=Y(i[s],!0);n.p=(t.p||0)+1,e.insertBefore(n,W(t))}}}return fe(t),!0}return t instanceof $&&!function(t){let e=nt(t);e&&e.tagName||(e={namespaceURI:ee,tagName:"template"});const i=p(t.tagName),s=p(e.tagName);return!!se[t.namespaceURI]&&(t.namespaceURI===Qt?e.namespaceURI===te?"svg"===i:e.namespaceURI===Jt?"svg"===i&&("annotation-xml"===s||ue[s]):Boolean(be[i]):t.namespaceURI===Jt?e.namespaceURI===te?"math"===i:e.namespaceURI===Qt?"math"===i&&pe[s]:Boolean(ge[i]):t.namespaceURI===te?!(e.namespaceURI===Qt&&!pe[s])&&!(e.namespaceURI===Jt&&!ue[s])&&!ge[i]&&(me[i]||!be[i]):!("application/xhtml+xml"!==ae||!se[t.namespaceURI]))}(t)?(fe(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!v(/<\/no(script|embed|frames)/i,t.innerHTML)?(Tt&&t.nodeType===J&&(e=t.textContent,d([pt,mt,bt],(t=>{e=g(e,t," ")})),t.textContent!==e&&(u(s.removed,{element:t.cloneNode()}),t.textContent=e)),Ce("afterSanitizeElements",t,null),!1):(fe(t),!0)},ze=function(t,e,i){if(Ft&&("id"===e||"name"===e)&&(i in n||i in he||"__depth"===i||"__removalCount"===i))return!1;if(At&&!Mt[e]&&v(gt,e));else if(Lt&&v(ft,e));else if(!Et[e]||Mt[e]){if(!($e(t)&&($t.tagNameCheck instanceof RegExp&&v($t.tagNameCheck,t)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(t))&&($t.attributeNameCheck instanceof RegExp&&v($t.attributeNameCheck,e)||$t.attributeNameCheck instanceof Function&&$t.attributeNameCheck(e))||"is"===e&&$t.allowCustomizedBuiltInElements&&($t.tagNameCheck instanceof RegExp&&v($t.tagNameCheck,i)||$t.tagNameCheck instanceof Function&&$t.tagNameCheck(i))))return!1}else if(Vt[e]);else if(v(kt,g(i,wt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==f(i,"data:")||!qt[t]){if(Rt&&!v(xt,g(i,wt,"")));else if(i)return!1}else;return!0},$e=function(t){return"annotation-xml"!==t&&b(t,vt)},Se=function(t){Ce("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};let n=e.length;for(;n--;){const a=e[n],{name:l,namespaceURI:r,value:o}=a,h=re(l);let u="value"===l?o:x(o);if(i.attrName=h,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",t,i),u=i.attrValue,i.forceKeepAttr)continue;if(xe(l,t),!i.keepAttr)continue;if(!Pt&&v(/\/>/i,u)){xe(l,t);continue}if(Dt&&v(/((--!?|])>)|<\/(style|title)/i,u)){xe(l,t);continue}Tt&&d([pt,mt,bt],(t=>{u=g(u,t," ")}));const p=re(t.nodeName);if(ze(p,h,u)){if(!Gt||"id"!==h&&"name"!==h||(xe(l,t),u="user-content-"+u),at&&"object"==typeof _&&"function"==typeof _.getAttributeType)if(r);else switch(_.getAttributeType(p,h)){case"TrustedHTML":u=at.createHTML(u);break;case"TrustedScriptURL":u=at.createScriptURL(u)}try{r?t.setAttributeNS(r,l,u):t.setAttribute(l,u),ke(t)?fe(t):c(s.removed)}catch(t){}}}Ce("afterSanitizeAttributes",t,null)},Me=function t(e){let i=null;const s=ve(e);for(Ce("beforeSanitizeShadowDOM",e,null);i=s.nextNode();){if(Ce("uponSanitizeShadowNode",i,null),Ee(i))continue;const e=nt(i);i.nodeType===K&&(e&&e.o?i.o=(i.p||0)+e.o+1:i.o=1),(i.o>=255||i.o<0||C(i.o))&&fe(i),i.content instanceof h&&(i.content.o=i.o,t(i.content)),Se(i)}Ce("afterSanitizeShadowDOM",e,null)};return s.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,n=null,a=null,r=null;if(ie=!t,ie&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ye(t)){if("function"!=typeof t.toString)throw k("toString is not a function");if("string"!=typeof(t=t.toString()))throw k("dirty is not a string, aborting")}if(!s.isSupported)return t;if(It||ce(e),s.removed=[],"string"==typeof t&&(_t=!1),_t){if(t.nodeName){const e=re(t.nodeName);if(!yt[e]||St[e])throw k("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof E)i=we("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),n.nodeType===K&&"BODY"===n.nodeName||"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!Ht&&!Tt&&!Bt&&-1===t.indexOf("<"))return at&&Nt?at.createHTML(t):t;if(i=we(t),!i)return Ht?null:Nt?lt:""}i&&Ot&&fe(i.firstChild);const o=ve(_t?t:i);for(;a=o.nextNode();){if(Ee(a))continue;const t=nt(a);a.nodeType===K&&(t&&t.o?a.o=(a.p||0)+t.o+1:a.o=1),(a.o>=255||a.o<0||C(a.o))&&fe(a),a.content instanceof h&&(a.content.o=a.o,Me(a.content)),Se(a)}if(_t)return t;if(Ht){if(jt)for(r=ht.call(i.ownerDocument);i.firstChild;)r.appendChild(i.firstChild);else r=i;return(Et.shadowroot||Et.shadowrootmode)&&(r=ct.call(l,r,!0)),r}let c=Bt?i.outerHTML:i.innerHTML;return Bt&&yt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&v(q,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Tt&&d([pt,mt,bt],(t=>{c=g(c,t," ")})),at&&Nt?at.createHTML(c):c},s.setConfig=function(){ce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),It=!0},s.clearConfig=function(){oe=null,It=!1},s.isValidAttribute=function(t,e,i){oe||ce({});const s=re(t),n=re(e);return ze(s,n,i)},s.addHook=function(t,e){"function"==typeof e&&(ut[t]=ut[t]||[],u(ut[t],e))},s.removeHook=function(t){if(ut[t])return c(ut[t])},s.removeHooks=function(t){ut[t]&&(ut[t]=[])},s.removeAllHooks=function(){ut={}},s}();class nt{#t={};addEventListener(t,e){this.#t||(this.#t={});let i=this.#t[t];i||(this.#t[t]=i=[]),i.push(e),i.length>1e4&&console.warn(`Potential EventEmitter memory leak: ${i.length} listeners subscribed to event "${t}"`)}removeEventListener(t,e){if(this.#t&&this.#t[t]){for(var i=[],s=0;s<this.#t[t].length;s+=1)this.#t[t][s]!==e&&i.push(this.#t[t][s]);this.#t[t]=i}}dispatchEvent(t){if(!this.#t)return;let e=this.#t[t.type];if(!e)return;let i=null;for(let s=e.length-1;s>=0;s-=1){let n,a=e[s];try{n=a.call(window,t)}catch(t){null===i&&(i=t)}if(!1===n)break}if(i)throw i}}let at=(t,e,i=!1)=>{if(t.length!==e.length)return!1;if(i)for(let i in t){if(t[i]!==e[i])return!1}else{for(let i=0;i<t.length;i+=1)if(!e.includes(t[i]))return!1;for(let i=0;i<e.length;i+=1)if(!t.includes(e[i]))return!1}return!0};function lt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rt(t,e,i=[0,0,0]){const s=lt(t,e[0]),n=lt(t,e[1]),a=lt(t,e[2]);return i[0]=s,i[1]=n,i[2]=a,i}function ot(t){return"string"===ht(t)}function ht(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function dt(t,{precision:e=16,unit:i}){return ct(t)?"none":(t=+pt(t,e))+(i??"")}function ct(t){return null===t}function ut(t){return ct(t)?0:t}function pt(t,e){if(0===t)return 0;let i=~~t,s=0;i&&e&&(s=1+~~Math.log10(Math.abs(i)));const n=10**(e-s);return Math.floor(t*n+.5)/n}function mt(t,e,i){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*i}function bt(t,e,i){return!t||!e||t===e||t[0]===e[0]&&t[1]===e[1]||isNaN(i)||null===i?i:mt(e[0],e[1],function(t,e,i){return(i-t)/(e-t)}(t[0],t[1],i))}function gt(t,e,i){return Math.max(Math.min(i,e),t)}function ft(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function xt(t,e){return ft(Math.abs(t)**e,t)}function wt(t,e){return 0===e?0:t/e}class vt{type;coordMeta;coordRange;range;constructor(t,e){if("object"==typeof t&&(this.coordMeta=t),e&&(this.coordRange=e.range??e.refRange),"string"==typeof t){let e=t.trim().match(/^(?<type><[a-z]+>)(\[(?<min>-?[.\d]+),\s*(?<max>-?[.\d]+)\])?$/);if(!e)throw new TypeError(`Cannot parse ${t} as a type definition.`);this.type=e.groups.type;let{min:i,max:s}=e.groups;(i||s)&&(this.range=[+i,+s])}}get computedRange(){return this.range?this.range:"<percentage>"===this.type?this.percentageRange():"<angle>"===this.type?[0,360]:null}get unit(){return"<percentage>"===this.type?"%":"<angle>"===this.type?"deg":""}resolve(t){if("<angle>"===this.type)return t;let e=this.computedRange,i=this.coordRange;return"<percentage>"===this.type&&(i??=this.percentageRange()),bt(e,i,t)}serialize(t,e){let i="<percentage>"===this.type?this.percentageRange(100):this.computedRange,s=this.unit;return dt(t=bt(this.coordRange,i,t),{unit:s,precision:e})}toString(){let t=this.type;if(this.range){let[e="",i=""]=this.range;t+=`[${e},${i}]`}return t}percentageRange(t=1){return(this.coordRange&&this.coordRange[0]<0?[-1,1]:[0,1]).map((e=>e*t))}static get(t,...e){return t instanceof this?t:new this(t,...e)}}const kt=Symbol("instance");class yt{type;name;spaceCoords;coords;constructor(t,e=t.space){t[kt]=this,this.type="function",this.name="color",Object.assign(this,t),this.space=e,"custom"!==this.type&&(this.spaceCoords=Object.values(e.coords),this.coords||(this.coords=this.spaceCoords.map((t=>{let e=["<number>","<percentage>"];return"angle"===t.type&&e.push("<angle>"),e}))),this.coords=this.coords.map(((t,e)=>{let i=this.spaceCoords[e];return"string"==typeof t&&(t=t.trim().split(/\s*\|\s*/)),t.map((t=>vt.get(t,i)))})))}serializeCoords(t,e,i){return i=t.map(((t,e)=>vt.get(i?.[e]??this.coords[e][0],this.spaceCoords[e]))),t.map(((t,s)=>i[s].serialize(t,e)))}coerceCoords(t,e){return Object.entries(this.space.coords).map((([i,s],n)=>{let a=t[n];if(ct(a)||isNaN(a))return a;let l=e[n],r=this.coords[n].find((t=>t.type==l));if(!r){let t=s.name||i;throw new TypeError(`${l??a?.raw??a} not allowed for ${t} in ${this.name}()`)}return a=r.resolve(a),r.range&&(e[n]=r.toString()),a}))}canSerialize(){return"function"===this.type||this.serialize}static get(t,...e){return!t||t instanceof yt?t:t[kt]?t[kt]:new yt(t,...e)}}const Ct=new class{add(t,e,i){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][i?"unshift":"push"](e)}),this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}},Et={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function zt(t){return Array.isArray(t)?t:Et[t]}function $t(t,e,i,s={}){if(t=zt(t),e=zt(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return i;let n={W1:t,W2:e,XYZ:i,options:s};if(Ct.run("chromatic-adaptation-start",n),n.M||(n.W1===Et.D65&&n.W2===Et.D50?n.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:n.W1===Et.D50&&n.W2===Et.D65&&(n.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Ct.run("chromatic-adaptation-end",n),n.M)return rt(n.XYZ,n.M);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var St={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!==globalThis?.process?.env?.NODE_ENV?.toLowerCase(),warn:function(t){this.verbose&&globalThis?.console?.warn?.(t)}};function Mt(t,e){let i,s={str:String(t)?.trim(),options:e};if(Ct.run("parse-start",s),s.color)return s.color;s.parsed=function(t){if(!t)return;t=t.trim();let e=t.match(At.function);if(e){let t=[],i=[],s=!1,n=e[2].replace(At.singleArgument,((e,n)=>{let{value:a,meta:l}=function(t){let e={},i=t.match(At.unitValue)?.[0],s=e.raw=t;i?(e.type="%"===i?"<percentage>":"<angle>",e.unit=i,e.unitless=Number(s.slice(0,-i.length)),s=e.unitless*Lt[i]):At.number.test(s)?(s=Number(s),e.type="<number>"):"none"===s?s=null:"NaN"===s||"calc(NaN)"===s?(s=NaN,e.type="<number>"):e.type="<ident>";return{value:s,meta:e}}(n);return e.startsWith("/")&&(s=!0),t.push(a),i.push(l),""}));return{name:e[1].toLowerCase(),args:t,argMeta:i,lastAlpha:s,commas:n.includes(","),rawName:e[1],rawArgs:e[2]}}}(s.str);let n=s.options?s.options.parseMeta??s.options.meta:null;if(s.parsed){let e,a,l=s.parsed.name,r=s.parsed.args,o=r.map(((t,e)=>s.parsed.argMeta[e]?.type));if("color"===l){let i=r.shift();o.shift();let n=i.startsWith("--")?i.substring(2):`--${i}`,h=[i,n];if(e=Pt.findFormat({name:l,id:h,type:"function"}),!e){let e,a=i in Pt.registry?i:n;if(a in Pt.registry){let s=Pt.registry[a].formats?.color?.id;if(s){e=`Did you mean ${t.replace("color("+i,"color("+s)}?`}}throw new TypeError(`Cannot parse ${s.str}. `+(e??"Missing a plugin?"))}a=e.space,e.id.startsWith("--")&&!i.startsWith("--")&&St.warn(`${a.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${e.id}) instead of color(${i}).`),i.startsWith("--")&&!e.id.startsWith("--")&&St.warn(`${a.name} is a standard space and supported in the CSS spec. Use color(${e.id}) instead of prefixed color(${i}).`)}else e=Pt.findFormat({name:l,type:"function"}),a=e.space;n&&Object.assign(n,{format:e,formatId:e.name,types:o,commas:s.parsed.commas});let h=1;(!0===e.alpha||s.parsed.lastAlpha)&&(h=s.parsed.args.pop(),n&&(n.alphaType=o.pop()));let d=e.coords.length;if(r.length!==d)throw new TypeError(`Expected ${d} coordinates for ${a.id} in ${s.str}), got ${r.length}`);r=e.coerceCoords(r,o),i={spaceId:a.id,coords:r,alpha:h}}else for(let t of Pt.all)for(let e in t.formats){let a=t.formats[e];if("custom"!==a.type)continue;if(a.test&&!a.test(s.str))continue;a=t.getFormat(a);let l=a.parse(s.str);if(l){n&&Object.assign(n,{format:a,formatId:e}),i=l;break}}if(!i)throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`);return i.alpha=ct(i.alpha)?i.alpha:void 0===i.alpha?1:gt(0,i.alpha,1),i}const Lt={"%":.01,deg:1,grad:.9,rad:180/Math.PI,turn:360},At={function:/^([a-z]+)\(((?:calc\(NaN\)|.)+?)\)$/i,number:/^([-+]?(?:[0-9]*\.)?[0-9]+(e[-+]?[0-9]+)?)$/i,unitValue:RegExp(`(${Object.keys(Lt).join("|")})$`),singleArgument:/\/?\s*(none|NaN|calc\(NaN\)|[-+\w.]+(?:%|deg|g?rad|turn)?)/g};function Rt(t,e){if(Array.isArray(t))return t.map((t=>Rt(t,e)));if(!t)throw new TypeError("Empty color reference");ot(t)&&(t=Mt(t,e));let i=t.space||t.spaceId;return i instanceof Pt||(t.space=Pt.get(i)),void 0===t.alpha&&(t.alpha=1),t}class Pt{constructor(t){this.id=t.id,this.name=t.name,this.base=t.base?Pt.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;for(let t in e)"name"in e[t]||(e[t].name=t);this.coords=e;let i=t.white??this.base.white??"D65";this.white=zt(i),this.formats=t.formats??{};for(let t in this.formats){let e=this.formats[t];e.type||="function",e.name||=t}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:Pt.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:Tt(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Ct.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let i=Object.values(this.coords);return t.every(((t,s)=>{let n=i[s];if("angle"!==n.type&&n.range){if(ct(t))return!0;let[i,s]=n.range;return(void 0===i||t>=i-e)&&(void 0===s||t<=s+e)}return!0}))}get isUnbounded(){return Object.values(this.coords).every((t=>!("range"in t)))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if(!t)return null;"default"===t?t=Object.values(this.formats)[0]:"string"==typeof t&&(t=this.formats[t]);let e=yt.get(t,this);return e!==t&&t.name in this.formats&&(this.formats[t.name]=e),e}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const i=Rt(t);[t,e]=[i.space,i.coords]}if(t=Pt.get(t),this.equals(t))return e;e=e.map((t=>ct(t)?0:t));let i,s,n=this.path,a=t.path;for(let t=0;t<n.length&&n[t].equals(a[t]);t++)i=n[t],s=t;if(!i)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let t=n.length-1;t>s;t--)e=n[t].toBase(e);for(let t=s+1;t<a.length;t++)e=a[t].fromBase(e);return e}from(t,e){if(1===arguments.length){const i=Rt(t);[t,e]=[i.space,i.coords]}return(t=Pt.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let i=this.coords[e],s=i.range||i.refRange;t.push(s?.min??0)}return t}static registry={};static get all(){return[...new Set(Object.values(Pt.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let t of e.aliases)this.register(t,e);return e}static get(t,...e){if(!t||t instanceof Pt)return t;if("string"===ht(t)){let e=Pt.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return Pt.get(...e);throw new TypeError(`${t} is not a valid color space`)}static findFormat(t,e=Pt.all){if(!t)return null;"string"==typeof t&&(t={name:t});for(let i of e)for(let[e,s]of Object.entries(i.formats)){s.name??=e,s.type??="function";let n=!(t.name&&s.name!==t.name||t.type&&s.type!==t.type);if(t.id){let e=s.ids||[s.id],i=Array.isArray(t.id)?t.id:[t.id];n&&=i.some((t=>e.includes(t)))}if(n){let t=yt.get(s,i);return t!==s&&(i.formats[s.name]=t),t}}return null}static resolveCoord(t,e){let i,s,n=ht(t);if("string"===n?t.includes(".")?[i,s]=t.split("."):[i,s]=[,t]:Array.isArray(t)?[i,s]=t:(i=t.space,s=t.coordId),i=Pt.get(i),i||(i=e),!i)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(n=ht(s),"number"===n||"string"===n&&s>=0){let t=Object.entries(i.coords)[s];if(t)return{space:i,id:t[0],index:s,...t[1]}}i=Pt.get(i);let a=s.toLowerCase(),l=0;for(let t in i.coords){let e=i.coords[t];if(t.toLowerCase()===a||e.name?.toLowerCase()===a)return{space:i,id:t,index:l,...e};l++}throw new TypeError(`No "${s}" coordinate found in ${i.name}. Its coordinates are: ${Object.keys(i.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function Tt(t){let e=[t];for(let i=t;i=i.base;)e.push(i);return e}var Dt=new Pt({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Bt=new Pt({id:"xyz-d50",name:"XYZ D50",white:"D50",base:Dt,fromBase:t=>$t(Dt.white,"D50",t),toBase:t=>$t("D50",Dt.white,t)});const It=216/24389,Ot=24/116,Ht=24389/27;let jt=Et.D50;var Nt=new Pt({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:jt,base:Bt,fromBase(t){let e=t.map(((t,e)=>t/jt[e])).map((t=>t>It?Math.cbrt(t):(Ht*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let[e,i,s]=t,n=[];return n[1]=(e+16)/116,n[0]=i/500+n[1],n[2]=n[1]-s/200,[n[0]>Ot?Math.pow(n[0],3):(116*n[0]-16)/Ht,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/Ht,n[2]>Ot?Math.pow(n[2],3):(116*n[2]-16)/Ht].map(((t,e)=>t*jt[e]))},formats:{lab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function Ft(t){return"number"!=typeof t?t:(t%360+360)%360}var Gt=new Pt({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Nt,fromBase(t){if(void 0===this.ε){let t=Object.values(this.base.coords)[1].refRange,e=t[1]-t[0];this.ε=e/1e5}let[e,i,s]=t,n=Math.abs(i)<this.ε&&Math.abs(s)<this.ε,a=n?null:Ft(180*Math.atan2(s,i)/Math.PI);return[e,n?0:Math.sqrt(i**2+s**2),a]},toBase(t){let[e,i,s]=t,n=null,a=null;return ct(s)||(i=i<0?0:i,n=i*Math.cos(s*Math.PI/180),a=i*Math.sin(s*Math.PI/180)),[e,n,a]},formats:{lch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const Xt=25**7,_t=Math.PI,Zt=180/_t,Ut=_t/180;function Yt(t){const e=t*t;return e*e*e*t}function qt(t,e,{kL:i=1,kC:s=1,kH:n=1}={}){[t,e]=Rt([t,e]);let[a,l,r]=Nt.from(t),o=Gt.from(Nt,[a,l,r])[1],[h,d,c]=Nt.from(e),u=Gt.from(Nt,[h,d,c])[1];o<0&&(o=0),u<0&&(u=0);let p=Yt((o+u)/2),m=.5*(1-Math.sqrt(p/(p+Xt))),b=(1+m)*l,g=(1+m)*d,f=Math.sqrt(b**2+r**2),x=Math.sqrt(g**2+c**2),w=0===b&&0===r?0:Math.atan2(r,b),v=0===g&&0===c?0:Math.atan2(c,g);w<0&&(w+=2*_t),v<0&&(v+=2*_t),w*=Zt,v*=Zt;let k,y=h-a,C=x-f,E=v-w,z=w+v,$=Math.abs(E);f*x==0?k=0:$<=180?k=E:E>180?k=E-360:E<-180?k=E+360:St.warn("the unthinkable has happened");let S,M=2*Math.sqrt(x*f)*Math.sin(k*Ut/2),L=(a+h)/2,A=(f+x)/2,R=Yt(A);S=f*x==0?z:$<=180?z/2:z<360?(z+360)/2:(z-360)/2;let P=(L-50)**2,T=1+.015*P/Math.sqrt(20+P),D=1+.045*A,B=1;B-=.17*Math.cos((S-30)*Ut),B+=.24*Math.cos(2*S*Ut),B+=.32*Math.cos((3*S+6)*Ut),B-=.2*Math.cos((4*S-63)*Ut);let I=1+.015*A*B,O=30*Math.exp(-1*((S-275)/25)**2),H=2*Math.sqrt(R/(R+Xt)),j=(y/(i*T))**2;return j+=(C/(s*D))**2,j+=(M/(n*I))**2,j+=-1*Math.sin(2*O*Ut)*H*(C/(s*D))*(M/(n*I)),Math.sqrt(j)}const Wt=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],Vt=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],Kt=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],Jt=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var Qt=new Pt({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:Dt,fromBase(t){let e=rt(t,Wt);return e[0]=Math.cbrt(e[0]),e[1]=Math.cbrt(e[1]),e[2]=Math.cbrt(e[2]),rt(e,Kt,e)},toBase(t){let e=rt(t,Jt);return e[0]=e[0]**3,e[1]=e[1]**3,e[2]=e[2]**3,rt(e,Vt,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function te(t,e){[t,e]=Rt([t,e]);let[i,s,n]=Qt.from(t),[a,l,r]=Qt.from(e),o=i-a,h=s-l,d=n-r;return Math.sqrt(o**2+h**2+d**2)}const ee=75e-6;function ie(t,e,{epsilon:i=ee}={}){t=Rt(t),e||(e=t.space),e=Pt.get(e);let s=t.coords;return e!==t.space&&(s=e.from(t)),e.inGamut(s,{epsilon:i})}function se(t,e){t=Rt(t);let i,s=Pt.get(e,e?.space),n=e?.precision;return i=!s||t.space.equals(s)?t.coords.slice():s.from(t),void 0===n?i:i.map((t=>pt(t,n)))}function ne(t,e){if(t=Rt(t),"alpha"===e)return t.alpha??1;let{space:i,index:s}=Pt.resolveCoord(e,t.space);return se(t,i)[s]}function ae(t,e,i,s){return t=Rt(t),Array.isArray(e)&&([e,i,s]=[t.space,e,i]),e=Pt.get(e),t.coords=e===t.space?i.slice():e.to(t.space,i),void 0!==s&&(t.alpha=s),t}function le(t,e,i){if(t=Rt(t),2===arguments.length&&"object"===ht(arguments[1])){let e=arguments[1];for(let i in e)le(t,i,e[i])}else if("function"==typeof i&&(i=i(ne(t,e))),"alpha"===e)t.alpha=i;else{let{space:s,index:n}=Pt.resolveCoord(e,t.space),a=se(t,s);a[n]=i,ae(t,s,a)}return t}function re(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}ae.returns="color",le.returns="color";const oe=Math.PI/180;var he=new Pt({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:Dt,fromBase:t=>t.map((t=>Math.max(203*t,0))),toBase:t=>t.map((t=>Math.max(t/203,0)))});const de=1.15,ce=.66,ue=2610/16384,pe=16384/2610,me=.8359375,be=2413/128,ge=18.6875,fe=1.7*2523/32,xe=32/(1.7*2523),we=-.56,ve=16295499532821565e-27,ke=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],ye=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Ce=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Ee=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var ze=new Pt({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:he,fromBase(t){let[e,i,s]=t,n=rt([de*e-(de-1)*s,ce*i-(ce-1)*e,s],ke).map((function(t){return((me+be*(t/1e4)**ue)/(1+ge*(t/1e4)**ue))**fe})),[a,l,r]=rt(n,Ce);return[(1+we)*a/(1+we*a)-ve,l,r]},toBase(t){let[e,i,s]=t,n=rt([(e+ve)/(1+we-we*(e+ve)),i,s],Ee).map((function(t){return 1e4*((me-t**xe)/(ge*t**xe-be))**pe})),[a,l,r]=rt(n,ye),o=(a+(de-1)*r)/de;return[o,(l+(ce-1)*o)/ce,r]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),$e=new Pt({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:ze,fromBase:Gt.fromBase,toBase:Gt.toBase});const Se=.8359375,Me=2413/128,Le=18.6875,Ae=2610/16384,Re=2523/32,Pe=16384/2610,Te=32/2523,De=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],Be=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Ie=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],Oe=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var He=new Pt({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:he,fromBase:t=>function(t){let e=t.map((function(t){return((Se+Me*(t/1e4)**Ae)/(1+Le*(t/1e4)**Ae))**Re}));return rt(e,Be)}(rt(t,De)),toBase(t){let e=function(t){let e=rt(t,Ie),i=e.map((function(t){return 1e4*(Math.max(t**Te-Se,0)/(Me-Le*t**Te))**Pe}));return i}(t);return rt(e,Oe)}});const je=Et.D65,Ne=.42,Fe=1/Ne,Ge=2*Math.PI,Xe=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],_e=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],Ze=[[460,451,288],[460,-891,-261],[460,-220,-6300]],Ue={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},Ye={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},qe=180/Math.PI,We=Math.PI/180;function Ve(t,e){return t.map((t=>{const i=xt(e*Math.abs(t)*.01,Ne);return 400*ft(i,t)/(i+27.13)}))}function Ke(t,e,i,s,n){const a={};a.discounting=n,a.refWhite=t,a.surround=s;const l=t.map((t=>100*t));a.la=e,a.yb=i;const r=l[1],o=rt(l,Xe),h=(s=Ue[a.surround])[0];a.c=s[1],a.nc=s[2];const d=(1/(5*a.la+1))**4;a.fl=d*a.la+.1*(1-d)*(1-d)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/r,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const c=Math.max(Math.min(h*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=o.map((t=>mt(1,r/t,c))),a.dRgbInv=a.dRgb.map((t=>1/t));const u=Ve(o.map(((t,e)=>t*a.dRgb[e])),a.fl);return a.aW=a.nbb*(2*u[0]+u[1]+.05*u[2]),a}const Je=Ke(je,64/Math.PI*.2,20,"average",!1);function Qe(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let i=0;i=void 0!==t.h?Ft(t.h)*We:function(t){let e=(t%400+400)%400;const i=Math.floor(.01*e);e%=100;const[s,n]=Ye.h.slice(i,i+2),[a,l]=Ye.e.slice(i,i+2);return Ft((e*(l*s-a*n)-100*s*l)/(e*(l-a)-100*l))}(t.H)*We;const s=Math.cos(i),n=Math.sin(i);let a=0;void 0!==t.J?a=.1*xt(t.J,.5):void 0!==t.Q&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let l=0;void 0!==t.C?l=t.C/a:void 0!==t.M?l=t.M/e.flRoot/a:void 0!==t.s&&(l=4e-4*t.s**2*(e.aW+4)/e.c);const r=xt(l*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),o=.25*(Math.cos(i+2)+3.8),h=e.aW*xt(a,2/e.c/e.z),d=5e4/13*e.nc*e.ncb*o,c=h/e.nbb,u=23*(c+.305)*wt(r,23*d+r*(11*s+108*n)),p=function(t,e){const i=100/e*27.13**Fe;return t.map((t=>{const e=Math.abs(t);return ft(i*xt(e/(400-e),Fe),t)}))}(rt([c,u*s,u*n],Ze).map((t=>1*t/1403)),e.fl);return rt(p.map(((t,i)=>t*e.dRgbInv[i])),_e).map((t=>t/100))}function ti(t,e){const i=Ve(rt(t.map((t=>100*t)),Xe).map(((t,i)=>t*e.dRgb[i])),e.fl),s=i[0]+(-12*i[1]+i[2])/11,n=(i[0]+i[1]-2*i[2])/9,a=(Math.atan2(n,s)%Ge+Ge)%Ge,l=.25*(Math.cos(a+2)+3.8),r=xt(5e4/13*e.nc*e.ncb*wt(l*Math.sqrt(s**2+n**2),i[0]+i[1]+1.05*i[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),o=xt(e.nbb*(2*i[0]+i[1]+.05*i[2])/e.aW,.5*e.c*e.z),h=100*xt(o,2),d=4/e.c*o*(e.aW+4)*e.flRoot,c=r*o,u=c*e.flRoot,p=Ft(a*qe),m=function(t){let e=Ft(t);e<=Ye.h[0]&&(e+=360);const i=function(t,e,i=0,s=t.length){for(;i<s;){const n=i+s>>1;t[n]<e?i=n+1:s=n}return i}(Ye.h,e)-1,[s,n]=Ye.h.slice(i,i+2),[a,l]=Ye.e.slice(i,i+2),r=(e-s)/a;return Ye.H[i]+100*r/(r+(n-e)/l)}(p);return{J:h,C:c,h:p,s:50*xt(e.c*r/(e.aW+4),.5),Q:d,M:u,H:m}}new Pt({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Dt,fromBase(t){const e=ti(t,Je);return[e.J,e.M,e.h]},toBase:t=>Qe({J:t[0],M:t[1],h:t[2]},Je)});const ei=Et.D65,ii=216/24389,si=24389/27;function ni(t){return t>8?Math.pow((t+16)/116,3):t/si}function ai(t,e){const i=116*((s=t[1])>ii?Math.cbrt(s):(si*s+16)/116)-16;var s;if(0===i)return[0,0,0];const n=ti(t,li);return[Ft(n.h),n.C,i]}const li=Ke(ei,200/Math.PI*ni(50),100*ni(50),"average",!1);var ri=new Pt({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:Dt,fromBase:t=>ai(t),toBase:t=>function(t,e){let[i,s,n]=t,a=[],l=0;if(0===n)return[0,0,0];let r=ni(n);l=n>0?.00379058511492914*n**2+.608983189401032*n+.9155088574762233:9514440756550361e-21*n**2+.08693057439788597*n-21.928975842194614;let o=0,h=Infinity;for(;o<=15;){a=Qe({J:l,C:s,h:i},e);const t=Math.abs(a[1]-r);if(t<h){if(t<=2e-12)return a;h=t}l-=(a[1]-r)*l/(2*a[1]),o+=1}return Qe({J:l,C:s,h:i},e)}(t,li),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const oi=Math.PI/180,hi=[1,.007,.0228];function di(t){t[1]<0&&(t=ri.fromBase(ri.toBase(t)));const e=Math.log(Math.max(1+hi[2]*t[1]*li.flRoot,1))/hi[2],i=t[0]*oi,s=e*Math.cos(i),n=e*Math.sin(i);return[t[2],s,n]}var ci={deltaE76:function(t,e){return function(t,e,i="lab"){let s=(i=Pt.get(i)).from(t),n=i.from(e);return Math.sqrt(s.reduce(((t,e,i)=>{let s=n[i];return ct(e)||ct(s)?t:t+(s-e)**2}),0))}(t,e,"lab")},deltaECMC:function(t,e,{l:i=2,c:s=1}={}){[t,e]=Rt([t,e]);let[n,a,l]=Nt.from(t),[,r,o]=Gt.from(Nt,[n,a,l]),[h,d,c]=Nt.from(e),u=Gt.from(Nt,[h,d,c])[1];r<0&&(r=0),u<0&&(u=0);let p=n-h,m=r-u,b=(a-d)**2+(l-c)**2-m**2,g=.511;n>=16&&(g=.040975*n/(1+.01765*n));let f,x=.0638*r/(1+.0131*r)+.638;ct(o)&&(o=0),f=o>=164&&o<=345?.56+Math.abs(.2*Math.cos((o+168)*oe)):.36+Math.abs(.4*Math.cos((o+35)*oe));let w=Math.pow(r,4),v=Math.sqrt(w/(w+1900)),k=(p/(i*g))**2;return k+=(m/(s*x))**2,k+=b/(x*(v*f+1-v))**2,Math.sqrt(k)},deltaE2000:qt,deltaEJz:function(t,e){[t,e]=Rt([t,e]);let[i,s,n]=$e.from(t),[a,l,r]=$e.from(e),o=i-a,h=s-l;ct(n)&&ct(r)?(n=0,r=0):ct(n)?n=r:ct(r)&&(r=n);let d=n-r,c=2*Math.sqrt(s*l)*Math.sin(d/2*(Math.PI/180));return Math.sqrt(o**2+h**2+c**2)},deltaEITP:function(t,e){[t,e]=Rt([t,e]);let[i,s,n]=He.from(t),[a,l,r]=He.from(e);return 720*Math.sqrt((i-a)**2+.25*(s-l)**2+(n-r)**2)},deltaEOK:te,deltaEOK2:function(t,e){[t,e]=Rt([t,e]);let[i,s,n]=Qt.from(t),[a,l,r]=Qt.from(e),o=i-a,h=2*(s-l),d=2*(n-r);return Math.sqrt(o**2+h**2+d**2)},deltaEHCT:function(t,e){[t,e]=Rt([t,e]);let[i,s,n]=di(ri.from(t)),[a,l,r]=di(ri.from(e));return Math.sqrt((i-a)**2+(s-l)**2+(n-r)**2)}};const ui={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function pi(t,{method:e=St.gamut_mapping,space:i,deltaEMethod:s="",jnd:n=2,blackWhiteClamp:a={}}={}){if(t=Rt(t),ot(arguments[1])?i=arguments[1]:i||(i=t.space),ie(t,i=Pt.get(i),{epsilon:0}))return t;let l;if("css"===e)l=function(t,{space:e}={}){const i=.02,s=1e-4;t=Rt(t),e||(e=t.space);e=Pt.get(e);const n=Pt.get("oklch");if(e.isUnbounded)return bi(t,e);const a=bi(t,n);let l=a.coords[0];if(l>=1){const i=bi(mi.WHITE,e);return i.alpha=t.alpha,bi(i,e)}if(l<=0){const i=bi(mi.BLACK,e);return i.alpha=t.alpha,bi(i,e)}if(ie(a,e,{epsilon:0}))return bi(a,e);function r(t){const i=bi(t,e),s=Object.values(e.coords);return i.coords=i.coords.map(((t,e)=>{if("range"in s[e]){const[i,n]=s[e].range;return gt(i,t,n)}return t})),i}let o=0,h=a.coords[1],d=!0,c=re(a),u=r(c),p=te(u,c);if(p<i)return u;for(;h-o>s;){const t=(o+h)/2;if(c.coords[1]=t,d&&ie(c,e,{epsilon:0}))o=t;else if(u=r(c),p=te(u,c),p<i){if(i-p<s)break;d=!1,o=t}else h=t}return u}(t,{space:i});else{if("clip"===e||ie(t,i))l=bi(t,i);else{Object.prototype.hasOwnProperty.call(ui,e)&&({method:e,jnd:n,deltaEMethod:s,blackWhiteClamp:a}=ui[e]);let r=qt;if(""!==s)for(let t in ci)if("deltae"+s.toLowerCase()===t.toLowerCase()){r=ci[t];break}let o=pi(bi(t,i),{method:"clip",space:i});if(r(t,o)>n){if(3===Object.keys(a).length){let e=Pt.resolveCoord(a.channel),i=ne(bi(t,e.space),e.id);if(ct(i)&&(i=0),i>=a.max)return bi({space:"xyz-d65",coords:Et.D65},t.space);if(i<=a.min)return bi({space:"xyz-d65",coords:[0,0,0]},t.space)}let s=Pt.resolveCoord(e),o=s.space,h=s.id,d=bi(t,o);d.coords.forEach(((t,e)=>{ct(t)&&(d.coords[e]=0)}));let c=(s.range||s.refRange)[0],u=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(n),p=c,m=ne(d,h);for(;m-p>u;){let t=re(d);t=pi(t,{space:i,method:"clip"}),r(d,t)-n<u?p=ne(d,h):m=ne(d,h),le(d,h,(p+m)/2)}l=bi(d,i)}else l=o}if("clip"===e||!ie(l,i,{epsilon:0})){let t=Object.values(i.coords).map((t=>t.range||[]));l.coords=l.coords.map(((e,i)=>{let[s,n]=t[i];return void 0!==s&&(e=Math.max(s,e)),void 0!==n&&(e=Math.min(e,n)),e}))}}return i!==t.space&&(l=bi(l,t.space)),t.coords=l.coords,t}pi.returns="color";const mi={WHITE:{space:Qt,coords:[1,0,0],alpha:1},BLACK:{space:Qt,coords:[0,0,0],alpha:1}};function bi(t,e,{inGamut:i}={}){t=Rt(t);let s=(e=Pt.get(e)).from(t),n={space:e,coords:s,alpha:t.alpha};return i&&(n=pi(n,!0===i?void 0:i)),n}function gi(t,e={}){let i,{precision:s=St.precision,format:n,inGamut:a=!0,coords:l,alpha:r,commas:o}=e,h=n;(t=Rt(t)).parseMeta&&!n&&(t.parseMeta.format.canSerialize()&&(n=t.parseMeta.format,h=t.parseMeta.formatId),l??=t.parseMeta.types,r??=t.parseMeta.alphaType,o??=t.parseMeta.commas),h&&(n=t.space.getFormat(n)??Pt.findFormat(h)),n||(n=t.space.getFormat("default")??Pt.DEFAULT_FORMAT,h=n.name),n&&n.space&&n.space!==t.space&&(t=bi(t,n.space));let d=t.coords.slice();if(a||=n.toGamut,a&&!ie(t)&&(d=pi(re(t),!0===a?void 0:a).coords),"custom"===n.type){if(!n.serialize)throw new TypeError(`format ${h} can only be used to parse colors, not for serialization`);i=n.serialize(d,t.alpha,e)}else{let e=n.name||"color",a=n.serializeCoords(d,s,l);if("color"===e){let e=n.id||n.ids?.[0]||t.space.cssId||t.space.id;a.unshift(e)}let h=t.alpha;void 0!==r&&"object"!=typeof r&&(r="string"==typeof r?{type:r}:{include:r});let c=r?.type??"<number>",u=!0===r?.include||!0===n.alpha||!1!==r?.include&&!1!==n.alpha&&h<1,p="";if(o??=n.commas,u){if(null!==s){let t;"<percentage>"===c&&(t="%",h*=100),h=dt(h,{precision:s,unit:t})}p=`${o?",":" /"} ${h}`}i=`${e}(${a.join(o?", ":" ")}${p})`}return i}bi.returns="color";let{max:fi,pow:xi,sqrt:wi,PI:vi}=Math,ki=(t,e=0)=>{let i=xi(10,e);return Math.round(t*i)/i},yi=(t,e=0)=>new DOMRect(ki(t.x,e),ki(t.y,e),ki(t.width,e),ki(t.height,e)),Ci=(t,e,i=Infinity,s=null)=>(null!==s&&(t=ki(t,s)),t<e?t=e:t>i&&(t=i),t),Ei=(t,e)=>{t=+t,e=+e;let i=(Math.floor(t)+"").length;if(e>i)return+t.toFixed(e-i);{let s=10**(i-e);return Math.round(t/s)*s}},zi=t=>{if(isFinite(t)){let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i+=1;return i}return 0},$i=(t,e)=>{let i=e.x-t.x;i*=i;let s=e.y-t.y;return s*=s,wi(i+s)},Si=(t,e)=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height,Mi=(t,e,i)=>{let[s,n]=[t.x,t.y],[a,l]=[e.x,e.y],r=Math.PI/180*i,o=Math.cos(r),h=Math.sin(r);return new DOMPoint(o*(s-a)-h*(n-l)+a,o*(n-l)+h*(s-a)+l)};class Li extends Pt{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=Dt),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let i=rt(e,t.toXYZ_M);return this.white!==this.base.white&&(i=$t(this.white,this.base.white,i)),i},t.fromBase??=e=>rt(e=$t(this.base.white,this.white,e),t.fromXYZ_M)),t.referred??="display",super(t)}}var Ai=new Li({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Ri=new Li({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Ai,toBase:t=>t.map((t=>Math.pow(Math.abs(t),563/256)*Math.sign(t))),fromBase:t=>t.map((t=>Math.pow(Math.abs(t),256/563)*Math.sign(t)))});const Pi=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Ti=new Li({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Pi}),Di={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Bi=Array(3).fill("<percentage> | <number>[0, 255]"),Ii=Array(3).fill("<number>[0, 255]");var Oi=new Li({id:"srgb",name:"sRGB",base:Ti,fromBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t})),toBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4})),formats:{rgb:{coords:Bi},rgb_number:{name:"rgb",commas:!0,coords:Ii,alpha:!1},color:{},rgba:{coords:Bi,commas:!0,alpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Ii},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,(t=>{e.push(parseInt(t,16)/255)})),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:i=!0,alpha:s}={})=>{(!1!==s&&e<1||!0===s)&&t.push(e),t=t.map((t=>Math.round(255*t)));let n=i&&t.every((t=>t%17==0));return"#"+t.map((t=>n?(t/17).toString(16):t.toString(16).padStart(2,"0"))).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=Di.black,e.alpha=0):e.coords=Di[t],e.coords)return e}}}}),Hi=new Pt({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Oi,fromBase:t=>{let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[l,r,o]=[null,0,(i+e)/2],h=e-i;if(0!==h){switch(r=0===o||1===o?0:(e-o)/Math.min(o,1-o),e){case s:l=(n-a)/h+(n<a?6:0);break;case n:l=(a-s)/h+2;break;case a:l=(s-n)/h+4}l*=60}return r<0&&(l+=180,r=Math.abs(r)),l>=360&&(l-=360),[l,100*r,100*o]},toBase:t=>{let[e,i,s]=t;function n(t){let n=(t+e/30)%12,a=i*Math.min(s,1-s);return s-a*Math.max(-1,Math.min(n-3,9-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(0),n(8),n(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,alpha:!0}}});function ji(t){let[e,i,s]=se(t,Dt),n=e+15*i+3*s;return[4*e/n,9*i/n]}let Ni=Et.D65;const Fi=216/24389,Gi=24389/27,[Xi,_i]=ji({space:Dt,coords:Ni});var Zi=new Pt({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Ni,base:Dt,fromBase(t){let e=[ut(t[0]),ut(t[1]),ut(t[2])],i=e[1],[s,n]=ji({space:Dt,coords:e});if(!Number.isFinite(s)||!Number.isFinite(n))return[0,0,0];let a=i<=Fi?Gi*i:116*Math.cbrt(i)-16;return[a,13*a*(s-Xi),13*a*(n-_i)]},toBase(t){let[e,i,s]=t;if(0===e||ct(e))return[0,0,0];i=ut(i),s=ut(s);let n=i/(13*e)+Xi,a=s/(13*e)+_i,l=e<=8?e/Gi:Math.pow((e+16)/116,3);return[l*(9*n/(4*a)),l,l*((12-3*n-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),Ui=new Pt({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Zi,fromBase:Gt.fromBase,toBase:Gt.toBase,formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Yi=216/24389,qi=24389/27,Wi=Pi[0][0],Vi=Pi[0][1],Ki=Pi[0][2],Ji=Pi[1][0],Qi=Pi[1][1],ts=Pi[1][2],es=Pi[2][0],is=Pi[2][1],ss=Pi[2][2];function ns(t,e,i){const s=e/(Math.sin(i)-t*Math.cos(i));return s<0?Infinity:s}function as(t){const e=Math.pow(t+16,3)/1560896,i=e>Yi?e:t/qi,s=i*(284517*Wi-94839*Ki),n=i*(838422*Ki+769860*Vi+731718*Wi),a=i*(632260*Ki-126452*Vi),l=i*(284517*Ji-94839*ts),r=i*(838422*ts+769860*Qi+731718*Ji),o=i*(632260*ts-126452*Qi),h=i*(284517*es-94839*ss),d=i*(838422*ss+769860*is+731718*es),c=i*(632260*ss-126452*is);return{r0s:s/a,r0i:n*t/a,r1s:s/(a+126452),r1i:(n-769860)*t/(a+126452),g0s:l/o,g0i:r*t/o,g1s:l/(o+126452),g1i:(r-769860)*t/(o+126452),b0s:h/c,b0i:d*t/c,b1s:h/(c+126452),b1i:(d-769860)*t/(c+126452)}}function ls(t,e){const i=e/360*Math.PI*2,s=ns(t.r0s,t.r0i,i),n=ns(t.r1s,t.r1i,i),a=ns(t.g0s,t.g0i,i),l=ns(t.g1s,t.g1i,i),r=ns(t.b0s,t.b0i,i),o=ns(t.b1s,t.b1i,i);return Math.min(s,n,a,l,r,o)}var rs=new Pt({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ui,gamutSpace:Oi,fromBase(t){let e,[i,s,n]=[ut(t[0]),ut(t[1]),ut(t[2])];if(i>99.9999999)e=0,i=100;else if(i<1e-8)e=0,i=0;else{e=s/ls(as(i),n)*100}return[n,e,i]},toBase(t){let e,[i,s,n]=[ut(t[0]),ut(t[1]),ut(t[2])];if(n>99.9999999)n=100,e=0;else if(n<1e-8)n=0,e=0;else{e=ls(as(n),i)/100*s}return[n,e,i]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),os=new Pt({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Oi,fromBase(t){let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[l,r,o]=[null,0,e],h=e-i;if(0!==h){switch(e){case s:l=(n-a)/h+(n<a?6:0);break;case n:l=(a-s)/h+2;break;case a:l=(s-n)/h+4}l*=60}return o&&(r=h/o),l>=360&&(l-=360),[l,100*r,100*o]},toBase(t){let[e,i,s]=t;function n(t){let n=(t+e/60)%6;return s-s*i*Math.max(0,Math.min(n,4-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(5),n(3),n(1)]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),hs=new Pt({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:os,fromBase(t){let[e,i,s]=t;return[e,s*(100-i)/100,100-s]},toBase(t){let[e,i,s]=t;i/=100,s/=100;let n=i+s;if(n>=1){return[e,0,100*(i/n)]}let a=1-s;return[e,100*(0===a?0:1-i/a),100*a]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ds=2*Math.PI,cs=[[4.076741636075958,-3.307711539258063,.2309699031821043],[-1.2684379732850315,2.609757349287688,-.341319376002657],[-.0041960761386756,-.7034186179359362,1.7076146940746117]],us=[[[-1.8817031,-.80936501],[1.19086277,1.76576728,.59662641,.75515197,.56771245]],[[1.8144408,-1.19445267],[.73956515,-.45954404,.08285427,.12541073,-.14503204]],[[.13110758,1.81333971],[1.35733652,-.00915799,-1.1513021,-.50559606,.00692167]]],ps=Number.MAX_VALUE,ms=.206,bs=.03,gs=(1+ms)/(1+bs);function fs(t,e){let i=t.length;if(i!==e.length)throw new Error(`Vectors of size ${i} and ${e.length} are not aligned`);let s=0;return t.forEach(((t,i)=>{s+=t*e[i]})),s}function xs(t){return.5*(gs*t-ms+Math.sqrt((gs*t-ms)*(gs*t-ms)+4*bs*gs*t))}function ws(t){return(t**2+ms*t)/(gs*(t+bs))}function vs(t){let[e,i]=t;return[i/e,i/(1-e)]}function ks(t,e){let i=rt(t,Jt);return i[0]=i[0]**3,i[1]=i[1]**3,i[2]=i[2]**3,rt(i,e,i)}function ys(t,e,i,s){let n=function(t,e,i,s){let n,a,l,r,o,h,d,c;fs(s[0][0],[t,e])>1?([n,a,l,r,o]=s[0][1],[h,d,c]=i[0]):fs(s[1][0],[t,e])>1?([n,a,l,r,o]=s[1][1],[h,d,c]=i[1]):([n,a,l,r,o]=s[2][1],[h,d,c]=i[2]);let u=n+a*t+l*e+r*t**2+o*t*e,p=fs(Jt[0].slice(1),[t,e]),m=fs(Jt[1].slice(1),[t,e]),b=fs(Jt[2].slice(1),[t,e]),g=1+u*p,f=1+u*m,x=1+u*b,w=h*g**3+d*f**3+c*x**3,v=h*(3*p*g**2)+d*(3*m*f**2)+c*(3*b*x**2);return u-=w*v/(v**2-.5*w*(h*(6*p**2*g)+d*(6*m**2*f)+c*(6*b**2*x))),u}(t,e,i,s),a=ks([1,n*t,n*e],i),l=xt(1/Math.max(...a),1/3);return[l,l*n]}function Cs(t,e,i){let[s,n,a]=t,l=ys(n,a,e,i),r=function(t,e,i,s,n,a,l,r){let o;if(void 0===r&&(r=ys(t,e,a,l)),(i-n)*r[1]-(r[0]-n)*s<=0)o=r[1]*n/(s*r[0]+r[1]*(n-i));else{o=r[1]*(n-1)/(s*(r[0]-1)+r[1]*(n-i));let l=i-n,h=s,d=fs(Jt[0].slice(1),[t,e]),c=fs(Jt[1].slice(1),[t,e]),u=fs(Jt[2].slice(1),[t,e]),p=l+h*d,m=l+h*c,b=l+h*u,g=n*(1-o)+o*i,f=o*s,x=g+f*d,w=g+f*c,v=g+f*u,k=x**3,y=w**3,C=v**3,E=3*p*x**2,z=3*m*w**2,$=3*b*v**2,S=6*p**2*x,M=6*m**2*w,L=6*b**2*v,A=fs(a[0],[k,y,C])-1,R=fs(a[0],[E,z,$]),P=R/(R*R-.5*A*fs(a[0],[S,M,L])),T=-A*P,D=fs(a[1],[k,y,C])-1,B=fs(a[1],[E,z,$]),I=B/(B*B-.5*D*fs(a[1],[S,M,L])),O=-D*I,H=fs(a[2],[k,y,C])-1,j=fs(a[2],[E,z,$]),N=j/(j*j-.5*H*fs(a[2],[S,M,L])),F=-H*N;T=P>=0?T:ps,O=I>=0?O:ps,F=N>=0?F:ps,o+=Math.min(T,Math.min(O,F))}return o}(n,a,s,1,s,e,i,l),o=vs(l),h=r/Math.min(s*o[0],(1-s)*o[1]),d=function(t,e){return[.11516993+1/(7.4477897+4.1590124*e+t*(1.75198401*e-2.19557347+t*(-2.13704948-10.02301043*e+t*(5.38770819*e-4.24894561+4.69891013*t)))),.11239642+1/(1.6132032-.68124379*e+t*(.40370612+.90148123*e+t*(.6122399*e-.27087943+t*(.00299215-.45399568*e-.14661872*t))))]}(n,a),c=s*d[0],u=(1-s)*d[1],p=.9*h*Math.sqrt(Math.sqrt(1/(1/c**4+1/u**4)));return c=.4*s,u=.8*(1-s),[Math.sqrt(1/(1/c**2+1/u**2)),p,r]}var Es=new Pt({id:"okhsl",name:"Okhsl",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},l:{range:[0,1],name:"Lightness"}},base:Qt,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=xs(s),l=Math.sqrt(t[1]**2+t[2]**2),r=.5+Math.atan2(-t[2],-t[1])/ds;if(0!==a&&1!==a&&0!==l){let a,r,o,h,d=t[1]/l,c=t[2]/l,[u,p,m]=Cs([s,d,c],e,i),b=.8;l<p?(r=b*u,o=1-r/p,h=l/(r+o*l),n=h*b):(a=p,r=.2*p**2*1.5625/u,o=1-r/(m-p),h=(l-a)/(r+o*(l-a)),n=b+.2*h)}const o=Math.abs(n)<1e-4;return o||0===a||Math.abs(1-a)<1e-7?(r=null,o||(n=0)):r=Ft(360*r),[r,n,a]}(t,cs,us),toBase:t=>function(t,e,i){let[s,n,a]=t,l=ws(a),r=null,o=null;if(s=Ft(s)/360,0!==l&&1!==l&&0!==n){let t,a,h,d,c=Math.cos(ds*s),u=Math.sin(ds*s),[p,m,b]=Cs([l,c,u],e,i),g=.8;n<g?(t=1.25*n,a=0,h=g*p,d=1-h/m):(t=5*(n-.8),a=m,h=.2*m**2*1.5625/p,d=1-h/(b-m));let f=a+t*h/(1-d*t);r=f*c,o=f*u}return[l,r,o]}(t,cs,us),formats:{color:{id:"--okhsl",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var zs=new Pt({id:"okhsv",name:"Okhsv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},v:{range:[0,1],name:"Value"}},base:Qt,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=xs(s),l=Math.sqrt(t[1]**2+t[2]**2),r=.5+Math.atan2(-t[2],-t[1])/ds;if(0!==s&&1!==s&&0!==l){let r=t[1]/l,o=t[2]/l,h=ys(r,o,e,i),[d,c]=vs(h),u=.5,p=1-u/d,m=c/(l+s*c),b=m*s,g=m*l,f=ws(b),x=g*f/b,[w,v,k]=ks([f,r*x,o*x],e),y=xt(1/Math.max(Math.max(w,v),Math.max(k,0)),1/3);s/=y,l/=y,l=l*xs(s)/s,s=xs(s),a=s/b,n=(u+c)*g/(c*u+c*p*g)}return r=Math.abs(n)<1e-4||0===a?null:Ft(360*r),[r,n,a]}(t,cs,us),toBase:t=>function(t,e,i){let[s,n,a]=t;s=Ft(s)/360;let l=ws(a),r=null,o=null;if(0!==l&&0!==n){let t=Math.cos(ds*s),h=Math.sin(ds*s),d=ys(t,h,e,i),[c,u]=vs(d),p=.5,m=1-p/c,b=1-n*p/(p+u-u*m*n),g=n*u*p/(p+u-u*m*n);l=a*b;let f=a*g,x=ws(b),w=g*x/b,v=ws(l);f=f*v/l,l=v;let[k,y,C]=ks([x,t*w,h*w],e),E=xt(1/Math.max(Math.max(k,y),Math.max(C,0)),1/3);l*=E,f*=E,r=f*t,o=f*h}return[l,r,o]}(t,cs,us),formats:{color:{id:"--okhsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),$s=new Pt({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Qt,fromBase:Gt.fromBase,toBase:Gt.toBase,formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});var Ss=new Li({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),Ms=new Li({id:"p3",cssId:"display-p3",name:"P3",base:Ss,fromBase:Oi.fromBase,toBase:Oi.toBase});var Ls=new Li({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Bt,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const As=1/512;var Rs=new Li({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Ls,toBase:t=>t.map((t=>t<.03125?t/16:t**1.8)),fromBase:t=>t.map((t=>t>=As?t**(1/1.8):16*t))});var Ps=new Li({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const Ts=1.09929682680944,Ds=.018053968510807;var Bs=new Li({id:"rec2020",name:"REC.2020",base:Ps,toBase:t=>t.map((function(t){return t<4.5*Ds?t/4.5:Math.pow((t+Ts-1)/Ts,1/.45)})),fromBase:t=>t.map((function(t){return t>=Ds?Ts*Math.pow(t,.45)-(Ts-1):4.5*t}))});let{isNaN:Is}=Number;Pt.register(Ri),Pt.register(Hi),Pt.register(rs),Pt.register(os),Pt.register(hs),Pt.register(Gt),Pt.register(Nt),Pt.register(zs),Pt.register(Es),Pt.register(Qt),Pt.register($s),Pt.register(Ms),Pt.register(Rs),Pt.register(Bs),Pt.register(Oi),Pt.register(Ti),Pt.register(Bt),Pt.register(Dt),Pt.register(he);let Os=(t,e="hex",i=3)=>{if(void 0===t.spaceId&&(t.spaceId=t.space.id),"hex"===e||"hex-alt"===e){let i=gi(bi(t,"srgb"),{format:"hex"});return"hex-alt"===e?i.toUpperCase():i}if("hsl"===e||"hsl-alt"===e){let[s,n,a]=bi(t,"hsl").coords,l=t.alpha;if((null===s||Is(s))&&(s=0),s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),"hsl"===e)return l=Ei(100*l,i),100===l?`hsl(${s}deg ${n}% ${a}%)`:`hsl(${s}deg ${n}% ${a}% / ${l}%)`;if("hsl-alt"===e)return l=Ei(l,i),1===l?`hsl(${s} ${n}% ${a}%)`:`hsl(${s} ${n}% ${a}% / ${l})`}else if("hwb"===e||"hwb-alt"===e){let[s,n,a]=bi(t,"hwb").coords,l=t.alpha;if((null===s||Is(s))&&(s=0),s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),"hwb"===e)return l=Ei(100*l,i),100===l?`hwb(${s}deg ${n}% ${a}%)`:`hwb(${s}deg ${n}% ${a}% / ${l}%)`;if("hwb-alt"===e)return l=Ei(l,i),1===l?`hwb(${s} ${n}% ${a}%)`:`hwb(${s} ${n}% ${a}% / ${l})`}else if("rgb"===e||"rgb-alt"===e){let[s,n,a]=bi(t,"srgb").coords,l=t.alpha;if("rgb"===e)return s=Ei(100*s,i),n=Ei(100*n,i),a=Ei(100*a,i),l=Ei(100*l,i),100===l?`rgb(${s}% ${n}% ${a}%)`:`rgb(${s}% ${n}% ${a}% / ${l}%)`;if("rgb-alt"===e)return s=Ei(255*s,i),n=Ei(255*n,i),a=Ei(255*a,i),l=Ei(l,i),1===l?`rgb(${s} ${n} ${a})`:`rgb(${s} ${n} ${a} / ${l})`}else if("color"===e||"color-alt"===e)if(["srgb","srgb-linear","a98rgb","prophoto","p3","rec2020","hsl","hwb"].includes(t.spaceId)){"hsl"!==t.spaceId&&"hwb"!==t.spaceId||void 0===(t=bi(t,"srgb")).spaceId&&(t.spaceId=t.space.id);let[s,n,a]=t.coords,l=t.alpha,r=Hs(t.spaceId,"css");if("color"===e)return s=Ei(100*s,i),n=Ei(100*n,i),a=Ei(100*a,i),l=Ei(100*l,i),100===l?`color(${r} ${s}% ${n}% ${a}%)`:`color(${r} ${s}% ${n}% ${a}% / ${l}%)`;if("color-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),1===l?`color(${r} ${s} ${n} ${a})`:`color(${r} ${s} ${n} ${a} / ${l})`}else{if(!["xyz","xyz-d50","xyz-d65"].includes(t.spaceId))throw new Error(`"Color in "${t.spaceId}" space can't be serialized to "${e}" format.`);{let[s,n,a]=t.coords,l=t.alpha,r=t.spaceId;if("color"===e)return s=Ei(100*s,i),n=Ei(100*n,i),a=Ei(100*a,i),l=Ei(100*l,i),"xyz"===r&&(r="xyz-d65"),100===l?`color(${r} ${s}% ${n}% ${a}%)`:`color(${r} ${s}% ${n}% ${a}% / ${l}%)`;if("color-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),"xyz-d65"===r&&(r="xyz"),1===l?`color(${r} ${s} ${n} ${a})`:`color(${r} ${s} ${n} ${a} / ${l})`}}else if("oklch"===e||"oklch-alt"===e){let[s,n,a]=bi(t,"oklch").coords,l=t.alpha;if("oklch"===e)return s=Ei(100*s,i),n=Ei(n/.4*100,i),a=Ei(a,i),l=Ei(100*l,i),100===l?`oklch(${s}% ${n}% ${a}deg)`:`oklch(${s}% ${n}% ${a}deg / ${l}%)`;if("oklch-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),1===l?`oklch(${s} ${n} ${a})`:`oklch(${s} ${n} ${a} / ${l})`}else if("oklab"===e||"oklab-alt"===e){let[s,n,a]=bi(t,"oklab").coords,l=t.alpha;if("oklab"===e)return s=Ei(100*s,i),n=Ei(n/.4*100,i),a=Ei(a/.4*100,i),l=Ei(100*l,i),100===l?`oklab(${s}% ${n}% ${a}%)`:`oklab(${s}% ${n}% ${a}% / ${l}%)`;if("oklab-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),1===l?`oklab(${s} ${n} ${a})`:`oklab(${s} ${n} ${a} / ${l})`}else if("lch"===e||"lch-alt"===e){let[s,n,a]=bi(t,"lch").coords,l=t.alpha;if("lch"===e)return s=Ei(s,i),n=Ei(n/150*100,i),a=Ei(a,i),l=Ei(100*l,i),100===l?`lch(${s}% ${n}% ${a}deg)`:`lch(${s}% ${n}% ${a}deg / ${l}%)`;if("lch-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),1===l?`lch(${s} ${n} ${a})`:`lch(${s} ${n} ${a} / ${l})`}else{if("lab"!==e&&"lab-alt"!==e)throw new Error(`Unknown color format "${e}".`);{let[s,n,a]=bi(t,"lab").coords,l=t.alpha;if("lab"===e)return s=Ei(s,i),n=Ei(n/125*100,i),a=Ei(a/125*100,i),l=Ei(100*l,i),100===l?`lab(${s}% ${n}% ${a}%)`:`lab(${s}% ${n}% ${a}% / ${l}%)`;if("lab-alt"===e)return s=Ei(s,i),n=Ei(n,i),a=Ei(a,i),l=Ei(l,i),1===l?`lab(${s} ${n} ${a})`:`lab(${s} ${n} ${a} / ${l})`}}},Hs=(t,e="css")=>("css"===e?"p3"===t?t="display-p3":"a98rgb"===t?t="a98-rgb":"prophoto"===t&&(t="prophoto-rgb"):"color.js"===e&&("display-p3"===t?t="p3":"a98-rgb"===t?t="a98rgb":"prophoto-rgb"===t&&(t="prophoto")),"xyz"===t&&(t="xyz-d65"),t),js=t=>{try{Mt(t)}catch(t){return!1}return!0},Ns=document.createElement("template"),Fs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join("");Ns.innerHTML=s;let n=document.importNode(Ns.content,!0);return 1===n.children.length?n.firstElementChild:n},Gs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join(""),n=new CSSStyleSheet;return n.replaceSync(s),n},Xs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=`<svg id="x-stub" xmlns="http://www.w3.org/2000/svg">${i.join("")}</svg>`;Ns.innerHTML=s;let n=document.importNode(Ns.content,!0),a=n.querySelector("svg#x-stub");if(1===a.children.length)return a.firstElementChild;for(let t of[...a.childNodes])n.appendChild(t);return a.remove(),n},_s={},Zs=t=>new Promise((async e=>{if(_s[t])_s[t].icons?e(_s[t].icons):_s[t].callbacks.push(e);else{_s[t]={callbacks:[e],icons:null};let i=null;try{i=await(await fetch(t)).text()}catch(t){i=null}if(i){_s[t].icons=Xs`${i}`;for(let e of _s[t].callbacks)e(_s[t].icons)}else console.error(`Xel failed to fetch the icons: ${t}`)}}));class Us{constructor(t){this.value=t}valueOf(){return this.value}}class Ys extends Us{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class qs extends Us{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}class Ws extends Us{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}const Vs=100,Ks="⁨",Js="⁩";function Qs(t,e,i){if(i===e)return!0;if(i instanceof qs&&e instanceof qs&&i.value===e.value)return!0;if(e instanceof qs&&"string"==typeof i){if(i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0}return!1}function tn(t,e,i){return e[i]?an(t,e[i].value):(t.reportError(new RangeError("No default")),new Ys)}function en(t,e){const i=[],s=Object.create(null);for(const n of e)"narg"===n.type?s[n.name]=sn(t,n.value):i.push(sn(t,n));return{positional:i,named:s}}function sn(t,e){switch(e.type){case"str":return e.value;case"num":return new qs(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new Ys(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Ys(`$${e}`);i=t.args[e]}if(i instanceof Us)return i;switch(typeof i){case"string":return i;case"number":return new qs(i);case"object":if(i instanceof Date)return new Ws(i.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new Ys(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const s=t.bundle.k.get(e);if(!s)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new Ys(e);if(i){const n=s.attributes[i];return n?an(t,n):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Ys(`${e}.${i}`))}if(s.value)return an(t,s.value);return t.reportError(new ReferenceError(`No value: ${e}`)),new Ys(e)}(t,e);case"term":return function(t,{name:e,attr:i,args:s}){const n=`-${e}`,a=t.bundle.$.get(n);if(!a)return t.reportError(new ReferenceError(`Unknown term: ${n}`)),new Ys(n);if(i){const e=a.attributes[i];if(e){t.params=en(t,s).named;const i=an(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Ys(`${n}.${i}`)}t.params=en(t,s).named;const l=an(t,a.value);return t.params=null,l}(t,e);case"func":return function(t,{name:e,args:i}){let s=t.bundle.S[e];if(!s)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Ys(`${e}()`);if("function"!=typeof s)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new Ys(`${e}()`);try{let e=en(t,i);return s(e.positional,e.named)}catch(i){return t.reportError(i),new Ys(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:s}){let n=sn(t,e);if(n instanceof Ys)return tn(t,i,s);for(const e of i){if(Qs(t,n,sn(t,e.key)))return an(t,e.value)}return tn(t,i,s)}(t,e);default:return new Ys}}function nn(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new Ys;t.dirty.add(e);const i=[],s=t.bundle.L&&e.length>1;for(const n of e)if("string"!=typeof n){if(t.placeables++,t.placeables>Vs)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is ${Vs}`);s&&i.push(Ks),i.push(sn(t,n).toString(t)),s&&i.push(Js)}else i.push(t.bundle.A(n));return t.dirty.delete(e),i.join("")}function an(t,e){return"string"==typeof e?t.bundle.A(e):nn(t,e)}class ln{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle.R.get(t);i||(i={},this.bundle.R.set(t,i));let s=JSON.stringify(e);return i[s]||(i[s]=new t(this.bundle.locales,e)),i[s]}}function rn(t,e){const i=Object.create(null);for(const[s,n]of Object.entries(t))e.includes(s)&&(i[s]=n.valueOf());return i}const on=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function hn(t,e){let i=t[0];if(i instanceof Ys)return new Ys(`NUMBER(${i.valueOf()})`);if(i instanceof qs)return new qs(i.valueOf(),{...i.opts,...rn(e,on)});if(i instanceof Ws)return new qs(i.valueOf(),{...rn(e,on)});throw new TypeError("Invalid argument to NUMBER")}const dn=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function cn(t,e){let i=t[0];if(i instanceof Ys)return new Ys(`DATETIME(${i.valueOf()})`);if(i instanceof Ws)return new Ws(i.valueOf(),{...i.opts,...rn(e,dn)});if(i instanceof qs)return new Ws(i.valueOf(),{...rn(e,dn)});throw new TypeError("Invalid argument to DATETIME")}const un=new Map;class pn{constructor(t,{functions:e,useIsolating:i=!0,transform:s=(t=>t)}={}){this.$=new Map,this.k=new Map,this.locales=Array.isArray(t)?t:[t],this.S={NUMBER:hn,DATETIME:cn,...e},this.L=i,this.A=s,this.R=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=un.get(e);return void 0===i&&(i=new Map,un.set(e,i)),i}(t)}hasMessage(t){return this.k.has(t)}getMessage(t){return this.k.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let s=0;s<t.body.length;s++){let n=t.body[s];if(n.id.startsWith("-")){if(!1===e&&this.$.has(n.id)){i.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this.$.set(n.id,n)}else{if(!1===e&&this.k.has(n.id)){i.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this.k.set(n.id,n)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this.A(t);let s=new ln(this,i,e);try{return nn(s,t).toString(s)}catch(t){if(s.errors&&t instanceof Error)return s.errors.push(t),(new Ys).toString(s);throw t}}}const mn=/^(-?[a-zA-Z][\w-]*) *= */gm,bn=/\.([a-zA-Z][\w-]*) *= */y,gn=/\*?\[/y,fn=/(-?[0-9]+(?:\.([0-9]+))?)/y,xn=/([a-zA-Z][\w-]*)/y,wn=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,vn=/^[A-Z][A-Z0-9_-]*$/,kn=/([^{}\n\r]+)/y,yn=/([^\\"\n\r]*)/y,Cn=/\\([\\"])/y,En=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,zn=/^\n+/,$n=/ +$/,Sn=/ *\r?\n/g,Mn=/( *)$/,Ln=/{\s*/y,An=/\s*}/y,Rn=/\[\s*/y,Pn=/\s*] */y,Tn=/\s*\(\s*/y,Dn=/\s*->\s*/y,Bn=/\s*:\s*/y,In=/\s*,?\s*/y,On=/\s+/y;class Hn{constructor(t){this.body=[],mn.lastIndex=0;let e=0;for(;;){let i=mn.exec(t);if(null===i)break;e=mn.lastIndex;try{this.body.push(r(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function i(i){return i.lastIndex=e,i.test(t)}function s(i,s){if(t[e]===i)return e++,!0;if(s)throw new s(`Expected ${i}`);return!1}function n(t,s){if(i(t))return e=t.lastIndex,!0;if(s)throw new s(`Expected ${t.toString()}`);return!1}function a(i){i.lastIndex=e;let s=i.exec(t);if(null===s)throw new SyntaxError(`Expected ${i.toString()}`);return e=i.lastIndex,s}function l(t){return a(t)[1]}function r(t){let e=o(),s=function(){let t=Object.create(null);for(;i(bn);){let e=l(bn),i=o();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===e&&0===Object.keys(s).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:s}}function o(){let s;if(i(kn)&&(s=l(kn)),"{"===t[e]||"}"===t[e])return h(s?[s]:[],Infinity);let n=f();return n?s?h([s,n],n.length):(n.value=x(n.value,zn),h([n],n.length)):s?x(s,$n):null}function h(s=[],n){for(;;){if(i(kn)){s.push(l(kn));continue}if("{"===t[e]){s.push(d());continue}if("}"===t[e])throw new SyntaxError("Unbalanced closing brace");let a=f();if(!a)break;s.push(a),n=Math.min(n,a.length)}let a=s.length-1,r=s[a];"string"==typeof r&&(s[a]=x(r,$n));let o=[];for(let t of s)t instanceof jn&&(t=t.value.slice(0,t.value.length-n)),t&&o.push(t);return o}function d(){n(Ln,SyntaxError);let t=c();if(n(An))return t;if(n(Dn)){let e=function(){let t,e=[],n=0;for(;i(gn);){s("*")&&(t=n);let i=p(),a=o();if(null===a)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:a}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return n(An,SyntaxError),{type:"select",selector:t,...e}}throw new SyntaxError("Unclosed placeable")}function c(){if("{"===t[e])return d();if(i(wn)){let[,i,s,l=null]=a(wn);if("$"===i)return{type:"var",name:s};if(n(Tn)){let a=function(){let i=[];for(;;){switch(t[e]){case")":return e++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push(u()),n(In)}}();if("-"===i)return{type:"term",name:s,attr:l,args:a};if(vn.test(s))return{type:"func",name:s,args:a};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:s,attr:l,args:[]}:{type:"mesg",name:s,attr:l}}return m()}function u(){let t=c();return"mesg"!==t.type?t:n(Bn)?{type:"narg",name:t.name,value:m()}:t}function p(){let t;return n(Rn,SyntaxError),t=i(fn)?b():{type:"str",value:l(xn)},n(Pn,SyntaxError),t}function m(){if(i(fn))return b();if('"'===t[e])return function(){s('"',SyntaxError);let i="";for(;;){if(i+=l(yn),"\\"!==t[e]){if(s('"'))return{type:"str",value:i};throw new SyntaxError("Unclosed string literal")}i+=g()}}();throw new SyntaxError("Invalid expression")}function b(){let[,t,e=""]=a(fn),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function g(){if(i(Cn))return l(Cn);if(i(En)){let[,t,e]=a(En),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function f(){let i=e;switch(n(On),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(i,e))}return" "===t[e-1]&&w(t.slice(i,e))}function x(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Sn,"\n"),i=Mn.exec(t)[1].length;return new jn(e,i)}}}class jn{constructor(t,e){this.value=t,this.length=e}}let Nn,Fn,Gn=()=>(void 0===Fn&&(Fn=navigator.userAgent.indexOf("Firefox/")>-1?"gecko":navigator.userAgent.indexOf("Chrome")>-1?"chromium":navigator.userAgent.indexOf("Safari/")>-1?"webkit":"other"),Fn),Xn=t=>new Promise(((e,i)=>{setTimeout((()=>e()),t)})),_n=()=>Date.now(),Zn=(t,e=500,i)=>{let s=null,n=null,a=null,l=0,r=()=>{l=new Date,n=null,a=t.apply(i,s)};return(...o)=>{let h=new Date,d=e-(h-l);return s=o,d<=0?(clearTimeout(n),n=null,l=h,a=t.apply(i,s)):n||(n=setTimeout(r,d)),a}};var Un=new class extends nt{get theme(){return this.#e}set theme(t){let e=document.head.querySelector(':scope > meta[name="xel-theme"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-theme"),document.head.append(e)),e.setAttribute("content",t)}get icons(){return[...this.#i]}set icons(t){let e=document.head.querySelector(':scope > meta[name="xel-icons"]');e||(e=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),e&&console.warn('<meta name="xel-iconsets"> has been deprecated. Please use <meta name="xel-icons"> instead.'),e||(e=document.createElement("meta"),e.setAttribute("name","xel-icons"),document.head.append(e))),e.setAttribute("content",t.join(", "))}get locales(){return[...this.#s]}set locales(t){let e=document.head.querySelector(':scope > meta[name="xel-locales"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-locales"),document.head.append(e)),e.setAttribute("content",t.join(", "))}get locale(){return this.#n[0]||"en"}get accentColor(){return this.#a}set accentColor(t){let e=document.head.querySelector(':scope > meta[name="xel-accent-color"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-accent-color"),document.head.append(e)),e.setAttribute("content",t)}get whenThemeReady(){return new Promise((t=>{null===this.#l?t():this.#l.push(t)}))}get whenIconsReady(){return new Promise((t=>{null===this.#r?t():this.#r.push(t)}))}get whenLocalesReady(){return new Promise((t=>{null===this.#o?t():this.#o.push(t)}))}get themeStyleSheet(){return this.#h}get presetAccentColors(){let t={};for(let e of this.#h.cssRules)if(1===e.type&&"body"===e.selectorText){let i=e.style.getPropertyValue("--preset-accent-colors");if(""!==i){let e=i.split(",").map((t=>t.trim())).map((t=>t.split(" ")));t=Object.fromEntries(e);break}}return t}get autocapitalize(){return this.#d}queryIcon(t){t=!1===t.startsWith("#")?"#"+t:t;let e=null;for(let i of this.#c){let s=i.querySelector(t);if(s){e=s;break}}return e}queryMessage(t,e={}){t=t.startsWith("#")?t.substring(1):t;let[i,s]=t.split("."),n=this.#u.getMessage(i),a=null,l=!1,r="text";if(void 0===e.os&&(e.os=(void 0===Nn&&(Nn=!0===navigator.platform.startsWith("Mac")?"macos":-1!==["iPhone","iPad","iPod"].indexOf(navigator.platform)?"ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(navigator.platform)?"windows":/CrOS/.test(navigator.userAgent)?"chromeos":/Android/.test(navigator.userAgent)?"android":/Linux/.test(navigator.platform)?"linux":null),Nn)),void 0===s&&(s=null),n)if(null===s){if(n.value){if(Array.isArray(n.value))for(let t of n.value)"select"===t.type&&void 0===e[t.selector.name]&&(e[t.selector.name]="unknown");a=this.#u.formatPattern(n.value,e)}}else n.attributes?.[s]&&(a=this.#u.formatPattern(n.attributes[s],e));return null===a?(a=null===s?i:`${i}.${s}`,l=!0):/<|&#?\w+;/.test(a)&&(r="html",a=st.sanitize(a,{USE_PROFILES:{html:!0}})),{id:i,attribute:s,format:r,content:a,fallback:l}}getConfig(t,e=null){let i=localStorage.getItem(t);return null===i?e:JSON.parse(i)}setConfig(t,e){let i=localStorage.getItem(t);null===e?delete localStorage[t]:localStorage.setItem(t,JSON.stringify(e)),i!==localStorage.getItem(t)&&this.dispatchEvent(new CustomEvent("configchange",{detail:{key:t,value:e,origin:"self"}}))}clearConfig(){if(localStorage.length>0){let t=Object.keys(localStorage);localStorage.clear();for(let e of t)this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:null,origin:"self"}}))}}#e=null;#a=null;#i=[];#s=[];#n=[];#d="none";#h=new CSSStyleSheet;#c=[];#u=null;#l=[];#r=[];#o=[];constructor(){super(),document.adoptedStyleSheets=[this.#h];let{theme:t,accentColor:e,icons:i,locales:s}=this.#p();this.#e=t,this.#a=e,this.#i=i,this.#s=s,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),null!==this.#e&&this.#m(this.#e),this.#i.length>0&&this.#b(this.#i),this.#s.length>0&&this.#g(this.#s);new MutationObserver((t=>this.#f(t))).observe(document.head,{attributes:!0,subtree:!0});window.addEventListener("storage",(t=>this.#x(t)))}#f(t){let e=this.#e,i=this.#a,s=this.#i,n=this.#s,{theme:a,accentColor:l,icons:r,locales:o}=this.#p();this.#e=a,this.#a=l,this.#i=r,this.#s=o,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),this.#e!==e&&this.#m(this.#e).then((()=>{this.dispatchEvent(new CustomEvent("themechange"))})),this.#a!==i&&(this.#w(),this.dispatchEvent(new CustomEvent("accentcolorchange"))),!1===at(this.#i,s,!0)&&this.#b(this.#i).then((()=>{this.dispatchEvent(new CustomEvent("iconschange")),this.dispatchEvent(new CustomEvent("iconsetschange"))})),!1===at(this.#s,n,!0)&&this.#g(this.#s).then((()=>{this.dispatchEvent(new CustomEvent("localeschange"))}))}#x(t){if(t.storageArea===window.localStorage){let e=t.key,i=null===t.newValue?null:JSON.parse(t.newValue);this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:i,origin:"other"}}))}}#v(t){return new Promise((async e=>{let i=await fetch(t),s=await i.text();for(let[t,e]of this.#k(s)){let i=await this.#v(t);s=s.replace(e,i)}e(s)}))}#m(t){return new Promise((async e=>{null===this.#l&&(this.#l=[]);let i=await this.#v(t);if(this.#h.replaceSync(i),this.#y(),this.#w(),this.#C(),null!==this.#l){for(let t of this.#l)t();this.#l=null}e()}))}#b(t){return new Promise((async e=>{null===this.#r&&(this.#r=[]),this.#c=[];for(let e of t){let t=await Zs(e);this.#c.push(t)}for(let t of this.#r)t();this.#r=null,e()}))}#g(t){return new Promise((async e=>{null===this.#o&&(this.#o=[]);let i=t.map((t=>{if(t.startsWith("blob:")){return t.substring(t.lastIndexOf("#")+1)}{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))}}));0===i.length&&i.push("en");let s=new pn([i[0]],{useIsolating:!1,functions:{RELDATETIME:(t=[],e={})=>{let s;if(t[0]instanceof qs)s=new Date(t[0].value);else{if("string"!=typeof t[0])throw new TypeError("Invalid argument to RELDATETIME");s=new Date(parseInt(t[0]))}return((t,e=new Date,i=["en"])=>{let s,n=3600,a=86400,l=604800,r=t.getTime(),o=e.getTime(),h=new Intl.RelativeTimeFormat(i,{numeric:"always"}),d=Math.round((o-r)/1e3);if(d<0?(s=1,d=-d):s=-1,d<60)return h.format(d*s,"seconds");if(d<n)return h.format(Math.round(d*s/60),"minutes");if(d<a)return h.format(Math.round(d*s/n),"hours");if(d<l)return h.format(Math.round(d*s/a),"days");if(d<4233600)return h.format(Math.round(d*s/l),"weeks");{let i=12*(t.getFullYear()-e.getFullYear());return i-=e.getMonth(),i+=t.getMonth(),Math.abs(i)>12?i<0?h.format(Math.ceil(i/12),"years"):h.format(Math.floor(i/12),"years"):h.format(i,"months")}})(s,new Date,i)}}});for(let e=t.length-1;e>=0;e-=1){let i=t[e],n=await(await fetch(i)).text(),a=new Hn(n),l=s.addResource(a,{allowOverrides:!0});l.length&&console.info("Found localization syntax errors",l)}this.#u=s,this.#y();for(let t of this.#o)t();this.#o=null,e()}))}#y(){this.#u?.locales[0]?.startsWith("en")?this.#d=getComputedStyle(document.body).getPropertyValue("--autocapitalize").trim()||"none":this.#d="none"}async#C(){await this.whenThemeReady;let t=document.head.querySelector('meta[name="theme-color"]'),e=getComputedStyle(document.body).getPropertyValue("--titlebar-color").trim()||"auto";"auto"===e?t&&t.remove():(null===t&&(t=document.createElement("meta"),t.setAttribute("name","theme-color"),document.head.append(t)),t.setAttribute("content",e))}async#w(){await this.whenThemeReady;let t=this.#a||this.presetAccentColors.blue;this.presetAccentColors[t]&&(t=this.presetAccentColors[t]);let e=bi(Mt(t),"hsl"),[i,s,n]=e.coords,a=[...this.#h.cssRules].reverse().find((t=>1===t.type&&"body"===t.selectorText));(null===i||Number.isNaN(i))&&(i=0),a.style.setProperty("--accent-color-h",i),a.style.setProperty("--accent-color-s",`${s}%`),a.style.setProperty("--accent-color-l",`${n}%`),a.style.setProperty("--accent-color-a",e.alpha)}#p(){let t=document.head.querySelector(':scope > meta[name="xel-theme"]'),e=document.head.querySelector(':scope > meta[name="xel-accent-color"]'),i=document.head.querySelector(':scope > meta[name="xel-icons"]'),s=document.head.querySelector(':scope > meta[name="xel-locales"]');return i||(i=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),i&&console.warn('<meta name="xel-iconsets"> has been deprecated in in Xel 0.27.0. Please use <meta name="xel-icons"> instead.')),{theme:t&&""!==t.content?t.content:null,accentColor:e&&""!==e.content?e.content:null,icons:i?i.content.split(",").map((t=>t.trim())).filter((t=>""!==t)):[],locales:s?s.content.split(",").map((t=>t.trim())).filter((t=>""!==t)):[]}}#k(t){let e=[],i=-1;for(;;){let s=t.indexOf("@import",i);if(!(s>-1))break;{let n=t.indexOf(";",s),a=0,l=t.indexOf(".css",s)+4,r=t.indexOf("'",s),o=t.indexOf('"',s);if(r>s&&r<n)a=r+1;else if(o>s&&o<n)a=o+1;else{let e=t.indexOf("url(",s);e>s&&e<n&&(a=e+4)}let h=t.substring(a,l);e.push([h,t.substring(s,n+1)]),i=l}}return e}get iconsets(){return console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons}set iconsets(t){console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons=t}get whenIconsetsReady(){return console.warn('"Xel.whenIconsetsReady" has been deprecated in Xel 0.27.0. Please use "Xel.whenIconsReady" instead.'),this.whenIconsReady}};let Yn=(t,e=null)=>{let i=t.split(":"),s=null;if(1===i.length){let[t]=i;s=null===e?document.createElement(t):document.createElement(t,e)}else if(2===i.length){let[t,e]=i;"svg"===t&&(s=document.createElementNS("http://www.w3.org/2000/svg",e))}return s},qn=(t,e)=>{let i=e.getBoundingClientRect();return t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height},Wn=(t,e,i=!0)=>{let s=t.closest(e);return i&&!s&&t.getRootNode().host?Wn(t.getRootNode().host,e):s},Vn=t=>{let e=t=>t&&t!==document.body?(t=>{let e=getComputedStyle(t,null);return/(auto|scroll)/.test(e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x"))})(t)&&"x-texteditor"!==t.localName?t:e(t.parentElement||t.parentNode.host):document.body;return e(t.parentElement||t.parentNode.host)},Kn=HTMLDialogElement.prototype.showModal,Jn=HTMLDialogElement.prototype.close,Qn=[],ta={get open(){return this.hasAttribute("open")},showModal(){return new Promise((async t=>{if(!0!==this.open&&!1!==this.isConnected){this.P&&await this.P.finished,this.T&&await this.T.finished,Kn.apply(this,arguments);{let t;document.body.style.overflow="hidden",Qn.push(this),this.addEventListener("close",t=e=>{e.target===this&&(this.removeEventListener("close",t),Qn=Qn.filter((t=>t!==this)),0===Qn.length&&(document.body.style.overflow=null))})}{let t=this.querySelector("[autofocus]");t?t.focus():this.focus()}if(!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=t.getPropertyValue("transition-property"),i=1e3*parseFloat(t.getPropertyValue("transition-duration")),s=t.getPropertyValue("transition-timing-function"),n=this.getBoundingClientRect();"transform"===e&&("0px"===getComputedStyle(this).left&&"0px"!==getComputedStyle(this).right?this.P=this.animate({transform:[`translateX(-${n.right}px)`,"translateX(0px)"]},{duration:i,easing:s}):"0px"===getComputedStyle(this).right&&"0px"!==getComputedStyle(this).left?this.P=this.animate({transform:[`translateX(${n.width}px)`,"translateX(0px)"]},{duration:i,easing:s}):"0px"===getComputedStyle(this).marginTop&&"0px"===getComputedStyle(this).marginBottom?this.P=this.animate({transform:[`translateY(-${n.bottom}px)`,"translateY(0px)"]},{duration:i,easing:s}):this.P=this.animate({transform:["scaleY(0)","scaleY(1)"]},{duration:i,easing:s}))}{let t,e,i;this.addEventListener("keydown",t=t=>{"Escape"===t.code&&t.preventDefault()}),document.addEventListener("keydown",e=t=>{"Escape"===t.code&&t.target===document.body&&t.preventDefault()}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("close",i),this.removeEventListener("keydown",t),document.removeEventListener("keydown",e))})}{let t,e,i,s=!0;this.addEventListener("pointerdown",t=t=>{s=!1===qn(t,this)}),this.addEventListener("click",e=t=>{t.target===this&&!0===t.isTrusted&&!1===t.defaultPrevented&&!0===s&&!1===qn(t,this)&&!0===this.hasAttribute("open")&&(this.close(),this.dispatchEvent(new CustomEvent("userclose")))}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("pointerdown",t),this.removeEventListener("click",e),this.removeEventListener("close",i))})}this.P&&(await this.P.finished,this.P=null),t()}else t()}))},close(){return new Promise((async t=>{if(this.P&&await this.P.finished,this.T&&await this.T.finished,!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=t.getPropertyValue("transition-property"),i=t.getPropertyValue("transition-duration")||"0s",s=1e3*parseFloat(i),n=t.getPropertyValue("transition-timing-function")||"ease",a=this.getBoundingClientRect();"transform"===e&&("0px"===getComputedStyle(this).left&&"0px"!==getComputedStyle(this).right?this.T=this.animate({transform:["translateX(0px)",`translateX(-${a.right}px)`]},{duration:s,easing:n}):"0px"===getComputedStyle(this).right&&"0px"!==getComputedStyle(this).left?this.T=this.animate({transform:["translateX(0px)",`translateX(${a.width}px)`]},{duration:s,easing:n}):"0px"===getComputedStyle(this).marginTop&&"0px"===getComputedStyle(this).marginBottom?this.T=this.animate({transform:["translateY(0px)",`translateY(-${a.bottom+50}px)`]},{duration:s,easing:n}):this.T=this.animate({transform:["scaleY(1)","scaleY(0)"]},{duration:s,easing:n}))}this.T&&(await this.T.finished,this.T=null),this.hasAttribute("open")&&Jn.apply(this,arguments),t()}))}};for(let[t,e]of Object.entries(Object.getOwnPropertyDescriptors(ta)))Object.defineProperty(HTMLDialogElement.prototype,t,e);class ea extends HTMLElement{static observedAttributes=["expanded"];static#E=Fs`<template><main id="main"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none" tabindex="1"><path id="arrow-path"></path></svg></div><slot></slot></main></template>`;static#z=Gs`:host{display:block;width:100%;margin:8px 0;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:.5}:host([animating]){overflow:hidden}#main{position:relative;width:100%;height:100%}#arrow-container{position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:flex-start;pointer-events:none}#arrow{display:flex;width:16px;height:16px;transform:rotate(0);transition:transform .25s cubic-bezier(.4, 0, .2, 1);color:currentColor;--path-data:M 26 20 L 26 80 L 74 50 Z}#arrow:focus{background:0 0;outline:0}:host([expanded]) #arrow{transform:rotate(90deg)}#arrow-path{fill:currentColor}`;get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#S=null;#M=null;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ea.#z],this.#$.append(document.importNode(ea.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#S=new ResizeObserver((()=>this.#A())),this.addEventListener("click",(t=>this.#R(t))),this["#arrow"].addEventListener("keydown",(t=>this.#P(t)))}connectedCallback(){this.#T(),Un.addEventListener("themechange",this.#L=()=>this.#T()),this.#S.observe(this)}disconnectedCallback(){Un.removeEventListener("themechange",this.#L),this.#S.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&"expanded"===t&&this.#A()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded){let e=this.getBoundingClientRect();if(this.#M&&this.#M.finish(),this.removeAttribute("animating"),t){this.expanded=!0;let t=this.getBoundingClientRect();this.setAttribute("animating","");let i=this.animate({height:[e.height+"px",t.height+"px"]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});this.#M=i,await i.finished,this.#M===i&&this.removeAttribute("animating")}else this["#arrow"].style.transition="none",this.expanded=!0,this["#arrow"].style.transition=null}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded){let e=this.getBoundingClientRect();if(this.#M&&this.#M.finish(),this.removeAttribute("animating"),t){this.expanded=!1;let t=this.getBoundingClientRect();this.setAttribute("animating","");let i=this.animate({height:[e.height+"px",t.height+"px"]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});this.#M=i,await i.finished,this.#M===i&&this.removeAttribute("animating")}else this["#arrow"].style.transition="none",this.expanded=!1,this["#arrow"].style.transition=null}e()}))}#A(){let t=this.querySelector(":scope > header");this["#arrow-container"].style.height=t?t.getBoundingClientRect().height+"px":null}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#P(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||this.querySelector("header").click()}#R(t){let e=this.querySelector("header"),i=t.target.closest("[tabindex]");e.contains(t.target)&&!1===this.contains(i)&&(this.expanded?(this.collapse(),this.dispatchEvent(new CustomEvent("collapse"))):(this.expand(),this.dispatchEvent(new CustomEvent("expand"))))}}customElements.define("x-accordion",ea);class ia extends HTMLElement{static#z=Gs`:host{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;touch-action:none;cursor:default;background:rgba(0,0,0,.5)}:host([hidden]){display:none}`;get ownerElement(){return this.#D?this.#D:document.body.firstElementChild}set ownerElement(t){this.#D=t}#$=null;#D=null;#B=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ia.#z],this.addEventListener("pointerdown",(t=>t.preventDefault()))}connectedCallback(){this.addEventListener("wheel",this.#B=t=>t.preventDefault())}disconnectedCallback(){this.removeEventListener("wheel",this.#B)}show(t=!0){this.title="",this.style.top="0px",this.style.left="0px",this.ownerElement.before(this),this.hidden=!1;let e=this.getBoundingClientRect(),i=0,s=0;0===e.top&&0===e.left||(i=-e.top,s=-e.left);{let t=parseFloat(getComputedStyle(this.ownerElement).zIndex);this.style.zIndex=t-1}if(this.style.top=i+"px",this.style.left=s+"px",t){return this.animate({opacity:["0","1"]},{duration:100,easing:"ease-out"}).finished}}hide(t=!0){if(t){let t=this.animate({opacity:["1","0"]},{duration:100,easing:"ease-in"});return t.finished.then((()=>{this.remove()})),t.finished}this.remove()}}customElements.define("x-backdrop",ia);class sa extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([vertical]){flex-flow:column;align-items:flex-start;justify-content:center}:host([hidden]){display:none}`;get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[sa.#z],this.#$.append(document.importNode(sa.#E.content,!0))}}customElements.define("x-box",sa);class na extends HTMLElement{static observedAttributes=["disabled","skin"];static#E=Fs`<template><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></template>`;static#z=Gs`:host{display:flex;align-items:center;justify-content:center;width:fit-content;height:fit-content;min-height:32px;padding:2px 14px;box-sizing:border-box;opacity:1;position:relative}:host(:focus){outline:0}:host(:focus:not(:active)){z-index:1}:host([mixed]){opacity:.75}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#arrow{color:currentColor;width:8px;height:8px;min-width:8px;margin:0 0 0 4px;--path-data:M 11.7 19.9 L 49.8 57.9 L 87.9 19.9 L 99.7 31.6 L 49.8 81.4 L -0.0 31.6 Z}#arrow path{fill:currentColor}#arrow[hidden]{display:none}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):null}set skin(t){null===t?this.removeAttribute("skin"):this.setAttribute("skin",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get expanded(){return this.hasAttribute("expanded")}get expandable(){return this.#I()||this.#O()}get ownerButtons(){if(this.parentElement){if("x-buttons"===this.parentElement.localName)return this.parentElement;if(["a","x-box"].includes(this.parentElement.localName)&&this.parentElement.parentElement&&"x-buttons"===this.parentElement.parentElement.localName)return this.parentElement.parentElement}return null}#$=null;#H=!1;#j=!1;#N=null;#F=0;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[na.#z],this.#$.append(document.importNode(na.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_())),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t))),this.addEventListener("close",(t=>this.#U(t))),(async()=>{await customElements.whenDefined("x-backdrop"),this["#backdrop"]=Yn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)"})()}connectedCallback(){this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#T(),this.#Y(),this.#q(),this.#W(),Un.addEventListener("themechange",this.#L=()=>this.#T())}disconnectedCallback(){Un.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t?this.#q():"skin"===t&&this.#W()}expand(){return new Promise((async t=>{this.#I()?await this.#V():this.#O()&&await this.#K(),t()}))}collapse(t=null){return new Promise((async e=>{this.#J()?await this.#Q(t):this.#tt()&&await this.#et(t),e()}))}#V(){return new Promise((async t=>{if(this.#I()){let t=this.querySelector(":scope > x-menu"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#H=this.matches(":focus"),this.setAttribute("expanded",""),this["#backdrop"].ownerElement=t,this["#backdrop"].show(!1),await t.openNextToElement(this,"vertical",3),t.focus()}t()}))}#Q(t=null){return new Promise((async e=>{if(this.#J()){let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,e.close(),this["#backdrop"].hide(!1),this.removeAttribute("expanded"),"chromium"===Gn()&&this.replaceWith(this),this.#H)this.focus();else{let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#I(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");if(e&&!1===e.hasAttribute("opened")&&!1===e.hasAttribute("closing")){null!==e.querySelector("x-menuitem")&&(t=!0)}}return t}#J(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");e&&e.opened&&(t=!0)}return t}#K(){return new Promise((async t=>{if(this.#O()){let t=this.querySelector(":scope > x-popover"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#H=this.matches(":focus"),this.setAttribute("expanded",""),await t.open(this)}t()}))}#et(t=null){return new Promise((async e=>{if(this.#tt()){let e=this.querySelector(":scope > x-popover");if(e.setAttribute("closing",""),await t,await e.close(),this.removeAttribute("expanded"),e.modal&&"chromium"===Gn()&&this.replaceWith(this),this.#H)this.focus();else{let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#O(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&!1===e.hasAttribute("opened")&&(t=!0)}return t}#tt(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&e.opened&&(t=!0)}return t}#it(){return new Promise((t=>{if(this.#st()){this.querySelector(":scope > dialog").showModal()}t()}))}#st(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > dialog");e&&!1===e.hasAttribute("open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#nt(){return new Promise((t=>{if(this.#at()){this.querySelector(":scope > x-notification").opened=!0}t()}))}#at(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-notification");!e||e.hasAttribute("opened")||e.hasAttribute("closing")||(t=!0)}return t}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Y(){let t=this.querySelector(":scope > x-menu, :scope > x-popover");this["#arrow"].style.display=t?null:"none"}#q(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#W(){!1===this.hasAttribute("skin")&&this.setAttribute("skin","default")}#G(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-notification[opened]");if(this.#N=t,t.target===this["#backdrop"])this.#lt(t);else{if(e&&e.contains(t.target))return;if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;this.#rt(t)}}#U(t){t.target.parentElement===this&&["x-menu","x-popover"].includes(t.target.localName)&&this.#N&&!1===qn(this.#N,this)&&(this.#j=!1)}#X(){let t=this.querySelector(":scope > x-tooltip");if(t&&!1===t.disabled&&!1===this.expanded&&!1===this.#j){if(this.parentElement&&"x-buttons"===this.parentElement.localName)for(let t of this.parentElement.children)if(t!==this&&"x-button"===t.localName){let e=t.querySelector(":scope > x-tooltip");e&&e.close(!1)}t.open(this)}}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close(),this.#j=!1}#R(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-notification[opened]");if(t.target!==this["#backdrop"])if(e&&e.contains(t.target))!1===e.hasAttribute("closing")&&t.target.closest("x-menuitem")&&this.#ot(t);else{if(i&&i.contains(t.target))return;if(s&&s.contains(t.target))return;if(n&&n.contains(t.target))return;this.#j=!0,this.#ht(t)}}#lt(t){this.collapse()}async#rt(t){if(t.buttons>1)t.preventDefault();else if(this.querySelector(":scope > dialog[open]"))t.preventDefault();else if(!1!==this.contains(t.target)){if(this.setPointerCapture(t.pointerId),t.preventDefault(),!1===this.matches(":focus")){let t,e=Wn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}if(!1===this.#I()&&!1===this.#O()&&!1===this.#tt()){let t,e=Date.now(),i=!0,s=parseInt(getComputedStyle(this).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),i=!1;let n=Date.now()-e;n<s&&await Xn(s-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{if(this.ownerButtons)if(0===this.ownerButtons.tracking||2===this.ownerButtons.tracking)await Xn(10);else if(1!==this.ownerButtons.tracking||!1!==this.toggled&&!this.mixed){if(3===this.ownerButtons.tracking){let t=[...this.ownerButtons.querySelectorAll(":scope > x-button, :scope > x-box > x-button")].filter((t=>t.toggled));(!1===this.toggled||t.length>1)&&await Xn(10)}}else await Xn(10);else this.togglable&&await Xn(10);i&&this.setAttribute("pressed","")})()}this.#I()?"touch"!==t.pointerType&&this.#V():this.#O()?"touch"!==t.pointerType&&this.#K():this.#tt()&&this.#et()}}async#ht(t){let e=this.querySelector(":scope > x-menu, :scope > x-popover");if(e){if(e.hasAttribute("closing"))return;e.focus()}!1===this.#tt()&&(this.#st()?this.#it():this.#at()&&this.#nt()),this.#N&&"touch"===this.#N.pointerType&&(this.#I()?this.#V():this.#O()&&this.#K()),this.togglable&&!1===t.defaultPrevented&&(this.removeAttribute("pressed"),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle")))}#ot(t){let e=t.target.closest("x-menuitem");this.querySelector(":scope > x-menu").hasAttribute("closing")||this.collapse(e.whenTriggerEnd)}#Z(t){!1===t.defaultPrevented&&("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?this.#I()?(t.preventDefault(),this.#V().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#O()?(t.preventDefault(),this.#K()):this.#st()?(t.preventDefault(),this.#it()):this.#at()?(t.preventDefault(),this.#nt()):this.matches(":focus")&&(this.#tt()?this.#et():this.#J()?this.#Q():(t.preventDefault(),this.click())):"ArrowDown"===t.code?this.#I()?(this.querySelector(":scope > x-menu"),t.preventDefault(),this.#V().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#O()?(t.preventDefault(),this.#K()):(t.preventDefault(),this.click()):"ArrowUp"===t.code?this.#I()?(t.preventDefault(),this.#V().then((()=>this.querySelector(":scope > x-menu").focusLastMenuItem()))):this.#O()?(t.preventDefault(),this.#K()):(t.preventDefault(),this.click()):"Escape"===t.code&&(this.#J()||this.#tt())&&(t.preventDefault(),this.collapse()))}}customElements.define("x-button",na);let{isArray:aa}=Array;class la extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;box-sizing:border-box;width:fit-content}:host([hidden]){display:none}`;get tracking(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1}set tracking(t){this.setAttribute("tracking",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){!0===t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get value(){if(2===this.tracking||3===this.tracking){return this.#dt().filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!=t))}if(1===this.tracking||0===this.tracking){let t=this.#dt().find((t=>t.toggled));return t&&void 0!==t.value?t.value:null}if(-1===this.tracking)return null}set value(t){if(2===this.tracking||3===this.tracking){let e=this.#dt();if(aa(t))for(let i of e)i.toggled=t.includes(i.value);else for(let i of e)i.toggled=i.value===t}else if(1===this.tracking||0===this.tracking){let e=this.#dt(),i=e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[la.#z],this.#$.append(document.importNode(la.#E.content,!0)),this.addEventListener("click",(t=>this.#R(t)),!0),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){for(let t of this.children)if("x-button"===t.localName){"none"!==getComputedStyle(t).boxShadow?this.setAttribute("hasboxshadow",""):this.removeAttribute("hasboxshadow");break}}#dt(){return[...this.querySelectorAll(":scope > x-button, :scope > x-box > x-button")]}#R(t){if(t.buttons>1)return;let e=t.target.closest("x-button");if(e&&!1===e.disabled&&!1===e.expandable){let t=this.#dt().filter((t=>t!==e));if(0===this.tracking){e.mixed||(e.toggled=!e.toggled),e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}else if(1===this.tracking){if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}else if(2===this.tracking)e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}));else if(3===this.tracking){let i=t.filter((t=>!0===t.toggled));(!1===e.toggled||i.length>0)&&(e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e})))}}}#Z(t){if("ArrowRight"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-buttons",la);class ra extends HTMLElement{static#E=Fs`<template><slot id="slot"></slot></template>`;static#z=Gs`:host{display:block;width:100%;min-width:20px;min-height:48px;box-sizing:border-box;margin:30px 0}:host([hidden]){display:none}#slot{border-radius:inherit}`;#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ra.#z],this.#$.append(document.importNode(ra.#E.content,!0))}}customElements.define("x-card",ra);class oa extends HTMLElement{static observedAttributes=["toggled","mixed","disabled"];static#E=Fs`<template><main id="main"><div id="indicator" part="indicator"><svg id="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg></div><div id="description"><slot></slot></div></main></template>`;static#z=Gs`:host{display:block;width:fit-content}:host([disabled]){opacity:.4;pointer-events:none}:host([hidden]){display:none}:host(:focus){outline:0}#main{display:flex;align-items:center}#indicator{position:relative;width:19px;height:19px;box-sizing:border-box;border:2px solid currentColor;overflow:hidden;--path-data:M -4 -4 L 100 -4 L 100 100 L -4 100 L -4 -4 Z M 95 23 L 86 13 L 37 66 L 13.6 41 L 4.5 51 L 37 85 L 95 23 Z}:host([mixed]) #indicator{--path-data:M -4 -4 L 100 -4 L 100 100 L -4 100 L -4 -4 Z M 87 42.6 L 13 42.6 L 13 57.4 L 87 57.4 L 87 42.6 Z}#checkmark{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:visible;transition-property:opacity;transition-timing-function:inherit;transition-duration:inherit}:host([mixed]) #checkmark{opacity:1}:host([toggled]) #checkmark{opacity:1}#checkmark-path{fill:currentColor}#description{flex:1}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[oa.#z],this.#$.append(document.importNode(oa.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_())),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}async connectedCallback(){Un.addEventListener("themechange",this.#L=()=>this.#ct()),this.#q(),"webkit"===Gn()&&(await Xn(10),!1===this.isConnected)||this.#ct()}disconnectedCallback(){Un.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"toggled"===t?this.#ut():"mixed"===t?this.#pt():"disabled"===t&&this.#mt()}#ct(){let t=getComputedStyle(this["#indicator"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#q(){this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#ut(){this.#ct(),this.setAttribute("aria-toggled",this.mixed?"mixed":this.toggled)}#pt(){this.#ct()}#mt(){this.#q()}#G(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Wn(this.parentNode,"[tabindex]");e&&e.focus()}}#X(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}async#R(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}#Z(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-checkbox",oa);class ha extends HTMLElement{static observedAttributes=["value","space","disabled"];static#E=Fs`<template><main id="main"><slot></slot><input id="input" type="text" spellcheck="false" autocomplete="false" part="input"><div id="arrow-container"><svg id="arrow" width="10" height="10" viewBox="0 0 100 100" preserveAspectRatio="none" part="arrow"><path id="arrow-path"></path></svg></div><slot></slot></main></template>`;static#z=Gs`:host{display:block;position:relative;max-width:160px;height:32px;padding:0 2px 0 8px;box-sizing:border-box;background:#fff;font-size:14px}:host([size=small]){height:24px;padding:0 2px 0 6px;font-size:12.5px}:host([size=large]){height:38px}:host(:focus){z-index:10}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;padding:0;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:0 0}:host([error]) ::selection{color:#fff;background-color:#d50000}#arrow-container{display:flex;align-items:center;justify-content:center;height:100%;margin-left:4px;min-width:fit-content}#arrow{display:block;box-sizing:border-box;width:auto;min-width:fit-content;height:calc(100% - 4px);color:currentColor;cursor:default;--text-color:50%;--path-data:M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z}:host([size=small]) #arrow{padding:2px 2px}:host([size=large]) #arrow{padding:6px 2px}#arrow path{fill:currentColor}`;get value(){return this.#bt}set value(t){t=Os(bi(Mt(t),this.space),this.#gt),this.#bt===t||this.matches(":focus")||(this.#bt=t,this.isConnected&&(this.#ft(),this.#xt(),this.#wt&&this.reportValidity()))}get space(){return this.hasAttribute("space")?this.getAttribute("space"):"srgb"}set space(t){this.setAttribute("space",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#bt="#000000";#gt="srgb";#$=null;#F=0;#wt=null;#H=!1;#vt;#kt;#yt;#Ct;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,ha.#z],this.#$.append(document.importNode(ha.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#format-menu"]=Yn("x-menu"),this.append(this["#format-menu"]),this["#backdrop"]=Yn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#Et(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_())),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#$t(t))),this.addEventListener("keydown",(t=>this.#Z(t))),this["#input"].addEventListener("input",(t=>this.#St(t))),this["#input"].addEventListener("blur",(t=>this.#Mt(t))),this["#input"].addEventListener("search",(t=>this.#Lt(t))),this["#input"].addEventListener("pointerdown",(t=>this.#At(t))),this["#input"].addEventListener("contextmenu",(()=>this.#Rt())),this["#arrow"].addEventListener("pointerdown",(t=>this.#Pt(t))),this["#arrow"].addEventListener("click",(t=>this.#Tt(t))),this["#format-menu"].addEventListener("toggle",(t=>this.#Dt(t))),this["#format-menu"].addEventListener("click",(t=>this.#Bt(t)))}connectedCallback(){this.#gt=Un.getConfig(`x-colorinput:${this.space}Format`,this.#It(this.space)),this.#Ot(),this.#wt&&this.reportValidity(),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t)),Un.addEventListener("themechange",this.#kt=()=>this.#T())}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt),Un.removeEventListener("themechange",this.#kt)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#jt():"space"===t?this.#Nt():"disabled"===t&&this.#mt())}selectAll(){this["#input"].select()}clear(){this.value="",this.#wt=null,this.#Ft()}reportValidity(){let t=this["#input"].value;return this.required&&0===t.length?this.#wt={href:"#required-field"}:!1===js(t)&&!1===js("#"+t)?this.#wt={href:"#invalid-color"}:this.#wt=null,this.#Ft(),null===this.#wt}async#Gt(){if(!1===this.#Xt())return;let t=this["#format-menu"];this["#backdrop"].show(!1),window.addEventListener("resize",this.#yt=()=>this.#_t()),window.addEventListener("blur",this.#Ct=()=>this.#_t());{let e=Mt(this.value);["srgb","hwb","hsl"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="hex">\n            <x-label>${Os(e,"hex")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hex-alt">\n            <x-label>${Os(e,"hex").toUpperCase()}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="color">\n            <x-label>${Os(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Os(e,"color-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="rgb">\n            <x-label>${Os(e,"rgb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="rgb-alt">\n            <x-label>${Os(e,"rgb-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hsl">\n            <x-label>${Os(e,"hsl")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hsl-alt">\n            <x-label>${Os(e,"hsl-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hwb">\n            <x-label>${Os(e,"hwb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hwb-alt">\n            <x-label>${Os(e,"hwb-alt")}</x-label>\n          </x-menuitem>\n        `:["srgb-linear","p3","rec2020","prophoto","a98rgb","xyz","xyz-d65","xyz-d50"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="color">\n            <x-label>${Os(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Os(e,"color-alt")}</x-label>\n          </x-menuitem>\n        `:"oklch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklch">\n            <x-label>${Os(e,"oklch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklch-alt">\n            <x-label>${Os(e,"oklch-alt")}</x-label>\n          </x-menuitem>\n        `:"oklab"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklab">\n            <x-label>${Os(e,"oklab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklab-alt">\n            <x-label>${Os(e,"oklab-alt")}</x-label>\n          </x-menuitem>\n        `:"lch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="lch">\n            <x-label>${Os(e,"lch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lch-alt">\n            <x-label>${Os(e,"lch-alt")}</x-label>\n          </x-menuitem>\n        `:"lab"===e.spaceId&&(t.innerHTML=`\n          <x-menuitem value="lab">\n            <x-label>${Os(e,"lab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lab-alt">\n            <x-label>${Os(e,"lab-alt")}</x-label>\n          </x-menuitem>\n        `)}{let e=t.querySelector(`[value="${this.#gt}"]`);e&&(e.toggled=!0)}{let e=t.querySelector("x-menuitem[toggled]"),i=t.querySelector("x-menuitem").firstElementChild;e?t.openOverElement(this["#input"],e.querySelector("x-label")):t.openOverElement(this["#input"],i)}{let e=t.getBoundingClientRect(),i=this.getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#_t(t=null){if(!1===this.#Zt())return;let e=this["#format-menu"];if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#H)this.focus(),this.selectAll();else{let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#yt),window.removeEventListener("blur",this.#Ct),await e.close(),e.removeAttribute("closing")}#Xt(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")}}#Zt(){if(this.disabled)return!1;{let t=this["#format-menu"];return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Ut(t="increment",e=1){let{value:i}=this["#input"],s=this.#Yt();if(s){let[n,a]=s,l=i.substring(n,a),r="",o=1;l.endsWith("%")?r="%":l.endsWith("deg")&&(r="deg"),o="%"===r||"deg"===r?1:i.indexOf("/")>-1&&i.indexOf("/")<n||"color-alt"===this.#gt?.01:1,o*=e,"decrement"===t&&(o*=-1);let h=ki(parseFloat(l)+o,5)+r;this["#input"].value=i.substring(0,n)+h+i.substring(a),this["#input"].selectionStart=n,this["#input"].selectionEnd=n+h.length,this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}}#qt(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if("#"===e){n=i;break}return null}n=i}for(let n=e;n<t.length;n+=1){let e=t[n];if(!s.includes(e)){if(" "!==e||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#Yt(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9",".","+","-","%","d","e","g"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if(!1===[" ","(","/"].includes(e))return null;break}n=i}for(let n=e;n<=t.length;n+=1){let e=t[n];if(!s.includes(e)){if(!1===[" ",")","/"].includes(e)||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#Wt(){let t,e=this["#input"].value;try{t=Mt(e)}catch(i){t=Mt("#"+e)}return!1===this.alpha&&(t.alpha=1),e=Os(bi(t,this.space),this.#gt),e}#It(t){let e="color";return"srbg"===t?e="hex":"oklch"===t?e="oklch":"oklab"===t?e="oklab":"lch"===t?e="lch":"lab"===t&&(e="lab"),e}#Ht(t){let{key:e,value:i,origin:s}=t.detail;e===`x-colorinput:${this.space}Format`&&(this.#gt=i||this.#It(this.space),this.#bt=Os(bi(Mt(this["#input"].value),this.space),this.#gt),this.#ft())}#Nt(){this.#gt=Un.getConfig(`x-colorinput:${this.space}Format`,this.#It(this.space)),this.isConnected&&this.#ft()}#jt(){this.isConnected&&(this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll())}#mt(){this["#input"].disabled=this.disabled,this.#q()}#R(t){if(2===t.detail){let t=this.#Yt(),e=this.#qt();if(t){let[e,i]=t;this["#input"].setSelectionRange(e,i)}else if(e){let[t,i]=e;this["#input"].setSelectionRange(t,i)}}this.#Ft()}#Et(t){this.#_t()}#X(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#zt(){this.#Ft(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#$t(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this.reportValidity()}#Z(t){if("Enter"===t.code||"NumpadEnter"===t.code){if(t.preventDefault(),this.reportValidity(),null===this.#wt){let t=this.#Wt();t!==this.#bt&&(this.#bt=t,this.#ft(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#ft(),this.selectAll()}}else"ArrowUp"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Ut("increment",t.shiftKey?10:1)):"ArrowDown"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Ut("decrement",t.shiftKey?10:1)):"Backspace"===t.code&&t.stopPropagation()}#Mt(){if(this.reportValidity(),null===this.#wt){let t=this.#Wt();t!==this.#bt&&(this.#bt=t,this.#ft(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#ft()}}#St(t){this.#wt&&this.reportValidity(),t.stopPropagation(),this.#xt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#Lt(){this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#At(t){!1===this["#input"].matches(":focus")&&(t.preventDefault(),this["#input"].focus(),this.selectAll())}#Rt(){this["#input"].selectionStart===this["#input"].selectionEnd&&this.selectAll()}#Pt(t){this.#H=this.matches(":focus")}#Tt(t){this.#Gt()}#Bt(t){let e=t.target.closest("x-menuitem");if(e){if(!1===e.toggled){for(let t of this["#format-menu"].querySelectorAll("x-menuitem"))t.toggled=t===e;Un.setConfig(`x-colorinput:${this.space}Format`,e.value)}this.#_t(e.whenTriggerEnd)}}#Dt(t){t.preventDefault()}#Ot(){this.#ft(),this.#T(),this.#xt(),this.#q()}#ft(){let t=Mt(this.#bt);!1===this.alpha&&(t.alpha=1);let e=Os(bi(t,this.space),this.#gt);this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,e)):this["#input"].value=e}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Ft(){let t=this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Yn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;Xn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#q(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}}customElements.define("x-colorinput",ha);let{PI:da,sin:ca,cos:ua,pow:pa,atan2:ma,sqrt:ba,min:ga,max:fa}=Math,{isNaN:xa}=Number;const wa=150,va=.4;class ka extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled"];static#E=Fs`<template><header id="header"><x-select id="space-select" size="small"><x-menu id="space-select-menu"><x-menuitem value="srgb"><x-label>sRGB</x-label></x-menuitem><x-menuitem value="srgb-linear"><x-label><x-message href="#color-space.srgb-linear">Linear sRGB</x-message></x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem><hr><x-menuitem value="lch"><x-label>CIE LCH</x-label></x-menuitem><x-menuitem value="oklch"><x-label>OK LCH</x-label></x-menuitem><hr><x-menuitem value="lab"><x-label>CIE LAB</x-label></x-menuitem><x-menuitem value="oklab"><x-label>OK LAB</x-label></x-menuitem><hr><x-menuitem value="xyz-d65"><x-label>CIE XYZ D65</x-label></x-menuitem><x-menuitem value="xyz-d50"><x-label>CIE XYZ D50</x-label></x-menuitem></x-menu></x-select><x-buttons id="type-buttons" tracking="1"><x-button value="planar" skin="flat"><x-icon href="#square"></x-icon></x-button><x-button value="polar" skin="flat"><x-icon href="#circle"></x-icon></x-button><x-button value="linear" skin="flat"><x-icon href="#bars"></x-icon></x-button></x-buttons></header><main id="main"></main><footer id="footer"><x-colorinput id="input" space="srgb" size="small"></x-colorinput><x-button id="grab-button" size="small" condensed togglable><x-icon href="#eye-dropper"></x-icon></x-button></footer></template>`;static#z=Gs`:host{display:block;width:200px;box-sizing:border-box}:host([hidden]){display:none}#header{display:flex;align-items:center}#space-select{min-width:110px;font-size:13px}#space-select x-menuitem[data-warn] x-label::after{content:" ⚠"}#type-buttons{margin-left:auto}#type-buttons x-button{margin-left:4px;min-height:1px}#type-buttons x-button x-icon{width:18px;height:18px}#main{margin-top:10px}#sliders{width:100%}:host-context(x-popover) #sliders{height:250px}:host-context(x-popover):host([alpha]) #sliders{height:290px}#footer{display:flex;margin-top:10px}#input{max-width:none;min-height:1px;flex:1;font-size:13px}#input:focus{z-index:1}#grab-button{margin:0 0 0 5px;padding:0 6px}#grab-button x-icon{width:14px;height:14px}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto","lch","oklch","lab","oklab","xyz-d65","xyz-d50"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$;#vt;#Vt=!1;constructor(){super(),this.#$=this.attachShadow({mode:"open"}),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,ka.#z],this.#$.append(document.importNode(ka.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#space-select"].addEventListener("change",(()=>this.#Kt())),this["#space-select"].addEventListener("open",(()=>this.#Jt())),this["#type-buttons"].addEventListener("toggle",(t=>this.#Qt())),this["#main"].addEventListener("pointerdown",(t=>this.#te(t)),!0),this["#main"].addEventListener("changestart",(t=>this.#ee(t))),this["#main"].addEventListener("change",(t=>this.#ie(t))),this["#main"].addEventListener("changeend",(t=>this.#se(t))),this["#input"].addEventListener("change",(t=>this.#ne(t))),this["#input"].addEventListener("keydown",(t=>this.#ae(t))),this["#grab-button"].addEventListener("toggle",(()=>this.#le()))}connectedCallback(){Un.addEventListener("configchange",this.#vt=t=>{this.#Ht(t)}),this["#type-buttons"].value=Un.getConfig(`${this.localName}:type`,"planar"),this.#Ot()}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#jt():"alpha"===t?this.#re():"spaces"===t?this.#oe():"disabled"===t&&this.#mt())}grab(){return new Promise((async t=>{if(void 0===window.EyeDropper)window.alert("Your web browser does not support Eye Dropper API"),t(null);else{let e,i=new EyeDropper,s=new AbortController;try{e=await i.open({signal:s.signal})}catch(t){e=null}t(e?.sRGBHex||null)}}))}#jt(){this.isConnected&&(this.#Vt?this.#he():this.#Ot())}#re(){for(let t of this["#main"].children)this.alpha?t.setAttribute("alpha",""):t.removeAttribute("alpha");this.alpha?this["#input"].setAttribute("alpha",""):this["#input"].removeAttribute("alpha")}#oe(){this.isConnected&&this.#Ot()}#mt(){this.isConnected&&this.#Ot()}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s&&e===`${this.localName}:type`){let t=i||"planar";null===this.offsetParent&&this["#type-buttons"].value!==t&&(this["#type-buttons"].value=t,this.#Ot())}}#Kt(){let t=Mt(this.value);if(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value)this.value=gi(bi(t,"srgb",{inGamut:!0}),{format:"hex"});else{let e=bi(t,this["#space-select"].value,{inGamut:!0});for(let t=0;t<e.coords.length;t+=1)(null===e.coords[t]||xa(e.coords[t]))&&(e.coords[t]=0);this.value=gi(e,{precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Qt(t){Un.setConfig(`${this.localName}:type`,this["#type-buttons"].value),this.#Ot()}#te(t){this["#input"].matches(":focus")&&t.stopImmediatePropagation()}#ee(t){this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#ie(t){let e=t.target;if("srgb"===e.space){let[e,i,s,n]=t.target.value;this.value=gi({space:"srgb",coords:[e,i,s],alpha:n},{format:"hex"})}else if(["srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(e.space)){let[i,s,n,a]=t.target.value;this.value=gi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lch"===e.space||"oklch"===e.space){let[i,s,n,a]=t.target.value;this.value=gi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lab"===e.space||"oklab"===e.space){let[i,s,n,a]=t.target.value;this.value=gi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("xyz-d65"===e.space||"xyz-d50"===e.space){let[i,s,n,a]=t.target.value;this.value=gi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#se(t){this.#Vt=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#ne(t){this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=Mt(this["#input"].value);"srgb"===this["#space-select"].value?this.value=gi(bi(e,"srgb",{inGamut:!0}),{format:"hex"}):this.value=gi(bi(e,this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#ae(t){"Enter"!==t.key&&"Space"!==t.code||this.closest("x-popover")&&t.stopPropagation()}#le(){return new Promise((async t=>{let e=await this.grab();this["#grab-button"].toggled=!1,null!==e&&(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value?this.value=e:this.value=gi(bi(Mt(e),this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}))}#Ot(){let t=this.#de();this.#ce(t),this.#ue(t),this.#pe(t),this.#ft(t),this.#me()}#ce(t=this.#de()){let e=this.spaces;if(this["#space-select"].value=t.spaceId,1===e.length)this["#space-select"].hidden=!0;else{this["#space-select"].hidden=!1,this["#space-select"].disabled=this.disabled;for(let t of this["#space-select-menu"].children)"x-menuitem"===t.localName&&(t.disabled=!e.includes(t.value))}}#Jt(){let t=this.#de();for(let e of this["#space-select-menu"].children)if("x-menuitem"===e.localName){ie(t,e.value)?e.removeAttribute("data-warn"):e.setAttribute("data-warn","")}}#ue(t=this.#de()){let e;["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(t.spaceId)?e=["planar","polar","linear"]:["lch","oklch","lab","oklab","xyz-d65","xyz-d50"].includes(t.spaceId)&&(e=["planar","linear"]),!1===e.includes(this["#type-buttons"].value)&&(this["#type-buttons"].value=e[0]);for(let t of this["#type-buttons"].children)t.disabled=this.disabled,t.hidden=!1===e.includes(t.value)||e.length<=1}#pe(t=this.#de()){let e,i=this["#type-buttons"].value,s=t.spaceId,n=[...t.coords,t.alpha];["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(s)?"linear"===i?e="x-rgblinearsliders":"planar"===i?e="x-rgbplanarsliders":"polar"===i&&(e="x-rgbpolarsliders"):"lch"===s||"oklch"===s?"linear"===i?e="x-lchlinearsliders":"planar"===i&&(e="x-lchplanarsliders"):"lab"===s||"oklab"===s?"linear"===i?e="x-lablinearsliders":"planar"===i&&(e="x-labplanarsliders"):"xyz-d65"!==s&&"xyz-d50"!==s||("linear"===i?e="x-xyzlinearsliders":"planar"===i&&(e="x-xyzplanarsliders")),this["#main"].firstElementChild?.localName!==e&&(this["#main"].innerHTML="",this["#sliders"]=Yn(e),this["#sliders"].setAttribute("id","sliders"),this["#sliders"].setAttribute("exportparts","slider"),this["#main"].append(this["#sliders"])),this["#sliders"].space=s,this["#sliders"].value=n,this["#sliders"].alpha=this.alpha,this["#sliders"].disabled=this.disabled}#ft(t=this.#de()){this["#input"].space=t.spaceId,this["#input"].alpha=this.alpha,this["#input"].value=gi(t),this["#input"].disabled=this.disabled}#he=Zn(this.#ft,50,this);#me(){this["#grab-button"].disabled=this.disabled}#de(){let t=Mt(this.value);!1===this.spaces.includes(t.spaceId)&&(t="hsl"===t.spaceId||"hwb"===t.spaceId?bi(t,"srgb",{inGamut:!0}):bi(t,"p3",{inGamut:!0}));for(let e=0;e<t.coords.length;e+=1)(null===t.coords[e]||xa(t.coords[e]))&&(t.coords[e]=0);return void 0===t.spaceId&&(t.spaceId=t.space.id),t.coords=t.coords.map((t=>1*t)),t}}void 0===customElements.get("x-colorpicker")&&customElements.define("x-colorpicker",ka);class ya extends HTMLElement{static#E=Fs`<template><div id="coord-0-slider" class="slider" part="slider"><div id="coord-0-slider-track" class="slider-track"><svg id="coord-0-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-0-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-0-slider-marker" class="slider-marker"><span id="coord-0-slider-label" class="slider-label"></span></div></div></div><div id="coord-1-slider" class="slider" part="slider"><div id="coord-1-slider-track" class="slider-track"><svg id="coord-1-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-1-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-1-slider-marker" class="slider-marker"><span id="coord-1-slider-label" class="slider-label"></span></div></div></div><div id="coord-2-slider" class="slider" part="slider"><div id="coord-2-slider-track" class="slider-track"><svg id="coord-2-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-2-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-2-slider-marker" class="slider-marker"><span id="coord-2-slider-label" class="slider-label"></span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem><x-menuitem value="hwb"><x-label>HWB</x-label></x-menuitem><hr><x-menuitem value="okhsv" data-srgb-only><x-label>OK HSV</x-label></x-menuitem><x-menuitem value="okhsl" data-srgb-only><x-label>OK HSL</x-label></x-menuitem><x-menuitem value="hsluv" data-srgb-only><x-label>HSLuv</x-label></x-menuitem><hr><x-menuitem value="rgb"><x-label>RGB</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let t=this.#be();if("rgb"===t){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}if("hsv"===t){let[e,i,s]=this.#ge,[n,a,l]=bi({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,l,this.#fe]}if("okhsv"===t){let[e,i,s]=this.#ge,[n,a,l]=bi({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,l,this.#fe]}if("hsl"===t||"hsluv"===t){let[e,i,s]=this.#ge,[n,a,l]=bi({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,l,this.#fe]}if("okhsl"===t){let[e,i,s]=this.#ge,[n,a,l]=bi({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,l,this.#fe]}if("hwb"===t){let[t,e,i]=this.#ge,[s,n,a]=bi({space:"hwb",coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#fe]}}set value([t,e,i,s]){let n=this.#be();if("rgb"===n)this.#ge=[t,e,i],this.#fe=s;else if("hsv"===n){let[a,l,r]=bi({space:"srgb",coords:[t,e,i]},n).coords;this.#ge=[a/360,l/100,r/100],this.#fe=s}else if("okhsv"===n){let[a,l,r]=bi({space:"srgb",coords:[t,e,i]},n).coords;this.#ge=[a/360,l,r],this.#fe=s}else if("hsl"===n||"hsluv"===n){let[a,l,r]=bi({space:"srgb",coords:[t,e,i]},n).coords;this.#ge=[a/360,l/100,r/100],this.#fe=s}else if("okhsl"===n){let[a,l,r]=bi({space:"srgb",coords:[t,e,i]},n).coords;this.#ge=[a/360,l,r],this.#fe=s}else if("hwb"===n){let[n,a,l]=bi({space:"srgb",coords:[t,e,i]},"hwb").coords;this.#ge=[n/360,a/100,l/100],this.#fe=s}for(let t=0;t<this.#ge.length;t+=1)(null===this.#ge[t]||xa(this.#ge[t]))&&(this.#ge[t]=0);this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#Vt=!1;#xe="srgb";#we="hsv";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ya.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,ya.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#coord-0-slider"].addEventListener("pointerdown",(t=>this.#ye(t))),this["#coord-1-slider"].addEventListener("pointerdown",(t=>this.#Ce(t))),this["#coord-2-slider"].addEventListener("pointerdown",(t=>this.#Ee(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Un.getConfig(`${this.localName}:model`,"hsv"),this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt)}#be(){return this.#we,"okhsv"===this.#we?"srgb"===this.#xe?"okhsv":"hsv":"okhsl"===this.#we?"srgb"===this.#xe?"okhsl":"hsl":"hsluv"===this.#we?"srgb"===this.#xe?"hsluv":"hsl":this.#we}#Me(){return"none"===this.#ve||"srgb"===this.#ve&&["srgb","srgb-linear"].includes(this.#xe)||"p3"===this.#ve&&["srgb","srgb-linear","p3"].includes(this.#xe)||"a98rgb"===this.#ve&&["srgb","srgb-linear","a98rgb"].includes(this.#xe)||"rec2020"===this.#ve&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#xe)||"prophoto"===this.#ve?"none":this.#ve}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#we){let[e,i,s]=this.value;this.#we=t,this.value=[e,i,s,this.#fe]}}else if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#color-model-menu"]){let t=e.value,[i,s,n]=this.value;this.#we=t,Un.setConfig(`${this.localName}:model`,t),this.value=[i,s,n,this.#fe]}else e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot())}#Se(){this.#Ae()}#ye(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#coord-0-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#coord-0-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[0]&&(this.#ge[0]=e,this.#Re(),this.#Pe(),this.#Te(),this.#De(),this.#Be(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#coord-0-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#coord-0-slider"].addEventListener("pointerup",i=()=>{this["#coord-0-slider"].removeEventListener("pointermove",e),this["#coord-0-slider"].removeEventListener("pointerup",i),this["#coord-0-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#coord-0-slider"].addEventListener("pointercancel",i)}#Ce(t){if(t.button>0||this.#Vt)return;let e,i,s=this.#be(),n=this["#coord-1-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#coord-1-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=Ci(e,0,1),e!==this.#ge[1]&&(this.#ge[1]=e,"rgb"===s&&this.#He(),this.#je(),this.#Ne(),this.#Pe(),this.#De(),this.#Be(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-1-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-1-slider"].addEventListener("pointerup",i=()=>{this["#coord-1-slider"].removeEventListener("pointermove",e),this["#coord-1-slider"].removeEventListener("pointerup",i),this["#coord-1-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#coord-1-slider"].addEventListener("pointercancel",i)}#Ee(t){if(t.button>0||this.#Vt)return;let e,i,s=this.#be(),n=this["#coord-2-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#coord-2-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=Ci(e,0,1),e!==this.#ge[2]&&(this.#ge[2]=e,"rgb"===s&&(this.#He(),this.#Pe()),this.#je(),this.#Te(),this.#Fe(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-2-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-2-slider"].addEventListener("pointerup",i=()=>{this["#coord-2-slider"].removeEventListener("pointermove",e),this["#coord-2-slider"].removeEventListener("pointerup",i),this["#coord-2-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#coord-2-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Re(),this.#He(),this.#je(),this.#Ne(),this.#Pe(),this.#Te(),this.#Fe(),this.#De(),this.#Be(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Re(){this["#coord-0-slider-marker"].style.left=100*this.#ge[0]+"%"}#He(){let t=this.#be();if("rgb"===t){let[,t,e]=this.#ge,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s=[{space:this.#xe,coords:[0,t,e]},{space:this.#xe,coords:[1,t,e]}];s=s.map((t=>gi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let t="srgb-linear"===this.#xe?"srgb-linear":"srgb",e=[{space:this.#xe,coords:[1,0,0]},{space:this.#xe,coords:[1,1,0]},{space:this.#xe,coords:[0,1,0]},{space:this.#xe,coords:[0,1,1]},{space:this.#xe,coords:[0,0,1]},{space:this.#xe,coords:[1,0,1]},{space:this.#xe,coords:[1,0,0]}];e=e.map((t=>gi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}else if("hsluv"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}}#je(){let t=this.#Me();if("none"===t)this["#coord-0-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#be(),s=this["#coord-0-slider"].clientWidth,n=1/window.devicePixelRatio,[,a,l]=this.#ge,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#xe,coords:bi({space:i,coords:[360*h,100*a,100*l]},"srgb").coords}:"rgb"===i&&(n={space:this.#xe,coords:[h,a,l]}),ie(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-0-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-0-slider-gamut-path"].removeAttribute("d")}}#Ne(){this["#coord-1-slider-marker"].style.left=100*this.#ge[1]+"%"}#Pe(){let t=this.#be();if("rgb"===t){let[t,,e]=this.#ge,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s=[{space:this.#xe,coords:[t,0,e]},{space:this.#xe,coords:[t,1,e]}];s=s.map((t=>gi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e,[i]=this.#ge,s="srgb-linear"===this.#xe?"srgb":this.space,n="srgb-linear"===this.#xe?"srgb-linear":"srgb";"hsv"===t?e=[{space:this.#xe,coords:bi({space:"hsv",coords:[360*i,0,100]},s).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[360*i,100,100]},s).coords}]:"hsl"===t?e=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*i,0,50]},s).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*i,100,50]},s).coords}]:"hwb"===t&&(e=[{space:this.#xe,coords:bi({space:"hwb",coords:[360*i,0,0]},s).coords},{space:this.#xe,coords:bi({space:"hwb",coords:[360*i,100,0]},s).coords}]),e=e.map((t=>gi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${n} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let[e]=this.#ge,i=[];for(let s=0;s<=1;s+=.01)i.push({space:t,coords:[360*e,s,"okhsv"===t?1:.65]});i=i.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}else if("hsluv"===t){let[e]=this.#ge,i=[];for(let s=0;s<=100;s+=1)i.push({space:t,coords:[360*e,s,65]});i=i.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}}#Te(){let t=this.#Me();if("none"===t)this["#coord-1-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#be(),s=this["#coord-1-slider"].clientWidth,n=1/window.devicePixelRatio,[a,,l]=this.#ge,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#xe,coords:bi({space:i,coords:[360*a,100*h,100*l]},"srgb").coords}:"rgb"===i&&(n={space:this.#xe,coords:[a,h,l]}),ie(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-1-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-1-slider-gamut-path"].removeAttribute("d")}}#Fe(){this["#coord-2-slider-marker"].style.left=100*this.#ge[2]+"%"}#De(){let t=this.#be();if("rgb"===t){let[t,e]=this.#ge,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s=[{space:this.#xe,coords:[t,e,0]},{space:this.#xe,coords:[t,e,1]}];s=s.map((t=>gi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e="srgb-linear"===this.#xe?"srgb":this.#xe,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s=[];if("hsv"===t){let[t,i]=this.#ge;s=[{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,100*i,0]},e).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,100*i,100]},e).coords}]}else if("hsl"===t){let[t,i]=this.#ge;s=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*i,0]},e).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*i,50]},e).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*i,100]},e).coords}]}else if("hwb"===t){let[t,i]=this.#ge;for(let n=0;n<=100;n+=10)s.push({space:this.#xe,coords:bi({space:"hwb",coords:[360*t,100*i,n]},e).coords})}s=s.map((t=>gi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i]=this.#ge,s=[];for(let n=0;n<=1;n+=.01)s.push({space:t,coords:[360*e,i,n]});s=s.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}else if("hsluv"===t){let[e,i]=this.#ge,s=[];for(let n=0;n<=100;n+=1)s.push({space:t,coords:[360*e,100*i,n]});s=s.map((t=>gi(bi(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}}#Be(){let t=this.#Me();if("none"===t)this["#coord-2-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#be(),s=this["#coord-2-slider"].clientWidth,n=1/window.devicePixelRatio,[a,l]=this.#ge,r=null;for(let o=0;o<=s;o+=n){let n,h=o/s;"hsv"===i||"hsl"===i||"hwb"===i?n={space:this.#xe,coords:bi({space:i,coords:[360*a,100*l,100*h]},"srgb").coords}:"rgb"===i&&(n={space:this.#xe,coords:[a,l,h]}),ie(n,t)?(null===r&&(r=[],e.push(r)),r.push(100*h)):r=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-2-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-2-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let t=this.#be();if("rgb"===t){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i,s]=this.#ge,n="srgb-linear"===this.#xe?"srgb":this.#xe,a=[];for(let l of[0,1])a.push({space:this.#xe,coords:bi({space:t,coords:[360*e,i,s]},n).coords,alpha:l});a=a.map((t=>gi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}else{let[e,i,s]=this.#ge,n="srgb-linear"===this.#xe?"srgb":this.#xe,a=[];for(let l of[0,1])a.push({space:this.#xe,coords:bi({space:t,coords:[360*e,100*i,100*s]},n).coords,alpha:l});a=a.map((t=>gi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}}#Oe(){let t=this.#Me();if("none"===t)this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn");else{let e,i=this.#be();if("hsv"===i||"hsl"===i||"hwb"===i){let[t,s,n]=this.#ge;e={space:this.#xe,coords:bi({space:i,coords:[360*t,100*s,100*n]},"srgb").coords}}else"rgb"===i&&(this.#ge,e={space:this.#xe,coords:[...this.#ge]});ie(e,t)?(this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn")):(this["#coord-0-slider-marker"].setAttribute("data-warn",""),this["#coord-1-slider-marker"].setAttribute("data-warn",""),this["#coord-2-slider-marker"].setAttribute("data-warn",""))}}#Le(){if(this.#ke){let t=this.#be();"hsv"===t||"okhsv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="V"):"hsl"===t||"okhsl"===t||"hsluv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="L"):"hwb"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="W",this["#coord-2-slider-label"].textContent="B"):"rgb"===t&&(this["#coord-0-slider-label"].textContent="R",this["#coord-1-slider-label"].textContent="G",this["#coord-2-slider-label"].textContent="B"),this["#alpha-slider-label"].textContent="α"}else this["#coord-0-slider-label"].textContent="",this["#coord-1-slider-label"].textContent="",this["#coord-2-slider-label"].textContent="",this["#alpha-slider-label"].textContent=""}#Ae(){let t=this.#be();for(let e of this["#color-model-menu"].querySelectorAll("x-menuitem"))e.toggled=e.value===t,e.hidden=e.hasAttribute("data-srgb-only")&&"srgb"!==this.#xe;for(let t of this["#color-model-menu"].querySelectorAll("hr"))t.hidden="srgb"!==this.#xe&&"rgb"!==t.nextElementSibling?.value;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-rgblinearsliders")&&customElements.define("x-rgblinearsliders",ya);class Ca extends HTMLElement{static#E=Fs`<template><div id="hue-slider" class="slider" part="slider"><div id="hue-slider-track" class="slider-track"><svg id="hue-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="hue-slider-marker" class="slider-marker"><span id="hue-slider-label" class="slider-label">H</span></div></div></div><div id="chroma-slider" class="slider" part="slider"><div id="chroma-slider-track" class="slider-track"><svg id="chroma-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="chroma-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="chroma-slider-marker" class="slider-marker"><span id="chroma-slider-label" class="slider-label">C</span></div></div></div><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#Vt=!1;#xe="lch";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ca.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Ca.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Xe(t))),this["#chroma-slider"].addEventListener("pointerdown",(t=>this.#_e(t))),this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ze(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#Xe(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),360*e!==this.#ge[2]&&(this.#ge[2]=360*e,this.#Ue(),this.#Ye(),this.#qe(),this.#We(),this.#Ve(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#_e(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#chroma-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#chroma-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#xe?e=Ci(e*va,0,va):"lch"===this.#xe&&(e=Ci(e*wa,0,wa)),e!==this.#ge[1]&&(this.#ge[1]=e,this.#Ke(),this.#Je(),this.#We(),this.#Ve(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#chroma-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#chroma-slider"].addEventListener("pointerup",i=()=>{this["#chroma-slider"].removeEventListener("pointermove",e),this["#chroma-slider"].removeEventListener("pointerup",i),this["#chroma-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#chroma-slider"].addEventListener("pointercancel",i)}#Ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#xe?e=Ci(e,0,1):"lch"===this.#xe&&(e=Ci(100*e,0,100)),e!==this.#ge[0]&&(this.#ge[0]=e,this.#Ke(),this.#qe(),this.#Qe(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Ue(),this.#ti(),this.#Ke(),this.#Je(),this.#Ye(),this.#qe(),this.#Qe(),this.#We(),this.#Ve(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Ue(){let[t,e,i]=this.#ge;this["#hue-slider-marker"].style.left=i/360*100+"%"}#ti(){let t=[];if("oklch"===this.#xe)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,va,e]});else if("lch"===this.#xe)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,wa,e]});t=t.map((t=>gi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${t.join(",")})`}#Ke(){if("none"===this.#ve)this["#hue-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#hue-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e;ie({space:this.#xe,coords:[s,n,360*i]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Je(){let[t,e,i]=this.#ge;"oklch"===this.#xe?this["#chroma-slider-marker"].style.left=e>va?"calc(100% + 18px)":e/va*100+"%":"lch"===this.#xe&&(this["#chroma-slider-marker"].style.left=e>wa?"calc(100% + 18px)":e/wa*100+"%")}#Ye(){let[,,t]=this.#ge,e=[];if("oklch"===this.#xe)for(let i=0;i<=va;i+=.03)e.push({space:"oklch",coords:[.75,i,t]});else if("lch"===this.#xe)for(let i=0;i<=wa;i+=10)e.push({space:"lch",coords:[75,i,t]});e=e.map((t=>gi(t))),this["#chroma-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${e.join(",")})`}#qe(){if("none"===this.#ve)this["#chroma-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#chroma-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e,r="lch"===this.#xe?wa:va;ie({space:this.#xe,coords:[s,i*r,n]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#chroma-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#chroma-slider-gamut-path"].removeAttribute("d")}}#Qe(){let[t,e,i]=this.#ge;"oklch"===this.#xe?this["#lightness-slider-marker"].style.left=100*t+"%":"lch"===this.#xe&&(this["#lightness-slider-marker"].style.left=t+"%")}#We(){let[,t,e]=this.#ge,i=[];if("oklch"===this.#xe)for(let s=0;s<=1;s+=.02)i.push({space:"oklch",coords:[s,t,e]});else if("lch"===this.#xe)for(let s=0;s<=100;s+=2)i.push({space:"lch",coords:[s,t,e]});i=i.map((t=>gi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#Ve(){if("none"===this.#ve)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e;ie({space:this.#xe,coords:["oklch"===this.#xe?i:100*i,s,n]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:this.#ge},this.#ve)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#chroma-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#hue-slider-label"].hidden=!this.#ke,this["#chroma-slider-label"].hidden=!this.#ke,this["#lightness-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-lchlinearsliders")&&customElements.define("x-lchlinearsliders",Ca);class Ea extends HTMLElement{static#E=Fs`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="a-slider" class="slider" part="slider"><div id="a-slider-track" class="slider-track"><svg id="a-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="a-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="a-slider-marker" class="slider-marker"><span id="a-slider-label" class="slider-label">A</span></div></div></div><div id="b-slider" class="slider" part="slider"><div id="b-slider-track" class="slider-track"><svg id="b-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="b-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="b-slider-marker" class="slider-marker"><span id="b-slider-label" class="slider-label">B</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#Vt=!1;#xe="lab";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ea.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Ea.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ze(t))),this["#a-slider"].addEventListener("pointerdown",(t=>this.#ei(t))),this["#b-slider"].addEventListener("pointerdown",(t=>this.#ii(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#Ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#xe?e=Ci(e,0,1):"lab"===this.#xe&&(e=Ci(100*e,0,100)),e!==this.#ge[0]&&(this.#ge[0]=e,this.#si(),this.#ni(),this.#ai(),this.#li(),this.#Qe(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#ei(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#a-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#a-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),"oklab"===this.#xe?e=.8*e-.4:"lab"===this.#xe&&(e=250*e-125),e!==this.#ge[1]&&(this.#ge[1]=e,this.#We(),this.#Ve(),this.#ri(),this.#ai(),this.#li(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#a-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#a-slider"].addEventListener("pointerup",i=()=>{this["#a-slider"].removeEventListener("pointermove",e),this["#a-slider"].removeEventListener("pointerup",i),this["#a-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#a-slider"].addEventListener("pointercancel",i)}#ii(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#b-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#b-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),"oklab"===this.#xe?e=.8*e-.4:"lab"===this.#xe&&(e=250*e-125),e!==this.#ge[2]&&(this.#ge[2]=e,this.#We(),this.#Ve(),this.#si(),this.#ni(),this.#oi(),this.#ai(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#b-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#b-slider"].addEventListener("pointerup",i=()=>{this["#b-slider"].removeEventListener("pointermove",e),this["#b-slider"].removeEventListener("pointerup",i),this["#b-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#b-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Qe(),this.#We(),this.#Ve(),this.#ri(),this.#si(),this.#ni(),this.#oi(),this.#ai(),this.#li(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Qe(){let[t,e,i]=this.#ge;"oklab"===this.#xe?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#xe&&(this["#lightness-slider-marker"].style.left=t+"%")}#We(){let t=[],[e,i,s]=this.#ge;if("oklab"===this.#xe)for(let e=0;e<=1;e+=.02)t.push({space:"oklab",coords:[e,i,s]});else if("lab"===this.#xe)for(let e=0;e<=100;e+=2)t.push({space:"lab",coords:[e,i,s]});t=t.map((t=>gi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${t.join(",")})`}#Ve(){if("none"===this.#ve)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#xe?i={space:this.#xe,coords:[100*r,s,n]}:"oklab"===this.#xe&&(i={space:this.#xe,coords:[r,s,n]}),ie(i,this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#ri(){let[t,e,i]=this.#ge;"oklab"===this.#xe?this["#a-slider-marker"].style.left=e<-.4?"calc(0% - 18px)":e>.4?"calc(100% + 18px)":(e+.4)/.8*100+"%":"lab"===this.#xe&&(this["#a-slider-marker"].style.left=e<-125?"calc(0% - 18px)":e>125?"calc(100% + 18px)":(e+125)/250*100+"%")}#si(){let[t,,e]=this.#ge,i=[];if("oklab"===this.#xe)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,s,e]});else if("lab"===this.#xe)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,s,e]});i=i.map((t=>gi(t))),this["#a-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#ni(){if("none"===this.#ve)this["#a-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#a-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#xe?i={space:this.#xe,coords:[s,250*r-125,n]}:"oklab"===this.#xe&&(i={space:this.#xe,coords:[s,.8*r-.4,n]}),ie(i,this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#a-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#a-slider-gamut-path"].removeAttribute("d")}}#oi(){let[t,e,i]=this.#ge;"oklab"===this.#xe?this["#b-slider-marker"].style.left=i<-.4?"calc(0% - 18px)":i>.4?"calc(100% + 18px)":(i+.4)/.8*100+"%":"lab"===this.#xe&&(this["#b-slider-marker"].style.left=i<-125?"calc(0% - 18px)":i>125?"calc(100% + 18px)":(i+125)/250*100+"%")}#ai(){let[t,e]=this.#ge,i=[];if("oklab"===this.#xe)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,e,s]});else if("lab"===this.#xe)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,e,s]});i=i.map((t=>gi(t))),this["#b-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#li(){if("none"===this.#ve)this["#b-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#b-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#xe?i={space:this.#xe,coords:[s,n,250*r-125]}:"oklab"===this.#xe&&(i={space:this.#xe,coords:[s,n,.8*r-.4]}),ie(i,this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#b-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#b-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:this.#ge},this.#ve)?(this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#a-slider-marker"].setAttribute("data-warn",""),this["#b-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#a-slider-label"].hidden=!this.#ke,this["#b-slider-label"].hidden=!this.#ke,this["#lightness-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-lablinearsliders")&&customElements.define("x-lablinearsliders",Ea);class za extends HTMLElement{static#E=Fs`<template><div id="x-slider" class="slider" part="slider"><div id="x-slider-track" class="slider-track"><svg id="x-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="x-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="x-slider-marker" class="slider-marker"><span id="x-slider-label" class="slider-label">X</span></div></div></div><div id="y-slider" class="slider" part="slider"><div id="y-slider-track" class="slider-track"><svg id="y-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="y-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="y-slider-marker" class="slider-marker"><span id="y-slider-label" class="slider-label">Y</span></div></div></div><div id="z-slider" class="slider" part="slider"><div id="z-slider-track" class="slider-track"><svg id="z-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="z-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="z-slider-marker" class="slider-marker"><span id="z-slider-label" class="slider-label">Z</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}.slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#Vt=!1;#xe="xyz-d65";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(za.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,za.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#x-slider"].addEventListener("pointerdown",(t=>this.#hi(t))),this["#y-slider"].addEventListener("pointerdown",(t=>this.#di(t))),this["#z-slider"].addEventListener("pointerdown",(t=>this.#ci(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#hi(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#x-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#x-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[0]&&(this.#ge[0]=e,this.#ui(),this.#pi(),this.#mi(),this.#bi(),this.#gi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#x-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#x-slider"].addEventListener("pointerup",i=()=>{this["#x-slider"].removeEventListener("pointermove",e),this["#x-slider"].removeEventListener("pointerup",i),this["#x-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#x-slider"].addEventListener("pointercancel",i)}#di(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#y-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#y-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[1]&&(this.#ge[1]=e,this.#fi(),this.#xi(),this.#wi(),this.#pi(),this.#bi(),this.#gi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#y-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#y-slider"].addEventListener("pointerup",i=()=>{this["#y-slider"].removeEventListener("pointermove",e),this["#y-slider"].removeEventListener("pointerup",i),this["#y-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#y-slider"].addEventListener("pointercancel",i)}#ci(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#z-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#z-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[2]&&(this.#ge[2]=e,this.#fi(),this.#xi(),this.#pi(),this.#mi(),this.#vi(),this.#bi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#z-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#z-slider"].addEventListener("pointerup",i=()=>{this["#z-slider"].removeEventListener("pointermove",e),this["#z-slider"].removeEventListener("pointerup",i),this["#z-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#z-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#ui(),this.#fi(),this.#xi(),this.#wi(),this.#pi(),this.#mi(),this.#vi(),this.#bi(),this.#gi(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#ui(){let[t]=this.#ge;this["#x-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#fi(){let[,t,e]=this.#ge,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#xe,coords:[s,t,e]});i=i.map((t=>gi(t))),this["#x-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#xi(){if("none"===this.#ve)this["#x-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#x-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e;ie({space:this.#xe,coords:[i,s,n]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#x-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#x-slider-gamut-path"].removeAttribute("d")}}#wi(){let[,t]=this.#ge;this["#y-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#pi(){let[t,,e]=this.#ge,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#xe,coords:[t,s,e]});i=i.map((t=>gi(t))),this["#y-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#mi(){if("none"===this.#ve)this["#y-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#y-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e;ie({space:this.#xe,coords:[s,i,n]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#y-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#y-slider-gamut-path"].removeAttribute("d")}}#vi(){let[,,t]=this.#ge;this["#z-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#bi(){let[t,e]=this.#ge,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#xe,coords:[t,e,s]});i=i.map((t=>gi(t))),this["#z-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#gi(){if("none"===this.#ve)this["#z-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#z-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i=l/e;ie({space:this.#xe,coords:[s,n,i]},this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#z-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#z-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:this.#ge},this.#ve)?(this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn")):(this["#x-slider-marker"].setAttribute("data-warn",""),this["#y-slider-marker"].setAttribute("data-warn",""),this["#z-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#x-slider-label"].hidden=!this.#ke,this["#y-slider-label"].hidden=!this.#ke,this["#z-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-xyzlinearsliders")&&customElements.define("x-xyzlinearsliders",za);class $a extends HTMLElement{static#E=Fs`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#hue-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-gamut-svg{width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){if("hsv"===this.#we||"hsl"===this.#we){let[t,e,i]=this.#ge,[s,n,a]=bi({space:this.#we,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#fe]}}set value([t,e,i,s]){if("hsv"===this.#we||"hsl"===this.#we){let[n,a,l]=bi({space:"srgb",coords:[t,e,i]},this.#we).coords;this.#ge=[n/360,a/100,l/100],this.#fe=s}for(let t=0;t<this.#ge.length;t+=1)(null===this.#ge[t]||xa(this.#ge[t]))&&(this.#ge[t]=0);this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#S=new ResizeObserver((()=>this.#ki()));#Vt=!1;#xe="srgb";#we="hsv";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode($a.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,$a.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Xe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#yi(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Un.getConfig(`${this.localName}:model`,"hsv"),this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),this.#S.observe(this),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#S.unobserve(this),Un.removeEventListener("configchange",this.#vt)}#Me(){return"none"===this.#ve||"srgb"===this.#ve&&["srgb","srgb-linear"].includes(this.#xe)||"p3"===this.#ve&&["srgb","srgb-linear","p3"].includes(this.#xe)||"a98rgb"===this.#ve&&["srgb","srgb-linear","a98rgb"].includes(this.#xe)||"rec2020"===this.#ve&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#xe)||"prophoto"===this.#ve?"none":this.#ve}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#we){let[e,i,s]=this.value;this.#we=t,this.value=[e,i,s,this.#fe]}}else if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#we){let[t,i,s]=this.value;this.#we=e.value,this.value=[t,i,s,this.#fe],Un.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot())}#Se(){this.#Ae()}#ki(){this.#Ci()}#Xe(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[0]&&(this.#ge[0]=e,this.#Ue(),this.#Ke(),this.#Ei(),this.#zi(),this.#Ci(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#yi(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;if(i=Ci(i,0,1),n=Ci(n,0,1),"hsv"===this.#we){let[t,e,s]=this.#ge;e=i,s=1-n,this.#ge=[t,e,s]}else if("hsl"===this.#we){let[t,e,s]=this.#ge;e=i,s=1-n,this.#ge=[t,e,s]}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ke(),this.#Ei(),this.#Ie(),this.#Oe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Ue(),this.#ti(),this.#Ke(),this.#Ei(),this.#zi(),this.#$i(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Ue(){if("hsv"===this.#we||"hsl"===this.#we){let[t]=this.#ge;this["#hue-slider-marker"].style.left=100*t+"%"}}#ti(){if("hsv"===this.#we||"hsl"===this.#we){let t="srgb-linear"===this.#xe?"srgb-linear":"srgb",e=[{space:this.#xe,coords:[1,0,0]},{space:this.#xe,coords:[1,1,0]},{space:this.#xe,coords:[0,1,0]},{space:this.#xe,coords:[0,1,1]},{space:this.#xe,coords:[0,0,1]},{space:this.#xe,coords:[1,0,1]},{space:this.#xe,coords:[1,0,0]}];e=e.map((t=>gi(t))).join(","),this["#hue-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}}#Ke(){let t=this.#Me();if("none"===t)this["#hue-slider-gamut-path"].removeAttribute("d");else if("hsv"===this.#we||"hsl"===this.#we){let[e,i,s]=this.#ge,n=this["#hue-slider"].clientWidth,a=1/window.devicePixelRatio,l=[];{let e=null;for(let r=0;r<=n;r+=a){let a=r/n;ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*a,100*i,100*s]},"srgb").coords},t)?(null===e&&(e=[],l.push(e)),e.push(100*a)):e=null}l=l.map((t=>[t.at(0),t.at(-1)]))}if(l.length>0){let t=l.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ei(){if("hsv"===this.#we||"hsl"===this.#we){let[t,e,i]=this.#ge,s=100*e,n=100-100*i;this["#planar-slider-marker"].style.left=`${s}%`,this["#planar-slider-marker"].style.top=`${n}%`}}#zi(){let[t]=this.#ge,e="srgb-linear"===this.#xe?"srgb-linear":"srgb",i="srgb-linear"===this.#xe?"srgb":this.#xe;if("hsv"===this.#we){let s=[{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,100,100]},i).coords}],n=[{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,0,0]},i).coords}];this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${n.map((t=>gi(t))).join(",")}),\n        linear-gradient(in ${e} to right,  ${s.map((t=>gi(t))).join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="multiply, normal"}else if("hsl"===this.#we){let s=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,50]},i).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100,50]},i).coords}],n=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,0]},i).coords}],a=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0}];s=s.map((t=>gi(t))),n=n.map((t=>gi(t))),a=a.map((t=>gi(t))),this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${a.join(",")}),\n        linear-gradient(in ${e} to bottom, ${n.join(",")}),\n        linear-gradient(in ${e} to right, ${s.join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="normal, multiply, normal"}}#$i(){let t=this.#Me();if("none"===t)this["#planar-slider-gamut-path"].removeAttribute("d");else{let e=this["#planar-slider"].clientWidth,i=this["#planar-slider"].clientHeight,s=1/window.devicePixelRatio,[n]=this.#ge,a=[],l=(e,i,s)=>ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*e,100*i,100*s]},"srgb").coords},t);if("hsv"===this.#we){let t=0;for(let r=0;r<i;r+=s)for(;t<=e;){if(!1===l(n,t/e,1-r/i)){a.push([t,r]);break}t+=s}a.length>0&&a.at(-1)[0]<e&&a.push([e,a.at(-1)[1]])}else if("hsl"===this.#we)for(let t=0;t<i;t+=s){let r=e;for(;r>=0&&!l(n,r/e,1-t/i);)r-=10;let o=ga(r+10,e);for(;r<=o&&(r+=s,!1!==l(n,r/e,1-t/i)););a.push([r,t])}if(0===a.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=a.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",t),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#Ci=Zn(this.#$i,40,this);#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){if("hsv"===this.#we||"hsl"===this.#we){let[t,e,i]=this.#ge,s="srgb-linear"===this.#xe?"srgb":this.#xe,n=[{space:this.#xe,coords:bi({space:this.#we,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#xe,coords:bi({space:this.#we,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>gi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Oe(){let t=this.#Me();if("none"===t)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else if("hsv"===this.#we||"hsl"===this.#we){let[e,i,s]=this.#ge;ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#hue-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-rgbplanarsliders")&&customElements.define("x-rgbplanarsliders",$a);class Sa extends HTMLElement{static#E=Fs`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#hue-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#S=new ResizeObserver((()=>this.#ki()));#Vt=!1;#xe="lch";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Sa.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Sa.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Xe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#yi(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),this.#S.observe(this),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#S.unobserve(this),Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#ki(){this.#Ci()}#Xe(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),360*e!==this.#ge[2]&&(this.#ge[2]=360*e,this.#Ue(),this.#Ke(),this.#Ei(),this.#zi(),this.#Ci(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#yi(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Ci(i,0,1),n=Ci(n,0,1);let[a,l,r]=this.#ge;"lch"===this.#xe?(a=100*i,l=(1-n)*wa):"oklch"===this.#xe&&(a=i,l=(1-n)*va),this.#ge=[a,l,r],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ke(),this.#Ei(),this.#Ie(),this.#Oe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Ue(),this.#ti(),this.#Ke(),this.#Ei(),this.#zi(),this.#$i(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Ue(){let[t,e,i]=this.#ge;this["#hue-slider-marker"].style.left=i/360*100+"%"}#ti(){let t=[];if("oklch"===this.#xe)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,va,e]});else if("lch"===this.#xe)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,wa,e]});t=t.map((t=>gi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${t.join(",")})`}#Ke(){if("none"===this.#ve)this["#hue-slider-gamut-path"].removeAttribute("d");else{let[t,e]=this.#ge,i=this["#hue-slider"].clientWidth,s=1/window.devicePixelRatio,n=[];{let a=null;for(let l=0;l<=i;l+=s){let s,r=l/i;"lch"===this.#xe?s={space:"lch",coords:[t,e,360*r]}:"oklch"===this.#xe&&(s={space:"oklch",coords:[t,e,360*r]}),ie(s,this.#ve)?(null===a&&(a=[],n.push(a)),a.push(100*r)):a=null}n=n.map((t=>[t.at(0),t.at(-1)]))}if(n.length>0){let t=n.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Ei(){if("lch"===this.#xe){let[t,e]=this.#ge,i=t,s=100-e/wa*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}else if("oklch"===this.#xe){let[t,e]=this.#ge,i=100*t,s=100-e/va*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}}#zi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[,,n]=this.#ge;e.clearRect(0,0,t.width,t.height);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let l,r=t/i,o=1-e/s;"lch"===this.#xe?l={space:"lch",coords:[100*r,o*wa,n]}:"oklch"===this.#xe&&(l={space:"oklch",coords:[r,o*va,n]}),a.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];l.addColorStop(t/a.length,gi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}#$i(){if("none"===this.#ve)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this.clientWidth,e=this.clientHeight,i=1/window.devicePixelRatio,[,,s]=this.#ge,n=[],a=(t,e,i)=>{let s;return"lch"===this.#xe?s={space:"lch",coords:[100*t,e*wa,i]}:"oklch"===this.#xe&&(s={space:"oklch",coords:[t,e*va,i]}),ie(s,this.#ve)};for(let l=0;l<=t;l+=i){let r=e;for(;r>=0&&a(l/t,1-r/e,s);)r-=10;let o=fa(r+10,e);for(;r<=o&&(r+=i,!a(l/t,1-r/e,s)););n.push([l,r])}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ci=Zn(this.#$i,40,this);#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:[...this.#ge]},this.#ve)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#hue-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-lchplanarsliders")&&customElements.define("x-lchplanarsliders",Sa);class Ma extends HTMLElement{static#E=Fs`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#lightness-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#lightness-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#lightness-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#lightness-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#lightness-slider-gamut-svg{width:100%;height:100%}#lightness-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#lightness-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#S=new ResizeObserver((()=>this.#ki()));#Vt=!1;#xe="lab";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Ma.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Ma.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#Ze(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#yi(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),this.#S.observe(this),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#S.unobserve(this),Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#ki(){this.#Ci()}#Ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#xe?e=Ci(e,0,1):"lab"===this.#xe&&(e=Ci(100*e,0,100)),e!==this.#ge[0]&&(this.#ge[0]=e,this.#Qe(),this.#Ci(),this.#zi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#yi(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Ci(i,0,1),n=Ci(n,0,1);let[a,l,r]=this.#ge;"lab"===this.#xe?(l=250*i-125,r=250*(1-n)-125):"oklab"===this.#xe&&(l=.8*i-.4,r=.8*(1-n)-.4),this.#ge=[a,l,r],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ei(),this.#We(),this.#Ve(),this.#Ie(),this.#Oe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Ei(),this.#zi(),this.#$i(),this.#Qe(),this.#We(),this.#Ve(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Ei(){let t,e,[i,s,n]=this.#ge;"lab"===this.#xe?(t=s<-125?"calc(0% - 18px)":s>125?"calc(100% + 18px)":(s+125)/250*100+"%",e=n<-125?"calc(0% - 18px)":n>125?"calc(100% + 18px)":100-(n+125)/250*100+"%"):"oklab"===this.#xe&&(t=s<-.4?"calc(0% - 18px)":s>.4?"calc(100% + 18px)":(s+.4)/.8*100+"%",e=n<-.4?"calc(0% - 18px)":n>.4?"calc(100% + 18px)":100-(n+.4)/.8*100+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#zi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n]=this.#ge;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let l,r=t/i,o=1-e/s;"lab"===this.#xe?l={space:"lab",coords:[n,250*r-125,250*o-125]}:"oklab"===this.#xe&&(l={space:"oklab",coords:[n,.8*r-.4,.8*o-.4]}),a.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];l.addColorStop(t/a.length,gi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}#$i(){if("none"===this.#ve)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=ba(pa(t/2,2)+pa(e/2,2)),s={x:t/2,y:e/2},[n,a,l]=this.#ge,r=[];for(let a=0;a<360;a+=3){let l;for(let r=i;r>=0;r-=15){let i,o,h=Mi({x:t/2,y:e/2-r},s,a);if("lab"===this.#xe?(i=h.x/t*250-125,o=-(h.y/e*250-125)):"oklab"===this.#xe&&(i=h.x/t*.8-.4,o=-(h.y/e*.8-.4)),ie({space:this.#xe,coords:[n,i,o]},this.#ve)){l=r;break}}for(let o=l;o<=i;o+=1){let i,l,h=Mi({x:t/2,y:e/2-o},s,a);if("lab"===this.#xe?(i=h.x/t*250-125,l=-(h.y/e*250-125)):"oklab"===this.#xe&&(i=h.x/t*.8-.4,l=-(h.y/e*.8-.4)),!1===ie({space:this.#xe,coords:[n,i,l]},this.#ve)){r.push(h);break}}}if(0===r.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=r.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ci=Zn(this.#$i,40,this);#Qe(){let[t,e,i]=this.#ge;"oklab"===this.#xe?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#xe&&(this["#lightness-slider-marker"].style.left=t+"%")}#We(){let[,t,e]=this.#ge,i=[];if("oklab"===this.#xe)for(let s=0;s<=1;s+=.02)i.push({space:"oklab",coords:[s,t,e]});else if("lab"===this.#xe)for(let s=0;s<=100;s+=2)i.push({space:"lab",coords:[s,t,e]});i=i.map((t=>gi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${i.join(",")})`}#Ve(){if("none"===this.#ve)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ge,a=null;for(let l=0;l<=e;l+=i){let i,r=l/e;"lab"===this.#xe?i={space:this.#xe,coords:[100*r,s,n]}:"oklab"===this.#xe&&(i={space:this.#xe,coords:[r,s,n]}),ie(i,this.#ve)?(null===a&&(a=[],t.push(a)),a.push(100*r)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:[...this.#ge]},this.#ve)?(this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#planar-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#lightness-slider-label"].hidden=!this.#ke,this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-labplanarsliders")&&customElements.define("x-labplanarsliders",Ma);class La extends HTMLElement{static#E=Fs`<template><div id="linear-slider" class="slider" part="slider"><div id="linear-slider-track" class="slider-track"><svg id="linear-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="linear-slider-marker" class="slider-marker"><span id="linear-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="x-zy"><x-label>X-ZY</x-label></x-menuitem><x-menuitem value="y-xz"><x-label>Y-XZ</x-label></x-menuitem><x-menuitem value="z-xy"><x-label>Z-XY</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){let[t,e,i]=this.#ge;return[t,e,i,this.#fe]}set value([t,e,i,s]){this.#ge=[t,e,i],this.#fe=s,this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#S=new ResizeObserver((()=>this.#ki()));#Vt=!1;#xe="xyz-d65";#we="x-zy";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(La.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,La.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#planar-slider"].addEventListener("pointerdown",(t=>this.#yi(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Si(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Un.getConfig(`${this.localName}:model`,"x-zy"),this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),this.#S.observe(this),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#S.unobserve(this),Un.removeEventListener("configchange",this.#vt)}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"x-zy";t!==this.#we&&(this.#we=t,this.#Ot())}else if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#color-model-menu"]?e.value!==this.#we&&(this.#we=e.value,this.#Ot(),Un.setConfig(`${this.localName}:model`,e.value)):e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css"))):"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot()))}#Se(){this.#Ae()}#ki(){this.#Ci()}#Si(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e,i=(t-s.x)/s.width;i=Ci(i,0,1),"x-zy"===this.#we?e=0:"y-xz"===this.#we?e=1:"z-xy"===this.#we&&(e=2),i!==this.#ge[e]&&(this.#ge[e]=i,this.#zi(),this.#Ci(),this.#Mi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#yi(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Ci(i,0,1),n=Ci(n,0,1);let[a,l,r]=this.#ge;"x-zy"===this.#we?this.#ge=[a,n,i]:"y-xz"===this.#we?this.#ge=[i,l,n]:"z-xy"===this.#we&&(this.#ge=[i,n,r]),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ei(),this.#Li(),this.#Ai(),this.#Ie(),this.#Oe()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Mi(),this.#Li(),this.#Ai(),this.#Ei(),this.#zi(),this.#$i(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Mi(){let[t,e,i]=this.#ge;"x-zy"===this.#we?this["#linear-slider-marker"].style.left=100*t+"%":"y-xz"===this.#we?this["#linear-slider-marker"].style.left=100*e+"%":"z-xy"===this.#we&&(this["#linear-slider-marker"].style.left=100*i+"%")}#Li(){let[t,e,i]=this.#ge,s=[];if("x-zy"===this.#we)for(let t=0;t<=1;t+=.02)s.push({space:this.#xe,coords:[t,e,i]});else if("y-xz"===this.#we)for(let e=0;e<=1;e+=.02)s.push({space:this.#xe,coords:[t,e,i]});else if("z-xy"===this.#we)for(let i=0;i<=1;i+=.02)s.push({space:this.#xe,coords:[t,e,i]});s=s.map((t=>gi(t))),this["#linear-slider"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Ai(){if("none"===this.#ve)this["#linear-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#linear-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n,a]=this.#ge,l=null;for(let r=0;r<=e;r+=i){let i,o=r/e;"x-zy"===this.#we?i={space:this.#xe,coords:[o,n,a]}:"y-xz"===this.#we?i={space:this.#xe,coords:[s,o,a]}:"z-xy"===this.#we&&(i={space:this.#xe,coords:[s,n,o]}),ie(i,this.#ve)?(null===l&&(l=[],t.push(l)),l.push(100*o)):l=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Ei(){let t,e,[i,s,n]=this.#ge;"x-zy"===this.#we?(t=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"):"y-xz"===this.#we?(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%"):"z-xy"===this.#we&&(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#zi(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n,a,l]=this.#ge;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let r=[];for(let e=0;e<=s;e+=10){let o;if("x-zy"===this.#we){let a=t/i,l=e/s;o={space:this.#xe,coords:[n,l,a]}}else if("y-xz"===this.#we){let n=t/i,l=e/s;o={space:this.#xe,coords:[n,a,l]}}else if("z-xy"===this.#we){let n=t/i,a=e/s;o={space:this.#xe,coords:[n,a,l]}}r.push(o)}let o=e.createLinearGradient(t,0,i,s);for(let t=0;t<r.length;t+=1){let e=r[t];o.addColorStop(t/r.length,gi(e))}e.fillStyle=o,e.fillRect(t,0,1,s)}}#$i(){if("none"===this.#ve)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=ba(pa(t/2,2)+pa(e/2,2)),s={x:t/2,y:e/2},n=[];for(let a=0;a<360;a+=3){let l,[r,o,h]=this.#ge;for(let n=i;n>=0;n-=15){let i=Mi({x:t/2,y:e/2-n},s,a);if("x-zy"===this.#we?(h=i.x/t,o=i.y/e):"y-xz"===this.#we?(r=i.x/t,h=i.y/e):"z-xy"===this.#we&&(r=i.x/t,o=i.y/e),ie({space:this.#xe,coords:[r,o,h]},this.#ve)){l=n;break}}for(let r=l;r<=i;r+=1){let i=Mi({x:t/2,y:e/2-r},s,a),[l,o,h]=this.#ge;if("x-zy"===this.#we?(h=i.x/t,o=i.y/e):"y-xz"===this.#we?(l=i.x/t,h=i.y/e):"z-xy"===this.#we&&(l=i.x/t,o=i.y/e),!1===ie({space:this.#xe,coords:[l,o,h]},this.#ve)){n.push(i);break}}}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Ci=Zn(this.#$i,40,this);#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){let[t,e,i]=this.#ge,s=[{space:this.#xe,coords:[t,e,i],alpha:0},{space:this.#xe,coords:[t,e,i],alpha:1}];s=s.map((t=>gi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#xe} to right, ${s.join(",")})`}#Oe(){if("none"===this.#ve)this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{ie({space:this.#xe,coords:[...this.#ge]},this.#ve)?(this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#linear-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#Le(){this["#linear-slider-label"].hidden=!this.#ke,this["#linear-slider-label"].textContent=this.#we[0].toUpperCase(),this["#alpha-slider-label"].hidden=!this.#ke}#Ae(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-xyzplanarsliders")&&customElements.define("x-xyzplanarsliders",La);class Aa extends HTMLElement{static#E=Fs`<template><div id="polar-slider" part="slider"><div id="polar-slider-circle"><canvas id="polar-slider-canvas" width="100" height="100"></canvas><svg id="polar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="polar-slider-gamut-path"></path></svg><div id="polar-slider-marker"></div></div></div><div id="linear-slider" part="slider"><div id="linear-slider-track"><div id="linear-slider-marker"><span id="linear-slider-label"></span></div><svg id="linear-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path"></path></svg></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">H</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"><x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem><hr><x-menuitem value="srgb" toggled><x-label>sRGB</x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#z=Gs`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width:18px}:host([disabled]){pointer-events:none;opacity:.5}#polar-slider{display:flex;align-items:center;width:100%;max-width:200px;height:200px;margin:0 auto}#polar-slider-circle{touch-action:pinch-zoom;position:relative;width:100%;height:fit-content;aspect-ratio:1/1;border-radius:999px!important}#polar-slider-marker{position:absolute;top:0;left:0;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size)/ -2),calc(var(--marker-size)/ -2));background:rgba(0,0,0,.3);border:3px solid #fff;border-radius:999px;box-shadow:0 0 3px #000;--marker-size:20px}#polar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255,255,255,.9);font-size:18px;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#polar-slider-canvas{position:absolute;width:100%;height:100%;border-radius:9999px}#polar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(-90deg)}#polar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255,255,255,.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:18px}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:.8}#linear-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width)/ 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width)/ 2) * -1));background:rgba(0,0,0,.2);border:3px solid #fff;box-shadow:0 0 3px #000}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255,255,255,.9);font-size:10px}`;get value(){if("hsv"===this.#we||"hsl"===this.#we){let[t,e,i]=this.#ge,[s,n,a]=bi({space:this.#we,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#fe]}}set value([t,e,i,s]){if("hsv"===this.#we||"hsl"===this.#we){let[n,a,l]=bi({space:"srgb",coords:[t,e,i]},this.#we).coords;this.#ge=[n/360,a/100,l/100],this.#fe=s}for(let t=0;t<this.#ge.length;t+=1)(null===this.#ge[t]||xa(this.#ge[t]))&&(this.#ge[t]=0);this.#Ot()}get space(){return this.#xe}set space(t){this.#xe!==t&&(this.#xe=t,this.#Ot())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#vt;#S=new ResizeObserver((()=>this.#ki()));#Vt=!1;#xe="srgb";#we="hsv";#ve="srgb";#ke=!0;#ge=[0,0,0];#fe=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(Aa.#E.content,!0)),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Aa.#z];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#polar-slider"].addEventListener("pointerdown",(t=>this.#Ri(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#Si(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ze(t))),this["#context-menu"].addEventListener("click",(t=>this.#$e(t))),this["#context-menu"].addEventListener("open",(t=>this.#Se(t)))}connectedCallback(){this.#we=Un.getConfig(`${this.localName}:model`,"hsv"),this.#ve=Hs(Un.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#ke=Un.getConfig("x-colorpicker:labels",!0),this.#S.observe(this),Un.addEventListener("configchange",this.#vt=t=>this.#Ht(t))}disconnectedCallback(){this.#S.unobserve(this),Un.removeEventListener("configchange",this.#vt)}#Me(){return"none"===this.#ve||"srgb"===this.#ve&&["srgb","srgb-linear"].includes(this.#xe)||"p3"===this.#ve&&["srgb","srgb-linear","p3"].includes(this.#xe)||"a98rgb"===this.#ve&&["srgb","srgb-linear","a98rgb"].includes(this.#xe)||"rec2020"===this.#ve&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#xe)||"prophoto"===this.#ve?"none":this.#ve}#Ht(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#we){let[e,i,s]=this.value;this.#we=t,this.value=[e,i,s,this.#fe]}}else if("x-colorpicker:gamutHints"===e){let t=Hs(i||"srgb","color.js");t!==this.#ve&&(this.#ve=t,this.#Ot())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#ke&&(this.#ke=t,this.#Le())}}#$e(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#ve&&(this.#ve=e.value,this.#Ot(),Un.setConfig("x-colorpicker:gamutHints",Hs(this.#ve,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#we){let[t,i,s]=this.value;this.#we=e.value,this.value=[t,i,s,this.#fe],Un.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#ke=!e.toggled,Un.setConfig("x-colorpicker:labels",this.#ke),this.#Ot())}#Se(){this.#Ae()}#ki(){this.#Pi()}#Ri(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#polar-slider"].getBoundingClientRect();this.#Vt=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#polar-slider"].style.cursor="default",this["#polar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=s.width/2,n=t-s.left-i,a=e-s.top-i,l=pa(n,2)+pa(a,2),r=ma(a,n);l>pa(i,2)&&(n=i*ua(r),a=i*ca(r),l=pa(n,2)+pa(a,2),r=ma(a,n)),this.#ge[0]=(r+da)/(2*da),"hsv"!==this.#we&&"hsl"!==this.#we||(this.#ge[1]=ba(l)/i),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ti(),this.#Li(),this.#Ai(),this.#Ie(),this.#Oe()};n(t.clientX,t.clientY),this["#polar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#polar-slider"].addEventListener("pointerup",i=()=>{this["#polar-slider"].removeEventListener("pointermove",e),this["#polar-slider"].removeEventListener("pointerup",i),this["#polar-slider"].removeEventListener("pointercancel",i),this["#polar-slider"].style.cursor=null,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#polar-slider"].addEventListener("pointercancel",i)}#Si(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#ge[2]&&(this.#ge[2]=e,this.#Mi(),this.#Pi(),this.#Ie(),this.#Oe(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#ze(t){if(t.button>0||this.#Vt)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#Vt=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Ci(e,0,1),e!==this.#fe&&(this.#fe=e,this.#Ge(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#Vt=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Ot(){this.#Ti(),this.#Di(),this.#Bi(),this.#Mi(),this.#Li(),this.#Ai(),this.#Ge(),this.#Ie(),this.#Oe(),this.#Le()}#Ti(){let[t,e,i]=this.#ge;if("hsv"===this.#we||"hsl"===this.#we){let i=100,s=vi*(360*t)/180,n=e*i/2,a={x:i/2,y:i/2},l=(i-(a.x+n*ua(s)))/i*100,r=(a.y-n*ca(s))/i*100;this["#polar-slider-marker"].style.left=l+"%",this["#polar-slider-marker"].style.top=r+"%"}}#Di(){let t="srgb-linear"===this.#xe?"srgb-linear":"srgb",e="srgb-linear"===this.#xe?"srgb":this.#xe;if("hsv"===this.#we){let i=[{space:this.#xe,coords:bi({space:"hsv",coords:[0,0,100]},e).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[0,0,0]},e).coords}],s=[{space:this.#xe,coords:[1,0,0]},{space:this.#xe,coords:[1,1,0]},{space:this.#xe,coords:[0,1,0]},{space:this.#xe,coords:[0,1,1]},{space:this.#xe,coords:[0,0,1]},{space:this.#xe,coords:[1,0,1]},{space:this.#xe,coords:[1,0,0]}];i=i.map((t=>gi(t))).join(","),s=s.map((t=>gi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i} 100%),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="screen, normal"}else if("hsl"===this.#we){let i=[{space:this.#xe,coords:bi({space:"hsl",coords:[0,0,50]},e).coords,alpha:1},{space:this.#xe,coords:bi({space:"hsl",coords:[0,0,50]},e).coords,alpha:0}],s=[{space:this.#xe,coords:[1,0,0]},{space:this.#xe,coords:[1,1,0]},{space:this.#xe,coords:[0,1,0]},{space:this.#xe,coords:[0,1,1]},{space:this.#xe,coords:[0,0,1]},{space:this.#xe,coords:[1,0,1]},{space:this.#xe,coords:[1,0,0]}];i=i.map((t=>gi(t))).join(","),s=s.map((t=>gi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i}),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="normal, normal"}}#Bi(){let t=this.#Me();if("none"===t)this["#polar-slider-gamut-path"].removeAttribute("d");else{let e=this["#polar-slider-gamut-svg"].clientWidth,i=this["#polar-slider-gamut-svg"].clientHeight,s=1/window.devicePixelRatio,[n,a,l]=this.#ge,r=(e,i,s)=>ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*e,100*i,100*s]},"srgb").coords},t),o=[];if("hsv"===this.#we||"hsl"===this.#we)for(let t=0;t<=1;t+=.01)for(let n=i/2;n>=0;n-=s){if(r(t,n/(i/2),l)){let s=Mi({x:e/2,y:i/2-n},{x:e/2,y:i/2},360*t);o.push(s);break}}if(0===o.length)this["#polar-slider-gamut-path"].removeAttribute("d");else{let t=o.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#polar-slider-gamut-path"].setAttribute("d",t),this["#polar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#Pi=Zn(this.#Bi,40,this);#Mi(){let[,t,e]=this.#ge;"hsv"!==this.#we&&"hsl"!==this.#we||(this["#linear-slider-marker"].style.left=100*e+"%")}#Li(){if("hsv"===this.#we){let[t,e]=this.#ge,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s="srgb-linear"===this.#xe?"srgb":this.#xe,n=[{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,100*e,0]},s).coords},{space:this.#xe,coords:bi({space:"hsv",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>gi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}else if("hsl"===this.#we){let[t,e]=this.#ge,i="srgb-linear"===this.#xe?"srgb-linear":"srgb",s="srgb-linear"===this.#xe?"srgb":this.#xe,n=[{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*e,0]},s).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*e,50]},s).coords},{space:this.#xe,coords:bi({space:"hsl",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>gi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}}#Ai(){let t=this.#Me();if("none"===t)this["#linear-slider-gamut-path"].removeAttribute("d");else{let[e,i,s]=this.#ge,n=this["#linear-slider"].clientWidth,a=1/window.devicePixelRatio,l=[];{let s=null;for(let r=0;r<=n;r+=a)if("hsv"===this.#we||"hsl"===this.#we){let a=r/n;ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*e,100*i,100*a]},"srgb").coords},t)?(null===s&&(s=[],l.push(s)),s.push(100*a)):s=null}l=l.map((t=>[t.at(0),t.at(-1)]))}if(l.length>0){let t=l.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Ge(){this["#alpha-slider-marker"].style.left=100*this.#fe+"%"}#Ie(){if("hsv"===this.#we||"hsl"===this.#we){let[t,e,i]=this.#ge,s="srgb-linear"===this.#xe?"srgb":this.#xe,n=[{space:this.#xe,coords:bi({space:this.#we,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#xe,coords:bi({space:this.#we,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>gi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}#Oe(){let t=this.#Me();if("none"===t)this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn");else{let[e,i,s]=this.#ge;ie({space:this.#xe,coords:bi({space:this.#we,coords:[360*e,100*i,100*s]},"srgb").coords},t)?(this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn")):(this["#polar-slider-marker"].setAttribute("data-warn",""),this["#linear-slider-marker"].setAttribute("data-warn",""))}}#Le(){this.#ke?("hsv"===this.#we?this["#linear-slider-label"].textContent="V":"hsl"===this.#we&&(this["#linear-slider-label"].textContent="L"),this["#alpha-slider-label"].textContent="A"):(this["#linear-slider-label"].textContent="",this["#alpha-slider-label"].textContent="")}#Ae(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#we;for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#ve;this["#labels-menu-item"].toggled=this.#ke}}void 0===customElements.get("x-rgbpolarsliders")&&customElements.define("x-rgbpolarsliders",Aa);class Ra extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled","size"];static#E=Fs`<template><div id="preview"></div><x-popover id="popover" part="popover" modal><main><x-colorpicker id="color-picker"></x-colorpicker></main></x-popover></template>`;static#z=Gs`:host{display:block;width:32px;height:32px;box-sizing:border-box;position:relative;overflow:hidden;background:var(--checkboard-background)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:.4}#preview{width:100%;height:100%}#popover{--align:left}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","p3"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#H=!1;#Ii=!1;#F=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,Ra.#z],this.#$.append(document.importNode(Ra.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("keydown",(t=>this.#Z(t))),this["#preview"].addEventListener("click",(t=>this.#R(t))),this["#popover"].addEventListener("close",(()=>this.#Oi())),this["#color-picker"].addEventListener("changestart",(()=>this.#Hi())),this["#color-picker"].addEventListener("change",(t=>this.#ji(t))),this["#color-picker"].addEventListener("changeend",(()=>this.#Ni()))}connectedCallback(){this["#color-picker"].setAttribute("value",this.value),this.#q(),this.#Fi()}attributeChangedCallback(t){"value"===t?this.#jt():"alpha"===t?this.#re():"spaces"===t?this.#oe():"disabled"===t?this.#mt():"size"===t&&this.#Gi()}async#Gt(){!1===this.hasAttribute("expanded")&&(this.#H=this.matches(":focus"),this.setAttribute("expanded",""),await this["#popover"].open(this),this["#popover"].focus())}async#_t(t=null){if(this.hasAttribute("expanded")){if(this["#popover"].setAttribute("closing",""),await this["#popover"].close(),this.removeAttribute("expanded"),this.#H)this.focus();else{let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}this["#popover"].removeAttribute("closing")}}#Fi(){this["#preview"].style.background=this.value}#q(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#jt(){!1===this.#Ii&&(this.#Fi(),this["#color-picker"].getAttribute("value")!==this.getAttribute("value")&&this["#color-picker"].setAttribute("value",this.getAttribute("value")))}#re(){this["#color-picker"].alpha=this.alpha}#oe(){this["#color-picker"].spaces=this.spaces}#mt(){this.#q()}#Gi(){this["#color-picker"].size=this.size}#Hi(){this.#Ii=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#ji(t){this.value=this["#color-picker"].value,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Fi()}#Ni(){this.#Ii=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#R(t){!1===this["#popover"].opened&&(t.preventDefault(),this.#Gt())}#Z(t){"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?(t.preventDefault(),t.stopPropagation(),this.hasAttribute("expanded")?this.#_t():this.#Gt()):"Escape"===t.code?this.hasAttribute("expanded")&&(t.preventDefault(),this.#_t()):"Tab"===t.code&&this.hasAttribute("expanded")&&t.preventDefault()}#Oi(){this.dispatchEvent(new CustomEvent("collapse")),this.#_t()}}customElements.define("x-colorselect",Ra);class Pa extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:block;position:fixed;width:0;height:0;z-index:1001}`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#Xi=null;#_i=null;#Zi=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Pa.#z],this.#$.append(document.importNode(Pa.#E.content,!0)),this["#backdrop"]=Yn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].addEventListener("contextmenu",(t=>this.#Ui(t))),this["#backdrop"].addEventListener("pointerdown",(t=>this.#lt(t))),this.addEventListener("blur",(t=>this.#Yi())),this.addEventListener("keydown",(t=>this.#Z(t)),!0),this.addEventListener("click",(t=>this.#R(t)))}connectedCallback(){this.#Xi=this.parentElement||this.parentNode.host,window.addEventListener("blur",this.#_i=()=>{this.#Yi()}),this.#Xi.addEventListener("contextmenu",this.#Zi=t=>{this.#qi(t)})}disconnectedCallback(){window.removeEventListener("blur",this.#_i),this.#Xi.removeEventListener("contextmenu",this.#Zi),this.#Xi=null}open(t,e){let i=this.querySelector("x-menu");!1===i.opened&&(i.openAtPoint(t,e),this["#backdrop"].ownerElement=i,this["#backdrop"].show(!1),i.focus())}close(){return new Promise((async t=>{this["#backdrop"].hide(!1);let e=this.querySelector("x-menu");if(e&&!0===e.opened){await e.close();let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}t()}))}#Yi(){this.close()}#qi(t){!1===this.disabled&&(t.preventDefault(),this.open(t.clientX,t.clientY))}#Ui(t){t.preventDefault(),t.stopImmediatePropagation(),this.close().then((()=>{let e=((t,e,i=!0)=>{let s=document.elementFromPoint(t,e);if(i&&s)for(;;){let i=s.shadowRoot||s._shadowRoot;if(!i)break;{let n=i.elementFromPoint(t,e);if(n.getRootNode()!==i&&(n=null),!n||n===s)break;s=n}}return s})(t.clientX,t.clientY,!0),i=new MouseEvent(t.type,t);e.dispatchEvent(i)}))}#lt(t){t.buttons<=1&&(t.preventDefault(),t.stopImmediatePropagation(),this.close())}async#R(t){let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled){let t=e.querySelector("x-menu");t?t.opened?t.close():t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.close(),this.removeAttribute("closing"))}}#Z(t){if("Escape"===t.code){this.querySelector("x-menu").opened&&(t.preventDefault(),this.close())}else if("Tab"===t.code){t.preventDefault(),t.stopPropagation(),this.querySelector("x-menu").focusNextMenuItem()}}}customElements.define("x-contextmenu",Pa);class Ta extends HTMLElement{static observedAttributes=["href"];static#E=Fs`<template><svg id="svg" preserveAspectRatio="none" viewBox="0 0 100 100" width="0px" height="0px"></svg><slot></slot></template>`;static#z=Gs`:host{display:block;color:currentColor;display:flex;align-items:center;justify-content:center;width:17px;height:17px}:host([disabled]){opacity:.5}:host([hidden]){display:none}#svg{width:100%;height:100%;fill:currentColor;stroke:none;overflow:inherit;pointer-events:none}`;get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Wi=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ta.#z],this.#$.append(document.importNode(Ta.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_()))}connectedCallback(){Un.addEventListener("iconschange",this.#Wi=()=>{this.#Ot()})}disconnectedCallback(){Un.removeEventListener("iconschange",this.#Wi)}attributeChangedCallback(t,e,i){e!==i&&"href"===t&&this.#Ot()}#X(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}async#Ot(){let t=null,e=this.href.trim();if(""!==e){let i=null,s=null;if(e.includes("#")){let t=e.split("#");""!==t[0]&&(i=t[0]),""!==t[1]&&(s=t[1])}if(null!==s)if(null===i)await Un.whenIconsReady,t=Un.queryIcon("#"+CSS.escape(s));else{let e=await Zs(i);e&&(t=e.querySelector("#"+CSS.escape(s)))}}t?(this["#svg"].setAttribute("viewBox",t.getAttribute("viewBox")),this["#svg"].innerHTML=t.innerHTML):this["#svg"].innerHTML=""}}customElements.define("x-icon",Ta);class Da extends HTMLElement{static observedAttributes=["type","value","spellcheck","minlength","maxlength","readonly","disabled","validation"];static#E=Fs`<template><main id="main"><slot></slot><input id="input" spellcheck="false" part="input"></main></template>`;static#z=Gs`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;background:#fff;font-size:12.5px}:host(:focus){z-index:10}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host([error]) ::selection{color:#fff;background-color:#d50000}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;height:100%;padding:0 6px;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;cursor:inherit}#input:-webkit-autofill{z-index:1}#input:-internal-autofill-previewed,#input:-internal-autofill-selected{-webkit-box-shadow:var(--autofill-background-color) 0 0 0 30px inset}:host(:not(:focus)) ::selection{color:inherit;background:0 0}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"text"}set type(t){this.setAttribute("type",t)}get value(){return this["#input"].value}set value(t){this["#input"].value!==t&&(this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,t)):this["#input"].value=t,"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity(),this.#xt())}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get readOnly(){return this.hasAttribute("readonly")}set readOnly(t){!0===t?this.setAttribute("readonly",t):this.removeAttribute("readonly")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#F=0;#Ki=0;#wt=null;#Vi=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Da.#z],this.#$.append(document.importNode(Da.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_())),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#$t(t))),this.addEventListener("keydown",(t=>this.#Z(t))),this["#input"].addEventListener("input",(t=>this.#St(t))),this["#input"].addEventListener("change",(t=>this.#ne(t))),this["#input"].addEventListener("search",(t=>this.#Lt(t)))}connectedCallback(){this.#q(),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity()}attributeChangedCallback(t){"type"===t?this.#Ji():"value"===t?this.#jt():"spellcheck"===t?this.#Qi():"minlength"===t?this.#ts():"maxlength"===t?this.#es():"readonly"===t?this.#is():"disabled"===t?this.#mt():"validation"===t&&this.#ss()}selectAll(){this["#input"].select()}clear(){this.value="",this.#wt=null,this.#Vi=null,this.#Ft()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#wt={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#wt={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#wt={href:"#required-field"}:"email"===this.type&&!1===this["#input"].validity.valid?this.#wt={href:"#invalid-email"}:"url"===this.type&&!1===this["#input"].validity.valid?this.#wt={href:"#invalid-url"}:"color"===this.type&&!1===js(this["#input"].value)?this.#wt={href:"#invalid-color"}:this.#wt=null,this.#Ft()),null===this.#wt&&null===this.#Vi}setCustomValidity(t){this.#Vi=""===t?null:t,this.#Ft()}#Ft(){let t=this.#Vi||this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Yn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;Xn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#q(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("aria-readonly",this.readOnly),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#Ji(){"color"===this.type?this["#input"].type="text":this["#input"].type=this.type}#jt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#Qi(){this["#input"].spellcheck=this.spellcheck}#ts(){this["#input"].minLength=this.minLength}#es(){this["#input"].maxLength=this.maxLength}#is(){this["#input"].readOnly=this.readOnly,this.#q()}#mt(){this["#input"].disabled=this.disabled,this.#q()}#ss(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity()}#R(){this.#Ft()}#X(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#zt(){this.#Ft(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#$t(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Ft()}#Z(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(document.execCommand("selectAll"),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||this.reportValidity())}#St(t){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity(),t.stopPropagation(),this.#xt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#ne(t){this.#Ki=t.timeStamp,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Lt(t){t.timeStamp-this.#Ki>100&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}customElements.define("x-input",Da);class Ba extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:block;line-height:1.2;cursor:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box}:host([disabled]){opacity:.5}:host([hidden]){display:none}slot{text-decoration:inherit}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ba.#z],this.#$.append(document.importNode(Ba.#E.content,!0))}}customElements.define("x-label",Ba);let{isFinite:Ia,isNaN:Oa,parseFloat:Ha}=Number;class ja extends HTMLElement{static observedAttributes=["href","args","autocapitalize","ellipsis"];get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get args(){let t=Object.create(null),e=this.hasAttribute("args")?this.getAttribute("args").trim():"";if(""!==e)for(let i of e.split(",")){let[e,...s]=i.split(":"),n=s.join(":");e=e.trim(),n=n.trim();let a=parseFloat(n),l=n-a+1>=0;t[e]=l?a:n}return t}set args(t){let e=Object.keys(t).map((e=>`${e}: ${t[e]}`)).join(", ");0===t.length?this.removeAttribute("args"):this.setAttribute("args",e)}get autocapitalize(){return!!this.hasAttribute("autocapitalize")}set autocapitalize(t){t?this.setAttribute("autocapitalize",""):this.removeAttribute("autocapitalize")}get ellipsis(){return this.hasAttribute("ellipsis")}set ellipsis(t){t?this.setAttribute("ellipsis",""):this.removeAttribute("ellipsis")}get whenReady(){return new Promise((t=>{null===this.#ns?t():this.#ns.push(t)}))}#as=null;#kt=null;#ns=[];#ls="";constructor(){super(),this.textContent.length>0&&(this.#ls=this.textContent)}connectedCallback(){this.#Ot(),Un.addEventListener("localeschange",this.#as=()=>{this.#Ot()}),Un.addEventListener("themechange",this.#kt=()=>{this.#Ot()})}disconnectedCallback(){Un.removeEventListener("localeschange",this.#as),Un.removeEventListener("themechange",this.#kt)}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("href"===t||"args"===t||"autocapitalize"===t||"ellipsis"===t)&&this.#Ot()}async#Ot(){await Un.whenLocalesReady;let t=Un.queryMessage(this.href,this.args);if(t.fallback&&this.#ls?this.textContent=this.#ls:"html"===t.format?this.innerHTML=t.content+(this.ellipsis?"…":""):!0===this.autocapitalize&&"titlecase"===Un.autocapitalize?this.textContent=(t=>{let e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|v.?|vs.?|via)$/i,i=/([A-Za-z0-9\u00C0-\u00FF])/;return t.split(/([ :–—-])/).map(((t,s,n)=>t.search(e)>-1&&0!==s&&s!==n.length-1&&":"!==n[s-3]&&":"!==n[s+1]&&("-"!==n[s+1]||"-"===n[s-1]&&"-"===n[s+1])?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1||":"===n[s+1]&&""!==n[s+2]?t:t.replace(i,(t=>t.toUpperCase())))).join("")})(t.content)+(this.ellipsis?"…":""):this.textContent=t.content+(this.ellipsis?"…":""),null!==this.#ns){for(let t of this.#ns)t();this.#ns=null}}}customElements.define("x-message",ja);let Na=t=>{let[e,i,...s]=t.trim().split(" ");return[i,parseFloat(e),s.join(" ")]},{abs:Fa}=Math;class Ga extends HTMLElement{static observedAttributes=["opened"];static#E=Fs`<template><slot id="slot"></slot></template>`;static#z=Gs`:host{display:none;top:0;left:0;width:fit-content;padding:4px 0;z-index:1001;box-sizing:border-box;background:#fff;cursor:default;overflow:auto;flex-direction:column;-webkit-app-region:no-drag;--align:start;--scrollbar-background:rgba(0, 0, 0, 0.2);--scrollbar-width:6px;--open-transition:100 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition:200 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host([animating]),:host([opened]){display:flex}:host(:focus){outline:0}:host-context([debug]):host(:focus){outline:2px solid red}::-webkit-scrollbar{max-width:var(--scrollbar-width);background:0 0}::-webkit-scrollbar-thumb{background-color:var(--scrollbar-background)}::-webkit-scrollbar-corner{display:none}`;get opened(){return this.hasAttribute("opened")}#$=null;#rs=[];#os=null;#hs=null;#ds=0;#cs=0;#us=!1;#ps=!1;#ms=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ga.#z],this.#$.append(document.importNode(Ga.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("pointerover",(t=>this.#bs(t))),this.addEventListener("pointerout",(t=>this.#gs(t))),this.addEventListener("pointermove",(t=>this.#fs(t))),this.addEventListener("keydown",(t=>this.#Z(t))),this.addEventListener("wheel",(t=>this.#xs(t)),{passive:!1}),this.addEventListener("scroll",(t=>this.#ws(t)),{passive:!0})}connectedCallback(){this.setAttribute("role","menu"),this.setAttribute("aria-hidden",!this.opened),this.setAttribute("tabindex","0")}attributeChangedCallback(t){"opened"===t&&this.#vs()}openOverElement(t,e){return new Promise((async i=>{let s=this.querySelectorAll(":scope > x-menuitem");if(s.length>0){this.#us=!0,this.#ms=_n(),this.#ks(),this.setAttribute("opened","");let i=[...s].find((t=>t.contains(e)))||s[0],n=this.getBoundingClientRect(),a=t.getBoundingClientRect(),l=e.getBoundingClientRect(),r=0,o=0;i.focus(),0===n.top&&0===n.left||(r=-n.left,o=-n.top),this.style.left=a.x-(l.x-n.x)+r+"px",this.style.top=a.y-(l.y-n.y)+o+"px",n=this.getBoundingClientRect(),n.left<7&&(this.style.left=7+r+"px",n=this.getBoundingClientRect());7-n.top>0&&(this.style.height=n.bottom-7+"px",this.style.top=7+o+"px",this.scrollTop=9999,n=this.getBoundingClientRect());if(n.bottom+7>window.innerHeight){let t=n.bottom-window.innerHeight,e=n.height-t-7;this.style.height=e+"px"}if(n.right+7>window.innerWidth){let t=n.right-window.innerWidth,e=n.width-t-7;this.style.width=`${e}px`}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Na(t);if("transform"===e){let t=this.getBoundingClientRect(),e=a.y+a.height/2-t.top;await this.animate({transform:["scaleY(0)","scaleY(1)"],transformOrigin:[`0 ${e}px`,`0 ${e}px`]},{duration:i,easing:s}).finished}}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),this.#cs=o}i()}))}openOverLabel(t){return new Promise((async e=>{let i=this.querySelectorAll(":scope > x-menuitem");if(i.length>0){this.#ks(),this.setAttribute("opened",""),this.#us=!0,this.#ms=_n();let e=[...i].find((e=>{let i=e.querySelector("x-label");return!(!i||i.textContent!==t.textContent)}));e||(e=i[0]);let s=e.querySelector("x-label");await this.openOverElement(t,s)}e()}))}openNextToElement(t,e="horizontal",i=0){return new Promise((async s=>{this.#us=!1,this.#ms=_n(),this.#ks(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),"x-menuitem"===t.localName&&t.setAttribute("expanded","");let n=getComputedStyle(this).getPropertyValue("--align").trim(),a=t.getBoundingClientRect(),l=this.getBoundingClientRect(),r=0,o=0;if(0===l.top&&0===l.left||(r=-l.left,o=-l.top),"horizontal"===e){this.style.top=a.top+o+"px",this.style.left=a.left+a.width+i+r+"px";let t="right";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}{let e=this.getBoundingClientRect();e.left+e.width+7>window.innerWidth&&(a.left>e.width+7?(this.style.left=a.left-e.width+r+"px",t="left"):a.left>window.innerWidth-(a.left+a.width)?(this.style.left=7+r+"px",t="left"):(this.style.left=window.innerWidth-e.width-7+r+"px",t="right"))}{let t=this.getBoundingClientRect();if(t.top+t.height+7>window.innerHeight){let e=t.top+t.height+7-window.innerHeight;this.style.top=t.top-e+o+"px"}}{let e=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Na(e);"transform"===i&&await this.animate({transform:["scale(0, 0)","scale(1, 1)"],transformOrigin:["left"===t?"100% 0":"0 0","left"===t?"100% 0":"0 0"]},{duration:s,easing:n}).finished}}else if("vertical"===e){this.style.top=a.top+a.height+i+o+"px",this.style.left="0px";let e="bottom";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}if(t.parentElement&&"x-menubar"===t.parentElement.localName){let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(this.style.height=window.innerHeight-(a.top+a.height)-10+"px")}else{let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(a.top>t.height+7?(this.style.top=a.top-t.height-i+o+"px",e="top"):a.top>window.innerHeight-(a.top+a.height)?(this.style.top=7+o+"px",e="top"):(this.style.top=window.innerHeight-t.height-7+o+"px",e="bottom"))}if("start"===n){this.style.left=a.left+r+"px";{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=a.left+a.width-t.width+r+"px")}this.getBoundingClientRect().left<7&&(this.style.left=7+r+"px")}else if("end"===n){this.style.left=a.left+a.width-l.width+r+"px";this.getBoundingClientRect().left<7&&(this.style.left=a.left+r+"px");{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=window.innerWidth-7+r+"px")}}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Na(t);"transform"===i&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["top"===e?"0 100%":"0 0","top"===e?"0 100%":"0 0"]},{duration:s,easing:n}).finished}}this.#cs=o,s()}))}openAtPoint(t,e){return new Promise((async i=>{this.#us=!1,this.#ms=_n(),this.#ks(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}));let s=0,n=0,a=[...this.querySelectorAll(":scope > x-menuitem > x-label > x-message")];await Promise.all(a.map((t=>t.whenReady)));let l=this.getBoundingClientRect();0===l.top&&0===l.left||(s=-l.left,n=-l.top),this.style.left=t+s+"px",this.style.top=e+n+"px",l=this.getBoundingClientRect(),l.right+7>window.innerWidth&&(t-=l.width,this.style.left=t+s+"px",l=this.getBoundingClientRect()),l.bottom+7>window.innerHeight&&(e=e+window.innerHeight-(l.top+l.height)-7,this.style.top=e+n+"px",l=this.getBoundingClientRect(),l.top<7&&(e=7,this.style.top=e+n+"px",this.style.height=window.innerHeight-7-7+"px"));{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Na(t);"transform"===e&&await this.animate({transform:["scale(0)","scale(1)"],transformOrigin:["0 0","0 0"]},{duration:80,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}).finished}this.#cs=n,i()}))}close(t=!0){return new Promise((async e=>{if(this.opened){this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this}));let e=this.closest("x-menuitem");if(e&&e.removeAttribute("expanded"),t){this.setAttribute("animating","");let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Na(t);"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}for(let t of this.querySelectorAll(":scope > x-menuitem")){let e=t.querySelector("x-menu[opened]");e&&e.close()}}e()}))}focusNextMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.nextElementSibling;i;i=i.nextElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of t.parentElement.children)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusFirstMenuItem()}focusPreviousMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.previousElementSibling;i;i=i.previousElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of[...t.parentElement.children].reverse())if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusLastMenuItem()}focusFirstMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])")[0]||null;t&&t.focus()}focusLastMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])"),e=t.length>0?t[t.length-1]:null;e&&e.focus()}#ys(t){let e=0;{let t=this.#rs[this.#rs.length-1],i=this.#rs[0];if(this.querySelector("x-menu[opened]")&&t){i||(i=t);let s=this.getBoundingClientRect(),n={x:s.left,y:s.top-75},a={x:s.left+s.width,y:n.y},l={x:s.left,y:s.top+s.height+75},r={x:s.left+s.width,y:l.y},o=!0;if((i.x<s.left||i.x>r.x||i.y<s.top||i.y>r.y)&&(o=!1),this.#hs&&t.x===this.#hs.x&&t.y===this.#hs.y&&(o=!1),o){let s,n;s=a,n=r;let l=(t,e)=>(e.y-t.y)/(e.x-t.x),o=l(t,s),h=l(t,n),d=l(i,s),c=l(i,n);o<d&&h>c?(this.#hs=t,e=300):this.#hs=null}}}e>0?this.#os=setTimeout((()=>{this.#ys(t)}),e):t()}#Cs(){this.#os&&(clearTimeout(this.#os),this.#os=null)}#ks(){this.style.position="fixed",this.style.top="0px",this.style.left="0px",this.style.width=null,this.style.height=null,this.style.minWidth=null,this.style.maxWidth=null}#Es(){return this.matches("*[closing], *[closing] x-menu")}#vs(){this.setAttribute("aria-hidden",!this.opened)}#G(t){if(t.target!==this&&"hr"!==t.target.localName||t.stopPropagation(),"touch"===t.pointerType&&t.target.closest("x-menu")===this){!1===this.#ps&&this.#zs();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#ys((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await Xn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#ys((()=>{this.focus()}))}}}#bs(t){if(!this.#Es()&&"touch"!==t.pointerType&&t.target.closest("x-menu")===this){!1===this.#ps&&this.#zs();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#ys((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.focus(),e.closest("x-menu");let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await Xn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#ys((()=>{this.focus()}))}}}#gs(t){t.relatedTarget&&Wn(t.relatedTarget,"x-menu")===this||!0===this.#ps&&this.#$s()}#zs(){this.#Es()||(this.#ps=!0,this.#Cs())}#$s(){this.#Es()||(this.#ps=!1,this.#Cs(),this.focus())}#fs(t){this.#rs.push({x:t.clientX,y:t.clientY}),this.#rs.length>3&&this.#rs.shift()}#xs(t){t.target.closest("x-menu")===this?(t.preventDefault(),this.scrollTop=this.scrollTop+t.deltaY,this.#ps=!0):this.#ps=!1}#ws(){if(this.#us){let t=this.scrollTop-this.#ds;if(this.#ds=this.scrollTop,_n()-this.#ms>100){let e=this.getBoundingClientRect();t<0?e.bottom+Fa(t)<=window.innerHeight-7?this.style.height=e.height+Fa(t)+"px":this.style.height=window.innerHeight-14+"px":t>0&&(e.top-t>=7?(this.style.top=this.#cs+e.top-t+"px",this.style.height=e.height+t+"px",this.scrollTop=0,this.#ds=0):(this.style.top=7+this.#cs+"px",this.style.height=window.innerHeight-14+"px"))}}}#Z(t){if(this.#Es())t.preventDefault(),t.stopPropagation();else if("ArrowUp"===t.code)t.preventDefault(),t.stopPropagation(),this.focusPreviousMenuItem();else if("ArrowDown"===t.code)t.preventDefault(),t.stopPropagation(),this.focusNextMenuItem();else if("ArrowRight"===t.code||"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.querySelector("x-menu");if(i){t.preventDefault(),t.stopPropagation(),!1===i.opened&&i.openNextToElement(e,"horizontal");let s=i.querySelector("x-menuitem:not([disabled]):not([hidden])");s&&s.focus()}}}else if("ArrowLeft"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.closest("x-menu").closest("x-menuitem");i&&i.closest("x-menu")&&(t.preventDefault(),t.stopPropagation(),i.focus(),this.close())}}}}customElements.define("x-menu",Ga);class Xa extends HTMLElement{static observedAttributes=["disabled"];static#E=Fs`<template><svg id="backdrop" hidden><path id="backdrop-path"></path></svg><slot></slot></template>`;static#z=Gs`:host{display:flex;align-items:center;width:100%;height:36px;font-size:14px;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:.6}:host([hidden]){display:none}#backdrop{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;pointer-events:none;touch-action:none}#backdrop[hidden]{display:none}#backdrop path{fill:red;fill-rule:evenodd;opacity:0;pointer-events:all}`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Ss=!1;#Ms=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Xa.#z],this.#$.append(document.importNode(Xa.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("focusout",(t=>this.#$t(t))),this.#$.addEventListener("click",(t=>this.#Ls(t))),this.#$.addEventListener("pointerdown",(t=>this.#As(t))),this.#$.addEventListener("pointerover",(t=>this.#Rs(t))),this.#$.addEventListener("wheel",(t=>this.#Ps(t))),this.#$.addEventListener("keydown",(t=>this.#Ts(t)))}connectedCallback(){this.setAttribute("role","menubar"),this.setAttribute("aria-disabled",this.disabled),window.addEventListener("orientationchange",this.#Ms=()=>{this.#Ds()})}disconnectedCallback(){window.removeEventListener("orientationchange",this.#Ms)}attributeChangedCallback(t){"disabled"===t&&this.#mt()}#Bs(t){let e=t.querySelector(":scope > x-menu");if(e&&!1===e.opened){let i=this.#Ss;t.focus(),this.#Ss=!0,this.style.touchAction="none";{e.openNextToElement(t,"vertical");let i=[...this.querySelectorAll(":scope > x-menuitem > x-menu")].filter((t=>t!==e));for(let t of i)t&&t.close(!1)}{let{x:t,y:e,width:i,height:s}=this.getBoundingClientRect();this["#backdrop-path"].setAttribute("d",`\n          M 0 0\n          L ${window.innerWidth} 0\n          L ${window.innerWidth} ${window.innerHeight}\n          L 0 ${window.innerHeight}\n          L 0 0\n          M ${t} ${e}\n          L ${t+i} ${e}\n          L ${t+i} ${e+s}\n          L ${t} ${e+s}\n        `),this["#backdrop"].removeAttribute("hidden")}!1===i&&this.dispatchEvent(new CustomEvent("expand"))}}#Is(){return new Promise((async t=>{let e=this.#Ss;this.#Ss=!1,this.style.touchAction=null,this["#backdrop"].setAttribute("hidden",""),this["#backdrop-path"].setAttribute("d","");{let t=this.querySelectorAll(":scope > x-menuitem > x-menu[opened]");for(let e of t)await e.close(!0)}let i=this.querySelector("x-menuitem:focus");i&&i.blur(),!0===e&&this.dispatchEvent(new CustomEvent("collapse")),t()}))}#Os(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(t.length>1&&e){let i=t.indexOf(e),s=t[i-1]||t[t.length-1];this.#Bs(s)}}#Hs(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(e&&t.length>1){let i=t.indexOf(e),s=t[i+1]||t[0];this.#Bs(s)}}#mt(){this.setAttribute("aria-disabled",this.disabled)}#$t(t){null!==t.relatedTarget&&!1!==this.contains(t.relatedTarget)||this.#Is()}#Ds(){this.#Is()}#Ps(t){let e=this.querySelector("x-menu[opened]");e&&!1===e.contains(t.target)&&t.preventDefault()}async#Ls(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e&&!1===e.disabled&&i){let t=e.querySelector(":scope > x-menu");e.parentElement!==this&&(t?t.opened&&!1===t.opened&&t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.#Is(),this.removeAttribute("closing")))}else t.target===this["#backdrop-path"]&&(this.#Is(),t.preventDefault(),t.stopPropagation())}#As(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled&&e.parentElement===this){let t=e.querySelector(":scope > x-menu");t&&(t.opened?this.#Is():this.#Bs(e))}}#Rs(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");e&&!1===e.disabled&&e.parentElement===this&&!i&&this.#Ss&&"touch"!==t.pointerType&&(!1===e.hasAttribute("expanded")?this.#Bs(e):e.focus())}#Ts(t){if(this.hasAttribute("closing"))t.stopPropagation(),t.preventDefault();else if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector(":scope > x-menuitem:focus");e&&(t.preventDefault(),e.click())}else if("Escape"===t.code)this.#Ss&&(t.preventDefault(),this.#Is());else if("Tab"===t.code){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){t.focus();let e=t.querySelector(":scope > x-menu");e&&(e.tabIndex=-1,e.close().then((()=>{e.tabIndex=-1})))}}else if("ArrowRight"===t.code)this.#Hs();else if("ArrowLeft"===t.code)this.#Os();else if("ArrowDown"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusFirstMenuItem())}else if("ArrowUp"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusLastMenuItem())}}}customElements.define("x-menubar",Xa);class _a extends HTMLElement{static observedAttributes=["disabled"];static#E=Fs`<template><svg id="checkmark" part="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" hidden><path id="arrow-path"></path></svg></template>`;static#z=Gs`:host{display:flex;flex-flow:row;align-items:center;position:relative;padding:0 12px 0 23px;min-height:28px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;--trigger-effect:blink}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:.6}:host(:focus){outline:0}:host-context([debug]):host(:focus){outline:2px solid red}#checkmark{display:none;transition:transform .2s cubic-bezier(.4, 0, .2, 1);align-self:center;width:18px;height:18px;margin:0 2px 0 -20px;color:inherit;--path-data:M 44 61 L 29 47 L 21 55 L 46 79 L 79 27 L 70 21 L 44 61 Z}:host([togglable]) #checkmark{display:flex;transform:scale(0);transform-origin:50% 50%}:host([toggled]) #checkmark{display:flex;transform:scale(1)}#checkmark-path{fill:currentColor}#arrow{display:flex;width:16px;height:16px;transform:scale(1.1);align-self:center;margin-left:8px;opacity:1;color:inherit;--path-data:M 26 20 L 26 80 L 74 50 Z}#arrow[hidden]{display:none}#arrow path{fill:currentColor}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){this.value!==t&&(null===t?this.removeAttribute("value"):this.setAttribute("value",t))}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get whenTriggerEnd(){return new Promise((t=>{!1===this.#js?t():this.#Ns.push(t)}))}#$=null;#F=0;#js=!1;#Ns=[];#Fs=!1;#L=null;#Gs=new MutationObserver((()=>this.#Xs()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[_a.#z],this.#$.append(document.importNode(_a.#E.content,!0)),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#ct(),this.#T(),this.#Xs(),this.#q(),this.#Gs.observe(this,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),Un.addEventListener("themechange",this.#L=()=>this.#_s())}disconnectedCallback(){this.#Gs.disconnect(),Un.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t&&this.#q()}#ct(){let t=getComputedStyle(this["#checkmark"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#Xs(){if("x-menubar"===this.parentElement.localName)this["#arrow"].setAttribute("hidden","");else{this.querySelector("x-menu")?this["#arrow"].removeAttribute("hidden"):this["#arrow"].setAttribute("hidden","")}}#q(){this.setAttribute("role","menuitem"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#_s(){this.#ct(),this.#T()}async#G(t){if(this.#Fs=this.matches(":focus"),t.buttons>1)return!1;if(this.matches("[closing] x-menuitem"))return t.preventDefault(),void t.stopPropagation();if(t.target.closest("x-menuitem")===this){this.setPointerCapture(t.pointerId);{let e,i=!0,s=Date.now();this.addEventListener("pointerup",e=async()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),i=!1;let n=Date.now()-s,a="touch"===t.pointerType?600:150;n<a&&await Xn(a-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",e),i&&this.setAttribute("pressed","")}}}async#R(t){if(t.buttons>1)return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e===this&&i===this.closest("x-menu")&&!this.matches("[closing] x-menuitem"))if(t.detail>0&&!1===Si(e.getBoundingClientRect(),new DOMPoint(t.clientX,t.clientY)))t.stopImmediatePropagation();else{if(this.togglable){let t=new CustomEvent("toggle",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&(this.toggled=!this.toggled)}if(!this.querySelector(":scope > x-menu")){let t=getComputedStyle(this).getPropertyValue("--trigger-effect").trim();if("blink"===t){this.#js=!0,this.#Fs?(this.parentElement.focus(),await Xn(150),this.focus(),await Xn(150)):(this.focus(),await Xn(150),this.parentElement.focus(),await Xn(150));for(let t of this.#Ns)t();this.#Ns=[],this.#js=!1}else if("none"===t){this.#js=!0,await Xn(50);for(let t of this.#Ns)t();this.#Ns=[],this.#js=!1}}}}#Z(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.querySelector("x-menu")||(t.stopPropagation(),this.click()))}}customElements.define("x-menuitem",_a);class Za extends HTMLElement{static observedAttributes=["opened"];static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:none;position:fixed;min-width:15px;min-height:15px;bottom:15px;left:50%;transform:translateX(-50%);padding:5px 12px;box-sizing:border-box;color:rgba(255,255,255,.9);background:#434343;z-index:9999;font-size:12px;user-select:text;-webkit-user-select:none;transition:transform .15s cubic-bezier(.4, 0, .2, 1)}:host([animating]),:host([opened]){display:block}:host(:focus){outline:0}`;get opened(){return this.hasAttribute("opened")}set opened(t){!0===t?this.setAttribute("opened",""):this.removeAttribute("opened"),this.#Zs=0}get timeout(){return this.hasAttribute("timeout")?parseFloat(this.getAttribute("timeout")):0}set timeout(t){this.setAttribute("timeout",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Zs=0;#Us=null;#Ys=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Za.#z],this.#$.append(document.importNode(Za.#E.content,!0))}connectedCallback(){this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&(this.opened?this.#qs():this.#U())}#qs(){if(this.isConnected){let t=0-this.getBoundingClientRect().height-10+"px",e=getComputedStyle(this).bottom;this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})}{this.#Zs=0,this.#Us=setInterval((()=>{this.#Zs+=100,this.timeout>0&&this.#Zs>this.timeout&&(this.opened=!1)}),100);let t=_n();window.addEventListener("pointerdown",this.#Ys=e=>{let i=_n(),s=this.getBoundingClientRect();i-t>10&&!1===Si(s,new DOMPoint(e.clientX,e.clientY))&&(this.opened=!1)},!0)}}async#U(){if(clearInterval(this.#Us),this.isConnected){this.setAttribute("animating","");let t=getComputedStyle(this).bottom,e=0-this.getBoundingClientRect().height-10+"px",i=this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});await i.finished,this.removeAttribute("animating")}window.removeEventListener("pointerdown",this.#Ys,!0)}}customElements.define("x-notification",Za);let{isFinite:Ua}=Number;const Ya=["0","1","2","3","4","5","6","7","8","9","-","+",",","."];class qa extends HTMLElement{static observedAttributes=["value","min","max","prefix","suffix","disabled"];static#E=Fs`<template><main id="main"><div id="editor-container"><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div><slot></slot></main></template>`;static#z=Gs`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:12.5px;--inner-padding:0 6px}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;height:100%}#editor-container{display:flex;align-items:center;width:100%;height:100%;padding:var(--inner-padding);box-sizing:border-box;overflow:hidden}#editor{width:100%;overflow:auto;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit;line-height:10;white-space:nowrap;font-variant-numeric:tabular-nums}:host([disabled]) #editor{user-select:none;-webkit-user-select:none}#editor::-webkit-scrollbar{display:none}#editor::before{content:attr(data-prefix);pointer-events:none}#editor::after{content:attr(data-suffix);pointer-events:none}:host(:focus) #editor::after,:host(:focus) #editor::before,:host([empty]) #editor::after,:host([empty]) #editor::before{content:""}`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):-Infinity}set min(t){Ua(t)?this.setAttribute("min",t):this.removeAttribute("min")}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):Infinity}set max(t){Ua(t)?this.setAttribute("max",t):this.removeAttribute("max")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get precision(){return this.hasAttribute("precision")?parseFloat(this.getAttribute("precision")):20}set precision(t){this.setAttribute("precision",t)}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get prefix(){return this.hasAttribute("prefix")?this.getAttribute("prefix"):""}set prefix(t){this.setAttribute("prefix",t)}get suffix(){return this.hasAttribute("suffix")?this.getAttribute("suffix"):""}set suffix(t){this.setAttribute("suffix",t)}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;#Ws=!1;#Vs=!1;#Ks=!1;#Js=!1;#Qs=!1;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[qa.#z],this.#$.append(document.importNode(qa.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#As(t))),this.#$.addEventListener("wheel",(t=>this.#xs(t))),this["#editor"].addEventListener("paste",(t=>this.#tn(t))),this["#editor"].addEventListener("input",(t=>this.#en(t))),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("pointerenter",(()=>this.#X())),this.addEventListener("pointerleave",(()=>this.#_())),this.addEventListener("keydown",(t=>this.#Z(t))),this.addEventListener("keyup",(t=>this.#in(t))),this.addEventListener("keypress",(t=>this.#sn(t))),this.addEventListener("incrementstart",(t=>this.#nn(t))),this.addEventListener("decrementstart",(t=>this.#an(t))),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#$t(t))),"gecko"===Gn()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#q(),this.#Ot()}attributeChangedCallback(t){"value"===t?this.#jt():"min"===t?this.#ln():"max"===t?this.#rn():"prefix"===t?this.#on():"suffix"===t?this.#hn():"disabled"===t&&this.#mt()}#dn(t=!1){let e=this.value,i=this.value;i+=t?10*this.step:this.step,i=Ci(i,this.min,this.max,zi(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#cn()}#un(t=!1){let e=this.value,i=this.value;i-=t?10*this.step:this.step,i=Ci(i,this.min,this.max,zi(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#cn()}#pn(){this.#Vs||(this.#Vs=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})))}#mn=((t,e,i,s=!1)=>{let n=null,a=null;return(...l)=>{let r=s&&!n;return clearTimeout(n),n=setTimeout((()=>{n=null,s||(a=t.apply(i,l))}),e),r&&(a=t.apply(i,l)),a}})((()=>{!this.#Vs||this.#Ks||this.#Js||this.#Qs||(this.#Vs=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}),500);#bn(){let t=this["#editor"].textContent,e=parseFloat(t);Number.isNaN(e)&&(e=null);let i=null===e?null:Ci(e,this.min,this.max);i!==this.value?(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this.value=i,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))):e!==this.value?this.value=i:this.#gn()}#Ot(){this.#gn(),this.#cn(),this.#fn()}#gn(){if(this.hasAttribute("value"))if(this.step<1){let t=parseFloat(this.getAttribute("value")),e=zi(this.step),i=zi(t);this["#editor"].textContent=e>0&&i<e?t.toFixed(e):this.getAttribute("value").trim()}else this["#editor"].textContent=this.getAttribute("value").trim();else this["#editor"].textContent=""}#cn(){let t=null;if(this.matches(":focus")){let e=this["#editor"].textContent;t=""===e.trim()?null:parseFloat(e)}else t=this.value;null===t?this.setAttribute("empty",""):this.removeAttribute("empty")}#fn(){let t=this.querySelector("x-stepper");if(t){let e=this.value>this.min,i=this.value<this.max;!0===i&&!0===e?t.removeAttribute("disabled"):!1===i&&!1===e?t.setAttribute("disabled",""):!1===i?t.setAttribute("disabled","increment"):!1===e&&t.setAttribute("disabled","decrement")}}#q(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#jt(){this.#Ot()}#ln(){this.#fn()}#rn(){this.#fn()}#on(){this["#editor"].setAttribute("data-prefix",this.prefix)}#hn(){this["#editor"].setAttribute("data-suffix",this.suffix)}#mt(){this["#editor"].contentEditable=this.disabled?"false":"plaintext-only",this.#q()}#zt(){document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#$t(){"webkit"!==Gn()&&this.#$.getSelection().collapse(this["#main"]),this["#editor"].scrollLeft=0,this.#bn(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0}))}#en(){this.#cn(),this.#fn()}#xs(t){this.matches(":focus")&&(t.preventDefault(),this.#pn(),t.wheelDeltaX>0||t.wheelDeltaY>0?(this.#dn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):(this.#un(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#mn())}#R(t){t.preventDefault()}#G(t){"x-stepper"===t.target.localName&&t.preventDefault()}#As(t){if(t.buttons>1||!1===t.isPrimary)t.preventDefault();else if(t.target===this["#editor"]&&!1===this["#editor"].matches(":focus")){t.preventDefault();let e,i,s=this.value,n=t.clientX,a=new DOMPoint(t.clientX,t.clientY);this.style.cursor="col-resize",this["#editor"].setPointerCapture(t.pointerId),this["#editor"].addEventListener("pointermove",e=e=>{let i=new DOMPoint(e.clientX,e.clientY),l=e.timeStamp-t.timeStamp,r=e.clientX!==n,o=$i(a,i)>3||l>80;if(n=e.clientX,r&&o&&e.isPrimary){!1===this.#Ws&&(this.#Ws=!0,this.#Vs=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})));let i=e.clientX-t.clientX,n=s+i*this.step;n=Ci(n,this.min,this.max,zi(this.step)),this.value=n,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}),this["#editor"].addEventListener("pointerup",i=()=>{this["#editor"].removeEventListener("pointermove",e),this["#editor"].removeEventListener("pointerup",i),this["#editor"].removeEventListener("pointercancel",i),this.style.cursor=null,!0===this.#Ws?(this.#Ws=!1,this.#Vs=!1,this.dispatchEvent(new CustomEvent("changeend",{detail:this.value!==s,bubbles:!0}))):(this["#editor"].focus(),document.execCommand("selectAll"))}),this["#editor"].addEventListener("pointercancel",i)}}#X(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#_(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#nn(t){let e,i;this.matches(":focus")&&this.#bn(),this.#Qs=!0,this.addEventListener("increment",e=t=>{this.#pn(),this.#dn(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#mn()}),this.addEventListener("incrementend",i=t=>{this.#Qs=!1,this.removeEventListener("increment",e),this.removeEventListener("incrementend",i)})}#an(t){let e,i;this.matches(":focus")&&this.#bn(),this.#Qs=!0,this.addEventListener("decrement",e=t=>{this.#pn(),this.#un(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#mn()}),this.addEventListener("decrementend",i=t=>{this.#Qs=!1,this.removeEventListener("decrement",e),this.removeEventListener("decrementend",i)})}#Z(t){"ArrowDown"===t.code?(t.preventDefault(),this.#Ks=!0,this.#pn(),this.#un(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#mn()):"ArrowUp"===t.code?(t.preventDefault(),this.#Ks=!0,this.#pn(),this.#dn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#mn()):"Backspace"===t.code?this.#Js=!0:"Enter"!==t.code&&"NumpadEnter"!==t.code||(this.#bn(),document.execCommand("selectAll"))}#in(t){"ArrowDown"===t.code||"ArrowUp"===t.code?(this.#Ks=!1,this.#mn()):"Backspace"===t.code&&(this.#Js=!1)}#sn(t){!1===t.ctrlKey&&!1===t.altKey&&!1===t.metaKey&&!1===Ya.includes(t.key)&&t.preventDefault()}async#tn(t){t.preventDefault();let e=t.clipboardData.getData("text/plain").trim();(t=>{let e=Ha(t);return!1===Oa(e)&&Ia(e)})(e)&&(await Xn(1),document.execCommand("insertText",!1,e))}}customElements.define("x-numberinput",qa);class Wa extends HTMLElement{static observedAttributes=["modal"];static#E=Fs`<template><svg id="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg><slot id="slot"></slot></template>`;static#z=Gs`:host{position:fixed;display:none;top:0;left:0;min-height:30px;z-index:1001;box-sizing:border-box;background:#fff;overflow:auto;-webkit-app-region:no-drag;--align:bottom;--arrow-size:20px;--open-transition:900 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition:200 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host(:focus){outline:0}:host([animating]),:host([opened]){display:flex}#arrow{position:fixed;box-sizing:border-box;content:""}#arrow[data-align=bottom],#arrow[data-align=top]{width:var(--arrow-size);height:calc(var(--arrow-size) * .6);transform:translate(-50%,0)}#arrow[data-align=left],#arrow[data-align=right]{width:calc(var(--arrow-size) * .6);height:var(--arrow-size);transform:translate(0,-50%)}#arrow-path{stroke-width:1;vector-effect:non-scaling-stroke}#slot{border-radius:inherit}`;get opened(){return this.hasAttribute("opened")}get modal(){return this.hasAttribute("modal")}set modal(t){t?this.setAttribute("modal",""):this.removeAttribute("modal")}#$=null;#xn=null;#wn=new ResizeObserver((()=>this.#ki()));#vn=null;#kn;#yn;#kt;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Wa.#z],this.#$.append(document.importNode(Wa.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Yn("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>{t.preventDefault()})),this["#backdrop"].addEventListener("pointerdown",(t=>{this.hasAttribute("animating")?t.stopPropagation():this.parentNode&&"x-button"!==this.parentNode.localName&&"x-colorselect"!==this.parentNode.localName&&this.close()}))}connectedCallback(){this.tabIndex=-1}attributeChangedCallback(t,e,i){e!==i&&"modal"===t&&(this.modal&&this.opened?this["#backdrop"].show():this["#backdrop"].hide())}#ki(){this.#Cn(this.#vn)}open(t,e=!0){return new Promise((async i=>{if(this.#vn=t,!1===this.opened&&(this.modal&&this["#backdrop"].show(!1),this.setAttribute("opened",""),this.#wn.observe(this),window.addEventListener("resize",this.#yn=()=>this.#ki()),Un.addEventListener("themechange",this.#kt=()=>this.#En()),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),await new Promise((t=>{requestAnimationFrame(t)})),this.#En(),this.#Cn(t),this.#xn=Vn(this),this.#xn&&this.#xn.addEventListener("scroll",this.#kn=()=>{this.close()},{once:!0}),e)){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Na(t);"transform"===e&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["0 0","0 0"]},{duration:i,easing:s}).finished}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened&&(this.removeAttribute("opened"),this.#wn.disconnect(),window.removeEventListener("resize",this.#yn),Un.removeEventListener("themechange",this.#kt),this["#backdrop"].hide(),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#xn.removeEventListener("scroll",this.#kn),t)){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Na(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}e()}))}#Cn(t){let e=getComputedStyle(this).getPropertyValue("--align").trim(),i=parseInt(getComputedStyle(this).borderWidth),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=yi(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","bottom"),this["#arrow-path"].setAttribute("d","M 0 100, L 50 0, L 100 100");let e=yi(this.getBoundingClientRect()),s=yi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.top=n+a.bottom+2+i+"px",this.style.top=n+a.bottom+2+s.height+"px",e=yi(this.getBoundingClientRect()),l=e.bottom+8-window.innerHeight,t&&l>0){let t=e.height-l;l=0,this.style.maxHeight=t+"px"}return l},l=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","top"),this["#arrow-path"].setAttribute("d","M 0 0, L 50 100, L 100 0");let e=yi(this.getBoundingClientRect()),s=yi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.top=Math.floor(n+a.top-2-i-s.height)+"px",this.style.top=n+a.top-2-s.height-e.height+"px",e=yi(this.getBoundingClientRect()),l=-(e.top-8),t&&l>0){let t=e.height-l;l=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-2-s.height-t+"px"}return l},r=()=>{this.style.maxWidth=null;let t=yi(this.getBoundingClientRect()),e=0,i=0;return this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+a.left+a.width/2-t.width/2+"px",t=yi(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},o=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+window.innerWidth-8-e.width+"px",e=yi(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+8+"px",e=yi(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("top"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","right"),this["#arrow-path"].setAttribute("d","M 100 0, L 0 50, L 100 100");let e=yi(this.getBoundingClientRect()),n=yi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.left=s+a.right+2+i+"px",this.style.left=s+a.right+2+n.width+"px",e=yi(this.getBoundingClientRect()),l=e.right+8-window.innerWidth,t&&l>0){let t=e.width-l;l=0,this.style.maxWidth=t+"px"}return l},l=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","left"),this["#arrow-path"].setAttribute("d","M 0 0, L 100 50, L 00 100");let e=yi(this.getBoundingClientRect()),n=yi(this["#arrow"].getBoundingClientRect()),l=0;if(this["#arrow"].style.left=s+a.left-2-i-n.width+"px",this.style.left=s+a.left-2-n.width-e.width+"px",e=yi(this.getBoundingClientRect()),l=-(e.left-8),t&&l>0){let t=e.width-l;l=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-2-n.width-t+"px"}return l},r=()=>{this.style.maxHeight=null;let t=yi(this.getBoundingClientRect()),e=0,i=0;return this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+a.top+a.height/2-t.height/2+"px",t=yi(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},o=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+window.innerHeight-8-e.height+"px",e=yi(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+8+"px",e=yi(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("left"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}}#En(){{let{backgroundColor:t,borderColor:e,borderWidth:i}=getComputedStyle(this);this["#arrow-path"].style.fill=t,this["#arrow-path"].style.stroke=e,this["#arrow-path"].style.strokeWidth=i}}}customElements.define("x-popover",Wa);class Va extends HTMLElement{static observedAttributes=["value","max","disabled"];static#E=Fs`<template><div id="determinate-bar" part="bar"></div><div id="indeterminate-bars"><div id="primary-indeterminate-bar" part="bar"></div><div id="secondary-indeterminate-bar" part="bar"></div></div></template>`;static#z=Gs`:host{display:block;box-sizing:border-box;height:8px;width:100%;position:relative;contain:strict;overflow:hidden;background:#acece6;cursor:default}:host([hidden]){display:none}#indeterminate-bars{width:100%;height:100%}#determinate-bar{position:absolute;top:0;left:0;bottom:0;width:0%;height:100%;background:#3b99fb;box-shadow:0 0 0 1px #3385db;transition:width .4s ease-in-out;will-change:left,right}:host([value="-1"]) #determinate-bar{visibility:hidden}#primary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3b99fb;will-change:left,right}#secondary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3b99fb;will-change:left,right}`;get value(){return this.hasAttribute("value")?parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):1}set max(t){this.setAttribute("max",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#zn=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Va.#z],this.#$.append(document.importNode(Va.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Ot()}attributeChangedCallback(t,e,i){e!==i&&("value"===t||"disabled"===t)&&this.#Ot()}#Ot(){if(null===this.value||-1===this.value||this.disabled?this["#determinate-bar"].style.width="0%":this["#determinate-bar"].style.width=this.value/this.max*100+"%",null!==this.value||this.disabled){if(this.#zn){for(let t of this.#zn)t.cancel();this.#zn=null}}else this.#zn||(this.#zn=[this["#primary-indeterminate-bar"].animate([{left:"-35%",right:"100%",offset:0},{left:"100%",right:"-90%",offset:.6},{left:"100%",right:"-90%",offset:1}],{duration:2e3,easing:"ease-in-out",iterations:Infinity}),this["#secondary-indeterminate-bar"].animate([{left:"-100%",right:"100%",offset:0},{left:"110%",right:"-30%",offset:.8},{left:"110%",right:"-30%",offset:1}],{duration:2e3,delay:1e3,easing:"ease-in-out",iterations:Infinity})])}}customElements.define("x-progressbar",Va);class Ka extends HTMLElement{static observedAttributes=["toggled","disabled"];static#E=Fs`<template><main id="main"><div id="indicator" part="indicator"><div id="indicator-dot" part="indicator-dot"></div></div><div id="description"><slot></slot></div></main></template>`;static#z=Gs`:host{display:block;position:relative;width:fit-content}:host(:focus){outline:0}:host([disabled]){opacity:.4;pointer-events:none}:host([hidden]){display:none}#main{display:flex;align-items:center}#indicator{position:relative;border:3px solid #000;width:19px;height:19px;border-radius:99px;display:flex;align-items:center;justify-content:center}#indicator-dot{width:100%;height:100%;background:currentColor;border-radius:99px;transform:scale(0)}:host([mixed][toggled]) #indicator-dot{height:33%;border-radius:0}:host([toggled]) #indicator-dot{transform:scale(.5)}#description{flex:1}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ka.#z],this.#$.append(document.importNode(Ka.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){this.#q()}attributeChangedCallback(t){"toggled"===t?this.#ut():"disabled"===t&&this.#mt()}#q(){this.setAttribute("role","radio"),this.setAttribute("aria-checked",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.closest("x-radios")||(this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0))}#ut(){this.setAttribute("aria-checked",this.toggled)}#mt(){this.#q()}#R(t){this.closest("x-radios")||(this.toggled&&this.mixed?this.mixed=!1:(this.mixed=!1,this.toggled=!this.toggled),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})))}#G(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Wn(this.parentNode,"[tabindex]");e&&e.focus()}}#Z(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-radio",Ka);class Ja extends HTMLElement{get value(){let t=this.querySelector("x-radio[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-radio"))e.toggled=e.value===t&&null!==t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.innerHTML="<slot></slot>",this.addEventListener("click",(t=>this.#R(t)),!0),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){this.setAttribute("role","radiogroup");let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this)),e=t.find((t=>t.toggled&&!t.disabled))||t.find((t=>!t.disabled));for(let i of t)i.setAttribute("tabindex",i===e?"0 ":"-1"),i.setAttribute("aria-checked",i===e)}#R(t){let e=t.target.closest("x-radio");if(e&&!e.toggled&&!e.disabled&&t.buttons<=1){let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this&&t!==e));if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1,e.tabIndex=0;for(let e of t)e.toggled=!1,e.tabIndex=-1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}}#Z(t){if("ArrowDown"===t.code||"ArrowRight"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i.length>1?i[e+1]||i[0]:null;n&&(t.preventDefault(),n.focus(),n.tabIndex=0,s.tabIndex=-1)}}else if("ArrowUp"===t.code||"ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i[i.length-1],a=i.length>1?i[e-1]||n:null;a&&(t.preventDefault(),a.focus(),a.tabIndex=0,s.tabIndex=-1)}}}}customElements.define("x-radios",Ja);let Qa=Symbol();class tl extends HTMLElement{static observedAttributes=["disabled"];static#E=Fs`<template><div id="button"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><slot></slot></template>`;static#z=Gs`:host{display:block;width:fit-content;height:32px;padding:0 0 0 8px;max-width:100%;box-sizing:border-box;position:relative;outline:0;font-size:14px;user-select:none;-webkit-user-select:none}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}:host(:hover){cursor:default}:host([size=small]){font-size:12.5px}#button{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;flex:1;width:100%;height:100%}:host([mixed]) #button>*{opacity:.7}#button>x-label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#button>#arrow-container{display:flex;align-content:center;justify-content:center;margin:0 0 0 auto;z-index:999}#button>#arrow-container #arrow{display:flex;width:13px;height:13px;min-width:13px;margin:0 2px 0 11px;color:currentColor;--text-color:50%;--path-data:M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z}#button>#arrow-container #arrow path{fill:currentColor}`;get value(){let t=this.querySelector("x-menuitem[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-menuitem"))e.toggled=e.value===t&&null!==t}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;#H=!1;#yt=null;#Ct=null;#L=null;#$n=new MutationObserver((t=>this.#Sn(t)));#S=new ResizeObserver((()=>this.#ki()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[tl.#z],this.#$.append(document.importNode(tl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=Yn("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#Et(t))),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("toggle",(t=>this.#Mn(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){this.#$n.observe(this,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this.#S.observe(this),this.#Ln(),this.#T(),this.#q(),Un.addEventListener("themechange",this.#L=()=>this.#T())}disconnectedCallback(){this.#$n.disconnect(),this.#S.disconnect(),Un.removeEventListener("themechange",this.#L)}attributeChangedCallback(t){"disabled"===t&&this.#q()}#Gt(){if(!1===this.#Xt())return;this.#H=this.matches(":focus"),this["#backdrop"].show(!1),window.addEventListener("resize",this.#yt=()=>{this.#_t()}),window.addEventListener("blur",this.#Ct=()=>{this.#_t()});let t=this.querySelector(":scope > x-menu");{let e=null;for(let i of t.querySelectorAll("x-menuitem"))i.togglable=!0,i.toggled&&(null===e?e=i:i.toggled=!1)}if(t.querySelector("x-menuitem[toggled]")){let e=this["#button"].querySelector("x-label")||this["#button"].firstElementChild,i=e[Qa];t.openOverElement(e,i)}else{let e=t.querySelector("x-menuitem").firstElementChild;t.openOverElement(this["#button"],e)}{let e=t.getBoundingClientRect(),i=this["#button"].getBoundingClientRect(),s=parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#_t(t=null){if(!1===this.#Zt())return;let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#H)this.focus();else{let t=Wn(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#yt),window.removeEventListener("blur",this.#Ct),await e.close(),e.removeAttribute("closing")}#Xt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu"),e=t.querySelector("x-menuitem");return null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")&&null!==e}}#Zt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu");return t.querySelector("x-menuitem"),null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Ln(){let t=this.querySelector(":scope > x-menu x-menuitem[toggled]");if(this["#button"].innerHTML="",t){for(let e of t.children){let t=e.cloneNode(!0);t[Qa]=e,t.removeAttribute("id"),t.removeAttribute("style"),this["#button"].append(t)}this.#An()}this["#button"].append(this["#arrow-container"])}#Rn=Zn(this.#Ln,300,this);#An(){for(let t of this["#button"].children)if(t!==this["#arrow-container"]){let{width:e,height:i,margin:s,padding:n,border:a,borderRadius:l}=getComputedStyle(t[Qa]);["x-icon","x-swatch","img","svg"].includes(t[Qa].localName)&&(t.style.width=e,t.style.height=i,t.style.minWidth=e,t.style.borderRadius=l),t.style.margin=s,t.style.padding=n,t.style.border=a}}#T(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#q(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0);{this.setAttribute("role","button");let t=this.querySelector(":scope > x-menu");if(t){t.setAttribute("role","listbox");for(let e of t.querySelectorAll("x-menuitem"))e.setAttribute("role","option")}}}async#Sn(t){for(let e of t)if("attributes"===e.type&&"x-menuitem"===e.target.localName&&"toggled"===e.attributeName){await Xn(10),this.#Rn();break}}#ki(){this.#An()}#G(t){t.target.closest("x-menu")||!1!==this.matches(":focus")||t.preventDefault()}async#R(t){if(!(t.buttons>1))if(this.#Xt())this.#Gt();else if(this.#Zt()){let e=t.target.closest("x-menuitem");if(e){let t=this.value,i=e.value;for(let t of this.querySelectorAll("x-menuitem"))t.toggled=t===e;await this.#_t(e.whenTriggerEnd),(t!==i||this.mixed)&&(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{oldValue:t,newValue:i}})))}}}#Mn(t){t.preventDefault()}#Et(t){this.#_t()}#Z(t){!1===t.defaultPrevented&&(this.querySelector(":scope > x-menu"),"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code||"ArrowUp"===t.code||"ArrowDown"===t.code?this.#Xt()&&(t.preventDefault(),this.#Gt()):"Escape"===t.code&&this.#Zt()&&(t.preventDefault(),this.#_t()))}}customElements.define("x-select",tl);const el=navigator.platform.startsWith("Mac")||["iPhone","iPad"].includes(navigator.platform),il=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"];class sl extends HTMLElement{static observedAttributes=["value"];static#E=Fs`<template><main id="main"></main></template>`;static#z=Gs`:host{display:inline-block;box-sizing:border-box;font-size:14px;line-height:1}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}`;get value(){let t=[];if(this.hasAttribute("value")){let e=this.getAttribute("value").replace("++","+PLUS").split("+");e=e.map((t=>t.trim().replace("PLUS","+"))).filter((t=>""!==t)),t=e}return t}set value(t){this.setAttribute("value",t.join("+"))}get modKeys(){return this.value.filter((t=>il.includes(t)))}get normalKey(){let t=this.value.find((t=>!1===il.includes(t)));return void 0===t?null:t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[sl.#z],this.#$.append(document.importNode(sl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t){"value"===t&&this.#Ot()}#Ot(){let t="";this.value;let e=this.modKeys,i=this.normalKey;if(el){e.includes("Meta")&&(t+="^"),e.includes("Alt")&&(t+="⌥"),e.includes("Shift")&&(t+="⇧"),e.includes("Control")&&(t+="⌘"),e.includes("Symbol")&&(t+="☺"),void 0!==i&&(t+={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→",Backspace:"⌦"}[i]||i)}else{let s=[];e.includes("Control")&&s.push("Ctrl"),e.includes("Alt")&&s.push("Alt"),e.includes("Meta")&&s.push("Meta"),e.includes("Shift")&&s.push("Shift"),e.includes("Symbol")&&s.push("Symbol");let n={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};null!==i&&s.push(n[i]||i),t=s.join("+")}this["#main"].textContent=t}}customElements.define("x-shortcut",sl);class nl extends HTMLElement{static observedAttributes=["value","buffer","min","max","disabled"];static#E=Fs`<template><main id="main"><div id="tracks-and-thumbs"><div id="groove-track" part="track groove-track"></div><div id="buffer-track" part="track buffer-track"></div><div id="range-track" part="track range-track"></div><div id="thumbs"><div id="start-thumb" class="thumb" part="thumb start-thumb" data-value="start" tabindex="0"></div><div id="end-thumb" class="thumb" part="thumb end-thumb" data-value="end" tabindex="0"></div></div></div><div id="ticks"></div><div id="labels"><slot></slot></div></main></template>`;static#z=Gs`:host{display:block;width:100%;position:relative;box-sizing:border-box;touch-action:pan-y}:host(:focus){outline:0}:host(:hover){cursor:default}:host([disabled]){pointer-events:none;opacity:.4}:host([vertical]){width:fit-content;height:200px}#main{display:flex;flex-flow:column;width:100%;height:100%}:host([vertical]) #main{flex-flow:row}#tracks-and-thumbs{position:relative;width:100%;height:100%}#range-track{position:absolute;width:0%;height:4px;background:#000;top:50%;transform:translateY(-50%)}:host([vertical]) #range-track{width:4px;height:0%;top:initial;left:50%;transform:translateX(-50%)}#groove-track{position:absolute;width:100%;height:4px;background:gray;top:50%;transform:translateY(-50%)}:host([vertical]) #groove-track{width:4px;height:100%;top:initial;left:50%;transform:translateX(-50%)}#buffer-track{position:absolute;width:0%;height:4px;background:red;top:50%;transform:translateY(-50%)}:host([vertical]) #buffer-track{width:4px;height:0%;top:initial;left:50%;transform:translateX(-50%)}#thumbs{position:relative;width:calc(100% - var(--computed-thumb-width));height:100%;margin:0 auto}:host([vertical]) #thumbs{height:calc(100% - var(--computed-thumb-height));width:100%;margin:auto 0}#thumbs .thumb{position:absolute;top:0;left:0;width:20px;height:20px;margin-left:calc(var(--computed-thumb-width)/ -2);box-sizing:border-box;background:gray;border:1px solid rgba(0,0,0,.2)}:host([vertical]) #thumbs .thumb{margin-left:0}#thumbs .thumb:first-child{position:relative}#thumbs .thumb:focus{outline:0;z-index:2}#ticks{position:relative;width:calc(100% - var(--computed-thumb-width));margin:0 calc(var(--computed-thumb-width)/ 2)}:host([vertical]) #ticks{width:initial;height:calc(100% - var(--computed-thumb-height));margin:calc(var(--computed-thumb-height)/ 2) 0}#ticks:empty{display:none}#ticks .tick{position:absolute;left:0;top:0;width:1px;height:5px;background:rgba(0,0,0,.4)}:host([vertical]) #ticks .tick{width:5px;height:1px;left:0;top:0}#ticks .tick:first-child{position:relative}#labels{position:relative;width:calc(100% - var(--computed-thumb-width));margin:0 calc(var(--computed-thumb-width)/ 2)}:host([vertical]) #labels{width:initial;height:calc(100% - var(--computed-thumb-height));margin:calc(var(--computed-thumb-height)/ 2) 0}:host(:empty) #labels{display:none}::slotted(x-label){display:inline-block;top:0;position:absolute;vertical-align:top;transform:translateX(-50%);white-space:nowrap}:host([vertical]) ::slotted(x-label){top:initial;left:4px;transform:translateY(-50%)}`;get min(){return this.hasAttribute("min")?parseFloat(this.getAttribute("min")):0}set min(t){this.setAttribute("min",t)}get max(){return this.hasAttribute("max")?parseFloat(this.getAttribute("max")):100}set max(t){this.setAttribute("max",t)}get value(){if(this.hasAttribute("value")){let t=this.getAttribute("value").split(/[ ,]+/);return t.length>=2?t.map((t=>parseFloat(t))).slice(0,2):parseFloat(t[0])}return this.max>=this.min?this.min+(this.max-this.min)/2:this.min}set value(t){Array.isArray(t)?((t=t.map((t=>Ci(t,this.min,this.max)))).length=2,this.setAttribute("value",t.join(" "))):(t=Ci(t,this.min,this.max),this.setAttribute("value",t))}get buffer(){if(this.hasAttribute("buffer")){let t=this.getAttribute("buffer").split(/[ ,]+/);return t.length>=2?t.map((t=>parseFloat(t))).slice(0,2):[0,parseFloat(t[0])]}return[0,0]}set buffer(t){(t=t.map((t=>Ci(t,this.min,this.max)))).length=2,this.setAttribute("buffer",t.join(" "))}get step(){return this.hasAttribute("step")?parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get dragging(){return this.getAttribute("dragging")}#$=null;#F=0;#$n=new MutationObserver((t=>this.#Sn(t)));#Pn=new ResizeObserver((()=>this.#Tn()));constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[nl.#z],this.#$.append(document.importNode(nl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#As(t))),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){this.setAttribute("value",this.value),this.#Pn.observe(this["#start-thumb"]),this.#$n.observe(this,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"],characterData:!1}),this.#Dn(),this.#Bn(),this.#In(),this.#q()}disconnectedCallback(){this.#Pn.unobserve(this["#start-thumb"]),this.#$n.disconnect()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#jt():"buffer"===t?this.#On():"min"===t?this.#ln():"max"===t?this.#rn():"disabled"===t&&this.#mt())}#jt(){this.#Dn(),this.#Bn()}#On(){this.#Dn()}#ln(){this.#Dn(),this.#Bn(),this.#In()}#rn(){this.#Dn(),this.#Bn(),this.#In()}#mt(){this.#q()}#Sn(t){for(let e of t){if("attributes"===e.type&&e.target===this)return;this.#Hn()}}#Tn(){let t=this["#start-thumb"].getBoundingClientRect();this["#main"].style.setProperty("--computed-thumb-width",t.width+"px"),this["#main"].style.setProperty("--computed-thumb-height",t.height+"px")}#G(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Wn(this.parentNode,"[tabindex]");e&&e.focus()}}#As(t){if(t.buttons>1||!1===t.isPrimary)return;let e,i,s=null,{width:n,height:a}=this["#start-thumb"].getBoundingClientRect(),l=this["#main"].getBoundingClientRect(),r=!1;if(t.target.matches(".thumb"))s=t.target;else if(!0===this["#end-thumb"].hidden)s=this["#start-thumb"];else{let e=this["#start-thumb"].getBoundingClientRect(),i=this["#end-thumb"].getBoundingClientRect(),n=new DOMPoint(e.x+e.width/2,e.y+e.height/2),a=new DOMPoint(i.x+i.width/2,i.y+i.height/2),l=new DOMPoint(t.clientX,t.clientY),r=$i(l,n),o=$i(l,a);s=r<=o?this["#start-thumb"]:this["#end-thumb"]}let o=(t,e)=>{let i=0;if(this.vertical){let t=l.y+l.height-a/2-e;t=Ci(t,0,l.height-a),i=t/(l.height-a)*(this.max-this.min)+this.min}else{let e=t-(l.x+n/2);e=Ci(e,0,l.width-n),i=e/(l.width-n)*(this.max-this.min)+this.min}var o,h;if(o=i,h=this.step,i=ki(ki(o/h)*h,zi(h)),Array.isArray(this.value)){let[t,e]=this.value;s===this["#start-thumb"]?(i>=e&&(i=e),i!==t&&(this.value=[i,e],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))):s===this["#end-thumb"]&&(i<=t&&(i=t),i!==e&&(this.value=[t,i],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))}else this.value!==i&&(this.value=i,!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};s.setPointerCapture(t.pointerId),this.setAttribute("dragging",s.dataset.value),o(t.clientX,t.clientY);for(let t of this["#thumbs"].children)t.style.zIndex=t===s?"1":"0";s.addEventListener("pointermove",e=t=>{t.isPrimary&&o(t.clientX,t.clientY)}),s.addEventListener("pointerup",i=()=>{s.removeEventListener("pointermove",e),s.removeEventListener("pointerup",i),s.removeEventListener("pointercancel",i),this.removeAttribute("dragging"),r&&this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}),s.addEventListener("pointercancel",i)}#Z(t){if("ArrowLeft"===t.code||"ArrowDown"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?t.shiftKey?i-=10*this.step:i-=this.step:this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s-=10*this.step:s-=this.step,s<=i&&(s=i)),this.value=[i,s],!1===at(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value-=10*this.step:this.value-=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}else if("ArrowRight"===t.code||"ArrowUp"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?(t.shiftKey?i+=10*this.step:i+=this.step,i>=s&&(i=s)):this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s+=10*this.step:s+=this.step),this.value=[i,s],!1===at(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value+=10*this.step:this.value+=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}}#Bn(){if(Array.isArray(this.value)){let[t,e]=this.value;{let e=(t-this.min)/(this.max-this.min)*100;this.vertical?(this["#start-thumb"].style.top=100-e+"%",this["#start-thumb"].hidden=!1):(this["#start-thumb"].style.left=e+"%",this["#start-thumb"].hidden=!1)}{let t=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#end-thumb"].style.top=100-t+"%",this["#end-thumb"].hidden=!1):(this["#end-thumb"].style.left=t+"%",this["#end-thumb"].hidden=!1)}}else{let t=(this.value-this.min)/(this.max-this.min)*100;this.vertical?(this["#start-thumb"].style.top=100-t+"%",this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0):(this["#start-thumb"].style.left=t+"%",this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0)}}#Dn(){if(Array.isArray(this.value)){let[t,e]=this.value,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#range-track"].style.bottom=`${i}%`,this["#range-track"].style.height=s-i+"%"):(this["#range-track"].style.left=`${i}%`,this["#range-track"].style.width=s-i+"%")}else{let t=(this.value-this.min)/(this.max-this.min)*100,e=((this.min>0?this.min:0)-this.min)/(this.max-this.min)*100;this.vertical?t>=e?(this["#range-track"].style.bottom=`${e}%`,this["#range-track"].style.height=t-e+"%"):(this["#range-track"].style.bottom=`${t}%`,this["#range-track"].style.height=e-t+"%"):t>=e?(this["#range-track"].style.left=`${e}%`,this["#range-track"].style.width=t-e+"%"):(this["#range-track"].style.left=`${t}%`,this["#range-track"].style.width=e-t+"%")}{let[t,e]=this.buffer,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.vertical?(this["#buffer-track"].style.bottom=i+"%",this["#buffer-track"].style.height=s-i+"%"):(this["#buffer-track"].style.left=i+"%",this["#buffer-track"].style.width=s-i+"%")}}async#In(){await customElements.whenDefined("x-label"),this["#ticks"].innerHTML="";for(let t of this.querySelectorAll(":scope > x-label"))this.vertical?t.style.top=100-(t.value-this.min)/(this.max-this.min)*100+"%":t.style.left=(t.value-this.min)/(this.max-this.min)*100+"%",t===this.firstElementChild?t.style.position="relative":t.style.position=null,this.vertical?this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="tick" style="top: ${t.style.top}"></div>`):this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="tick" style="left: ${t.style.left}"></div>`)}#Hn=Zn(this.#In,500,this);#q(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0),this["#start-thumb"].tabIndex=this.tabIndex,this["#end-thumb"].tabIndex=this.tabIndex}}customElements.define("x-slider",nl);class al extends HTMLElement{static observedAttributes=["disabled"];static#E=Fs`<template><div id="decrement-button" part="decrement-button" class="button"><svg id="decrement-arrow" part="decrement-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="decrement-arrow-path"></path></svg></div><div id="increment-button" part="increment-button" class="button"><svg id="increment-arrow" part="increment-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="increment-arrow-path"></path></svg></div></template>`;static#z=Gs`:host{display:flex;flex-flow:column-reverse;align-items:center;justify-content:center;box-sizing:border-box;height:100%;width:fit-content;color:rgba(0,0,0,.6)}:host(:hover){cursor:default}:host([disabled=""]){opacity:.5;pointer-events:none}.button{display:flex;align-items:center;justify-content:center;width:100%;height:100%;user-select:none;-webkit-user-select:none;box-sizing:border-box;color:inherit;border-left:none}.button[data-pressed]{color:#fff;background:rgba(0,0,0,.3)}:host([disabled=decrement]) #decrement-button,:host([disabled=increment]) #increment-button{opacity:.3;pointer-events:none}#increment-arrow{width:11px;height:11px;pointer-events:none;--path-data:M 24 69 L 50 43 L 76 69 L 69 76 L 50 58 L 31 76 L 24 69 Z}#decrement-arrow{width:11px;height:11px;pointer-events:none;--path-data:M 24 32 L 50 58 L 76 32 L 69 25 L 50 44 L 31 25 L 24 32 Z}#decrement-arrow-path,#increment-arrow-path{fill:currentColor}`;get disabled(){return!!this.hasAttribute("disabled")&&("increment"===this.getAttribute("disabled")?"increment":"decrement"!==this.getAttribute("disabled")||"decrement")}set disabled(t){!0===t?this.setAttribute("disabled",""):!1===t?this.removeAttribute("disabled"):this.setAttribute("disabled",t)}#$=null;#jn=null;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[al.#z],this.#$.append(document.importNode(al.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("contextmenu",(t=>t.preventDefault()))}connectedCallback(){this.#Nn(),Un.addEventListener("themechange",this.#L=()=>this.#Nn()),"x-numberinput"===this.parentElement.localName&&(this.#jn=this.parentElement,this.#jn.setAttribute("hasstepper",""))}disconnectedCallback(){Un.removeEventListener("themechange",this.#L),this.#jn&&(null===this.#jn.querySelector(":scope > x-stepper")&&this.#jn.removeAttribute("hasstepper",""),this.#jn=null)}attributeChangedCallback(t){"disabled"===t&&this.#mt()}#Nn(){let t=getComputedStyle(this["#increment-arrow"]).getPropertyValue("--path-data"),e=getComputedStyle(this["#decrement-arrow"]).getPropertyValue("--path-data");this["#increment-arrow-path"].setAttribute("d",t),this["#decrement-arrow-path"].setAttribute("d",e)}#mt(){this.hasAttribute("disabled")&&(this.removeAttribute("pressed"),this["#increment-button"].removeAttribute("data-pressed"),this["#decrement-button"].removeAttribute("data-pressed"))}#G(t){let e=t.target.closest(".button"),i=null;if(e===this["#increment-button"]?i="increment":e===this["#decrement-button"]&&(i="decrement"),!(t.buttons>1||null===i)){this.setPointerCapture(t.pointerId);{let t,s=Date.now();e.setAttribute("data-pressed",""),this.setAttribute("pressed",i),this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t);let i=Date.now()-s;i<100&&await Xn(100-i),e.removeAttribute("data-pressed"),this.removeAttribute("pressed")},{once:!0}),this.addEventListener("pointercancel",t)}{let e,s=null,n=Date.now(),{shiftKey:a}=t;this.dispatchEvent(new CustomEvent(i+"start",{bubbles:!0})),this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}})),this.addEventListener("pointerup",e=()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),clearInterval(s),this.dispatchEvent(new CustomEvent(i+"end",{bubbles:!0}))}),this.addEventListener("pointercancel",e),s=setInterval((()=>{Date.now()-n>500&&this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}}))}),100)}}}}customElements.define("x-stepper",al);class ll extends HTMLElement{static observedAttributes=["value"];static#E=Fs`<template><div id="preview"></div></template>`;static#z=Gs`:host{display:block;width:18px;height:18px;cursor:default;box-sizing:border-box;overflow:hidden;background-color:#fff;background-size:6px 6px;background-position:0 0,0 3px,3px -3px,-3px 0;background-image:linear-gradient(45deg,#d6d6d6 25%,transparent 25%),linear-gradient(-45deg,#d6d6d6 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#d6d6d6 75%),linear-gradient(-45deg,transparent 75%,#d6d6d6 75%)}#preview{width:100%;height:100%;position:relative}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"white"}set value(t){this.setAttribute("value",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ll.#z],this.#$.append(document.importNode(ll.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Fi()}attributeChangedCallback(t){"value"===t&&this.#Fi()}#Fi(){this["#preview"].style.background=this.value}}customElements.define("x-swatch",ll);class rl extends HTMLElement{static observedAttributes=["toggled","disabled"];static#E=Fs`<template><main id="main"><div id="indicator" part="indicator"><div id="indicator-track" part="indicator-track"><div id="indicator-thumb" part="indicator-thumb" style="transition: none;"></div></div></div><div id="description"><slot></slot></div></main></template>`;static#z=Gs`:host{display:block;width:fit-content;margin:2px 0}:host([disabled]){opacity:.4;pointer-events:none}#main{display:flex;align-items:center}#indicator{position:relative;width:34px;height:15px;display:flex;align-items:center}#indicator-track{display:flex;align-items:center;width:100%;height:65%;background:currentColor;border-radius:999px}#indicator-thumb{position:absolute;left:0;width:16px;height:16px;background:currentColor;border-radius:999px;transition:left .2s cubic-bezier(.4, 0, .2, 1)}:host([toggled]) #indicator-thumb{left:calc(100% - 16px)}:host([mixed]) #indicator-thumb{left:calc(50% - 16px / 2)}#description{flex:1}`;get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[rl.#z],this.#$.append(document.importNode(rl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){Xn(100).then((()=>this["#indicator-thumb"].style.transition=null)),this.#q()}disconnectedCallback(){this["#indicator-thumb"].style.transition="none"}attributeChangedCallback(t){"toggled"===t?this.#ut():"disabled"===t&&this.#mt()}#q(){this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#ut(){this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled)}#mt(){this.#q()}#G(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=Wn(this.parentNode,"[tabindex]");e&&e.focus()}}async#R(t){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle"))}#Z(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-switch",rl);class ol extends HTMLElement{static observedAttributes=["selected","disabled"];static#E=Fs`<template><div id="selection-indicator" part="selection-indicator"></div><div id="content"><slot></slot></div></template>`;static#z=Gs`:host{position:relative;display:flex;align-items:center;justify-content:center;min-height:30px;padding:2px 12px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:14px}:host(:focus){z-index:10;outline:0}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}#content{display:inherit;flex-flow:inherit;align-items:inherit;z-index:100}#selection-indicator{display:none;width:100%;height:0;background:var(--accent-color);position:absolute;bottom:0;left:0}:host([selected]) #selection-indicator{display:block}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get selected(){return this.hasAttribute("selected")}set selected(t){t?this.setAttribute("selected",""):this.removeAttribute("selected")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ol.#z],this.#$.append(document.importNode(ol.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#G(t)))}connectedCallback(){this.#q()}attributeChangedCallback(t){("selected"===t||"disabled"===t)&&this.#q()}animateSelectionIndicator(t){return new Promise((async e=>{if("0px"!==getComputedStyle(this["#selection-indicator"]).height){let e=this.getBoundingClientRect(),i=t.getBoundingClientRect(),s=this["#selection-indicator"].animate([{left:"0px",width:e.width+"px"},{left:i.left-e.left+"px",width:i.width+"px"}],{duration:100,iterations:1,delay:0,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"});await s.finished}e()}))}#q(){this.setAttribute("role","tab"),this.setAttribute("aria-selected",this.selected),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("tabindex",this.selected?"0":"-1")}async#G(t){if(!1===this.matches(":focus")){t.preventDefault();let e=Wn(this.parentNode,"[tabindex]");e&&e.focus()}if(!(t.buttons>1)){this.setPointerCapture(t.pointerId);{let t,e=Date.now();this.setAttribute("pressed",""),this.addEventListener("pointerup",t=async()=>{if(this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),!0===this.selected){let t=Date.now()-e,i=100;t<i&&await Xn(i-t)}this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t)}}}}customElements.define("x-tab",ol);class hl extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{position:relative;display:flex;margin:0 auto;width:fit-content;max-width:100%;box-sizing:border-box;justify-content:center}::slotted(x-tab){flex:0}`;get value(){let t=this.querySelector("x-tab[selected]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-tab")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.selected=t===i}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[hl.#z],this.#$.append(document.importNode(hl.#E.content,!0)),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}connectedCallback(){this.setAttribute("role","tablist")}async#R(t){if(!(t.buttons>1)&&t.target.closest("x-tab")){let e=this.querySelectorAll("x-tab"),i=t.target.closest("x-tab"),s=this.querySelector("x-tab[selected]");if(i!==s){s&&await s.animateSelectionIndicator(i);for(let t of e)t.selected=t===i;this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}}#Z(t){if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=t.target;e.querySelector("x-label"),t.preventDefault(),e.click()}else if("ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t-1]||e[e.length-1];i.tabIndex=-1,s.tabIndex=0,s.focus()}}else if("ArrowRight"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.target,t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t+1]||e[0];i.tabIndex=-1,s.tabIndex=0,s.focus()}}}}customElements.define("x-tabs",hl);class dl extends HTMLElement{static#E=Fs`<template><div id="container"><div id="scope" part="scope"><slot id="scope-slot" name="scope"></slot></div><main id="main" part="main"><slot></slot><svg id="remove-button" part="remove-button" width="12" height="12" viewBox="0 0 100 100"><path id="remove-button-path"></path></svg></main></div></template>`;static#z=Gs`:host{display:inline-block;height:25px;box-sizing:border-box;overflow:hidden;color:var(--text-color);border-width:1px;border-style:solid}:host([toggled]){background:gray;color:#fff;outline:0}:host([disabled]){opacity:.5}:host([hidden]){display:none}:host(:focus){outline:0}#container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}#scope{height:100%;padding:0 6px;display:none;align-items:center;justify-content:center;border-right-width:1px;border-right-style:solid}:host([scoped]) #scope{display:flex}#main{height:100%;padding:0 6px;display:flex;align-items:center;justify-content:center}#remove-button{display:none;opacity:.8;width:12px;height:12px;vertical-align:middle;margin-left:4px;fill:currentColor;color:inherit;--path-data:M 25 16 L 50 41 L 75 16 L 84 25 L 59 50 L 84 75 L 75 84 L 50 59 L 25 84 L 16 75 L 41 50 L 16 25 Z}:host([removable]) #remove-button{display:block}#remove-button:hover{background:rgba(0,0,0,.1);opacity:1}#remove-button path{fill:inherit;pointer-events:none}`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get removable(){return this.hasAttribute("removable")}set removable(t){t?this.setAttribute("removable",""):this.removeAttribute("removable")}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[dl.#z],this.#$.append(document.importNode(dl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#scope-slot"].addEventListener("slotchange",(()=>this.#Fn())),this["#remove-button"].addEventListener("click",(t=>this.#Gn(t)))}connectedCallback(){this.#Xn(),this.#Fn(),Un.addEventListener("themechange",this.#L=()=>this.#Xn()),this.closest("x-tags")?(this.tabIndex=0,this.removable=!1):this.closest("x-tagsinput")?(this.toggled=!1,this.tabIndex=0,this.removable=!0):this.removable=!1}disconnectedCallback(){Un.removeEventListener("themechange",this.#L)}#Gn(t){t.buttons<=1&&this.dispatchEvent(new CustomEvent("remove",{bubbles:!0}))}#Xn(){let t=getComputedStyle(this["#remove-button"]).getPropertyValue("--path-data");this["#remove-button-path"].setAttribute("d",t)}#Fn(){0===this["#scope-slot"].assignedElements().length?this.removeAttribute("scoped"):this.setAttribute("scoped","")}}customElements.define("x-tag",dl);class cl extends HTMLElement{static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([hidden]){display:none}`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!==t))}set value(t){let e=[...this.children].filter((t=>"x-tag"===t.localName));for(let i of e)i.toggled=t.includes(i.value)}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[cl.#z],this.#$.append(document.importNode(cl.#E.content,!0)),this.addEventListener("pointerdown",(t=>this.#G(t))),this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("keydown",(t=>this.#Z(t)))}#G(t){if(t.buttons>1)t.preventDefault();else if(t.preventDefault(),!1===this.matches(":focus")){let t=Wn(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",(()=>{t?t.focus():this.blur()}),{once:!0})}}#R(t){let e=t.target.closest("x-tag");e&&!1===t.defaultPrevented&&(e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:e})))}#Z(t){if(!1===t.defaultPrevented)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-tag:focus");e&&(t.preventDefault(),e.click())}else if("ArrowRight"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-tags",cl);class ul extends HTMLElement{static observedAttributes=["spellcheck","disabled"];static#E=Fs`<template><main id="main"><div id="tags"><slot></slot><input id="input" type="text" part="input" spellcheck="false" tabindex="0"></div></main><x-popover id="suggestions-popover" part="suggestions"><div id="suggested-tags"></div></x-popover></template>`;static#z=Gs`:host{display:block;position:relative;min-height:29px;font-size:12px}:host(:focus){z-index:10}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{width:100%;height:100%;cursor:text}#tags{display:flex;flex-wrap:wrap}:host([mixed]) #tags{opacity:.7}#input{width:10px;height:25px;margin:2px;padding:0 3px 0 6px;box-sizing:border-box;line-height:25px;color:inherit;background:0 0;border:none;outline:0;font-size:inherit}#suggestions-popover{width:200px;max-height:200px;padding:4px;box-sizing:border-box}#suggestions-popover #suggested-tags{flex:1;overflow:auto}#suggestions-popover x-tag{display:block;margin:4px 0 0 0}#suggestions-popover x-tag:first-child{margin-top:0}`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).map((t=>t.value)).filter((t=>null!==t))}get delimiter(){return this.hasAttribute("delimiter")?this.getAttribute("delimiter"):","}set delimiter(t){this.setAttribute("delimiter",t)}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get suggestions(){return this.hasAttribute("suggestions")}set suggestions(t){t?this.setAttribute("suggestions",""):this.removeAttribute("suggestions")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#F=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Un.themeStyleSheet,ul.#z],this.#$.append(document.importNode(ul.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#As(t))),this.#$.addEventListener("remove",(t=>this.#Gn(t))),this.#$.addEventListener("keydown",(t=>this.#Z(t))),this["#input"].addEventListener("focusin",(t=>this.#_n(t))),this["#input"].addEventListener("focusout",(t=>this.#Zn(t))),this["#input"].addEventListener("input",(t=>this.#St(t)))}connectedCallback(){this.#Un(),this.#q()}attributeChangedCallback(t,e,i){e!==i&&("spellcheck"===t?this.#Qi():"disabled"===t&&this.#mt())}clear(){let t=[...this.children].filter((t=>"x-tag"===t.localName));if(t.length>0){for(let e of t)e.remove(),this.dispatchEvent(new CustomEvent("remove",{detail:e}));this.#Yn(),this.#Un(),this.dispatchEvent(new CustomEvent("change"))}}getSuggestions(t){return[]}#qn(){let t=this["#input"].value;if(this["#input"].value="",this.#Wn(),t.endsWith(this.delimiter)&&(t=t.substring(0,t.length-1)),t=t.trim(),t.length>0&&!1===this.value.includes(t)){let e;if(t.includes(":")){let[i,s]=t.split(":").map((t=>t.trim()));e=Fs`<x-tag class="tag" value="${t}" removable><x-label slot="scope">${i}</x-label><x-label>${s}</x-label></x-tag>`}else e=Fs`<x-tag class="tag" value="${t}" removable><x-label>${t}</x-label></x-tag>`;this.append(e),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#Vn(){this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close()}#As(t){if(t.target===this["#input"])this["#input"].value.length>0&&this.#Vn();else if(t.target===this["#main"]||t.target===this["#tags"])t.preventDefault(),this["#input"].focus(),this.#Yn(!1);else if(t.target.closest("x-popover")){t.preventDefault();let e=t.target.closest("x-tag");e&&(this.append(e),this["#input"].value="",this.#Wn(),this.#Yn(!1),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}else t.target.closest("x-tag")&&""!==this["#input"].value&&(this.#qn(),this.#Yn(),this.#Un())}#Gn(t){t.stopPropagation();let e=t.target;e.remove(),this.#Un(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}#Qi(){this["#input"].spellcheck=this.spellcheck}#mt(){this.#q()}async#_n(){this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Zn(){this.#qn(),this.#Un(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this["#suggestions-popover"].close()}#St(t){this["#input"].value.includes(this.delimiter)?(this.#qn(),this.#Un(),this.#Wn(),this.#Yn(!1)):(this.dispatchEvent(new CustomEvent("input")),this.#Un(),this.#Wn(),this.#Yn("deleteContentBackward"!==t.inputType))}#Z(t){if("Enter"===t.code||"NumpadEnter"===t.code)t.target===this["#input"]&&(t.preventDefault(),this.#qn(),this.#Yn(!1),this.#Un(),this.#Wn());else if("Backspace"===t.code){if(t.target===this["#input"]){if(0===this["#input"].value.length){let t=[...this.children].filter((t=>"x-tag"===t.localName)),e=t[t.length-1]||null;e&&(e.remove(),this.#Yn(),this.#Un(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}}else if("x-tag"===t.target.localName){let e=[...this.children].filter((t=>"x-tag"===t.localName)),i=t.target,s=e.indexOf(i),n=e[s+1]||null,a=e[s-1]||null;n?n.focus():a?a.focus():this["#input"].focus(),i.remove(),this.#Un(),this.dispatchEvent(new CustomEvent("remove",{detail:i})),this.dispatchEvent(new CustomEvent("change"))}}else if("ArrowDown"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s+1]||e[0]}else i=e[0]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#Wn(),this.#Kn(e,t.length)}}}}else if("ArrowUp"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s-1]||e[e.length-1]}else i=e[e.length-1]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#Wn(),this.#Kn(e,t.length)}}}}else"ArrowLeft"!==t.code&&"ArrowRight"!==t.code||this.#Vn()}#Ot(){this.#Un()}#Un(){let t=this.querySelector(":scope > x-label");t&&(t.hidden=this.value.length>0||this["#input"].value.length>0)}#q(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#Wn(){this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#Kn(t=0,e=this["#input"].value.length){this["#input"].selectionStart=t,this["#input"].selectionEnd=e}#Yn(t=!0){if(this.suggestions){let e=this["#input"].value;this["#input"].selectionStart!==this["#input"].selectionEnd&&(e=e.substring(0,this["#input"].selectionStart));let i=this.getSuggestions(e);if(i.length>0&&!0===t){let t=this["#input"].value,e=i[0].querySelector("x-label").textContent;this["#input"].value=e,this.#Wn(),this.#Kn(t.length,e.length)}if(0===i.length)this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close();else{let s=this["#input"].getBoundingClientRect();this["#suggested-tags"].innerHTML="",this["#suggested-tags"].append(...i),!0===t&&e.length>0&&(i[0].toggled=!0),!1===this["#suggestions-popover"].opened||this["#suggestions-popover"].close(!1),this["#suggestions-popover"].open(s),this["#suggested-tags"].scrollTop=0}}}}customElements.define("x-tagsinput",ul);class pl extends HTMLElement{static observedAttributes=["value","spellcheck","disabled","validation"];static#E=Fs`<template><main id="main"><slot></slot><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></main></template>`;static#z=Gs`:host{display:block flex;position:relative;width:100%;min-height:100px;box-sizing:border-box;background:#fff;font-size:12.5px;overflow:auto}:host(:hover){cursor:text}:host([mixed]){color:rgba(0,0,0,.7)}:host([disabled]){pointer-events:none;opacity:.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:0 0}:host([error]) ::selection{color:#fff;background-color:#d50000}::-webkit-scrollbar{max-width:6px;max-height:6px;background:0 0}::-webkit-scrollbar-track{border-radius:25px}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.2);border-radius:25px}::-webkit-scrollbar-corner{display:none}#main{display:flex;flex-flow:column;width:100%;min-height:100%}#editor{flex:1;padding:2px 6px;box-sizing:border-box;color:inherit;background:0 0;border:none;outline:0;font-family:inherit;font-size:inherit}`;get value(){return this["#editor"].textContent}set value(t){if(this["#editor"].textContent=t,this.matches(":focus")){document.execCommand("selectAll"),("chromium"===Gn()?this.#$.getSelection():window.getSelection()).collapseToEnd()}"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity(),this.#xt()}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?parseInt(this.getAttribute("maxlength")):Infinity}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#Jn="";#F=0;#wt=null;#Vi=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[pl.#z],this.#$.append(document.importNode(pl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#R(t))),this.addEventListener("focusin",(t=>this.#zt(t))),this.addEventListener("focusout",(t=>this.#$t(t))),this["#editor"].addEventListener("click",(t=>this.#Qn(t))),this["#editor"].addEventListener("input",(t=>this.#en(t))),"gecko"===Gn()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#q(),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity()}attributeChangedCallback(t){"value"===t?this.#jt():"spellcheck"===t?this.#Qi():"disabled"===t?this.#mt():"validation"===t&&this.#ss()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#wt={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#wt={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#wt={href:"#required-field"}:this.#wt=null,this.#Ft()),null===this.#wt&&null===this.#Vi}setCustomValidity(t){this.#Vi=""===t?null:t,this.#Ft()}#Ft(){let t=this.#Vi||this.#wt;t?this.setAttribute("error",""):this.removeAttribute("error");{let e=this.querySelector(':scope > x-tooltip[type="error"]');if(t&&this.matches(":focus")){if(e||(e=Yn("x-tooltip"),e.setAttribute("type","error"),this.append(e)),t.href){let i=t.args?Object.entries(t.args).map((([t,e])=>`${t}:${e}`)).join(","):"";e.innerHTML=`<x-message href="${t.href}" args="${i}"></x-message>`}else e.innerHTML=t;Xn(10).then((()=>{e.open(this)}))}else e&&e.close().then((()=>e.remove()))}}#xt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#q(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#F=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#F>0?this.#F:0),this.#F=0)}#jt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&document.execCommand("selectAll")}#Qi(){this["#editor"].spellcheck=this.spellcheck}#mt(){this["#editor"].disabled=this.disabled,this.#q()}#ss(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity()}#R(){this.#Ft()}#zt(){this.#Jn=this.value,this.#Ft(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#$t(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Ft(),null!==(this.#wt||this.#Vi)||this.value===this.#Jn&&!this.mixed||(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))}#Qn(t){t.detail>=4&&document.execCommand("selectAll")}#en(t){this.dispatchEvent(new CustomEvent("input",{bubbles:!0})),this.#xt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#wt||this.#Vi)&&this.reportValidity()}}customElements.define("x-texteditor",pl);class ml extends HTMLElement{static observedAttributes=["type"];static#ta=Fs`<template><svg data-type="ring" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40"><animate attributeName="stroke-dasharray" values="0,1000; 200,1000; 245,1000" begin="0s" dur="2s" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.8 0.25 0.25 0.9; 0.8 0.25 0.25 0.9" repeatCount="indefinite"></animate><animate attributeName="stroke-dashoffset" values="0px;0px;-260px" begin="0s" dur="2s" keyTimes="0; 0.5; 1" repeatCount="indefinite"></animate><animateTransform type="rotate" additive="sum" attributeName="transform" values="0;360" begin="0s" dur="2s" fill="freeze" repeatCount="indefinite" keyTimes="0; 1"></animateTransform></circle></svg></template>`;static#ea=Fs`<template><svg data-type="spin" viewBox="0 0 100 100"><rect transform="rotate(  0 50 50) translate(0 -38)"></rect><rect transform="rotate( 30 50 50) translate(0 -38)"></rect><rect transform="rotate( 60 50 50) translate(0 -38)"></rect><rect transform="rotate( 90 50 50) translate(0 -38)"></rect><rect transform="rotate(120 50 50) translate(0 -38)"></rect><rect transform="rotate(150 50 50) translate(0 -38)"></rect><rect transform="rotate(180 50 50) translate(0 -38)"></rect><rect transform="rotate(210 50 50) translate(0 -38)"></rect><rect transform="rotate(240 50 50) translate(0 -38)"></rect><rect transform="rotate(270 50 50) translate(0 -38)"></rect><rect transform="rotate(300 50 50) translate(0 -38)"></rect><rect transform="rotate(330 50 50) translate(0 -38)"></rect></svg></template>`;static#z=Gs`:host{display:block;width:30px;height:30px;box-sizing:border-box}:host([hidden]){display:none}:host([type=ring]){color:#4285f4}:host([type=spin]){color:#404040}svg{color:inherit;width:100%;height:100%}svg[data-type=ring] circle{fill:none;stroke:currentColor;stroke-linecap:round;stroke-width:10px;stroke-dasharray:10,1000;transform-box:fill-box;transform-origin:50% 50%}svg[data-type=spin] rect{x:46.5px;y:40px;width:7px;height:22px;rx:5px;ry:5px;fill:currentColor;animation-name:spin-animation;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;animation-delay:0s}svg[data-type=spin] rect:first-child{animation-delay:calc(1s *  1/12)}svg[data-type=spin] rect:nth-child(2){animation-delay:calc(1s *  2/12)}svg[data-type=spin] rect:nth-child(3){animation-delay:calc(1s *  3/12)}svg[data-type=spin] rect:nth-child(4){animation-delay:calc(1s *  4/12)}svg[data-type=spin] rect:nth-child(5){animation-delay:calc(1s *  5/12)}svg[data-type=spin] rect:nth-child(6){animation-delay:calc(1s *  6/12)}svg[data-type=spin] rect:nth-child(7){animation-delay:calc(1s *  7/12)}svg[data-type=spin] rect:nth-child(8){animation-delay:calc(1s *  8/12)}svg[data-type=spin] rect:nth-child(9){animation-delay:calc(1s *  9/12)}svg[data-type=spin] rect:nth-child(10){animation-delay:calc(1s * 10/12)}svg[data-type=spin] rect:nth-child(11){animation-delay:calc(1s * 11/12)}svg[data-type=spin] rect:nth-child(12){animation-delay:calc(1s * 12/12)}@keyframes spin-animation{0%{opacity:1}100%{opacity:0}}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"ring"}set type(t){this.setAttribute("type",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#ia=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ml.#z],this.#ia=new IntersectionObserver((t=>this.#Ot()))}connectedCallback(){this.#Ot(),this.#ia.observe(this)}disconnectedCallback(){this.#ia.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&"type"===t&&this.#Ot()}#Ot(){if(this.hidden||this.checkVisibility&&!1===this.checkVisibility())this.#$.innerHTML="";else{let t=this.#$.firstElementChild,e="ring"===this.type?ml.#ta:ml.#ea;null===t?this.#$.append(document.importNode(e.content,!0)):t.dataset.type!==this.type&&t.replaceWith(document.importNode(e.content,!0)),!1===this.hasAttribute("type")&&this.setAttribute("type",this.type)}}}customElements.define("x-throbber",ml);class bl extends HTMLElement{static observedAttributes=["disabled"];static#E=Fs`<template><slot></slot></template>`;static#z=Gs`:host{display:none;bottom:-30px;position:fixed;padding:3px 10px;width:fit-content;height:fit-content;max-width:300px;box-sizing:border-box;pointer-events:none;border-width:1px;border-style:solid;font-size:12px;z-index:99999;--align:bottom;--whitespace:8px;--open-transition:0 opacity cubic-bezier(0.4, 0, 0.2, 1);--close-transition:0 opacity cubic-bezier(0.4, 0, 0.2, 1)}:host([animating]),:host([opened]){display:block}`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"hint"}set type(t){this.setAttribute("type",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get opened(){return this.hasAttribute("opened")}#$=null;#xn=null;#kn;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[bl.#z],this.#$.append(document.importNode(bl.#E.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t){"disabled"===t&&this.disabled&&this.opened&&this.close()}open(t,e=!0){return new Promise((async i=>{if(!1===this.opened&&this.isConnected){if(this.setAttribute("opened",""),this.#Cn(t),this.#xn=Vn(this),this.#xn&&this.#xn.addEventListener("scroll",this.#kn=()=>{this.close()},{once:!0}),e){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Na(t);"opacity"===e&&await this.animate({opacity:["0","1"]},{duration:i,easing:s}).finished}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}))}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened){if(this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#xn.removeEventListener("scroll",this.#kn),t){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Na(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished}this.removeAttribute("animating")}e()}))}#Cn(t){let e=getComputedStyle(this).getPropertyValue("--align").trim();parseInt(getComputedStyle(this).borderWidth);let i=parseInt(getComputedStyle(this).getPropertyValue("--whitespace")),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=yi(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.bottom+i+"px",e=yi(this.getBoundingClientRect()),s=e.bottom+8-window.innerHeight,t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px"}return s},l=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.top-i-e.height+"px",e=yi(this.getBoundingClientRect()),s=-(e.top-8),t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-i-t+"px"}return s},r=()=>{this.style.maxWidth=null;let t=yi(this.getBoundingClientRect()),e=0,i=0;return this.style.left=s+a.left+a.width/2-t.width/2+"px",t=yi(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},o=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),i=0;if(this.style.left=s+window.innerWidth-8-e.width+"px",e=yi(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),i=0;if(this.style.left=s+8+"px",e=yi(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("top"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.right+i+"px",e=yi(this.getBoundingClientRect()),n=e.right+8-window.innerWidth,t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px"}return n},l=(t=!1)=>{this.style.maxWidth=null;let e=yi(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.left-i-e.width+"px",e=yi(this.getBoundingClientRect()),n=-(e.left-8),t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-i-t+"px"}return n},r=()=>{this.style.maxHeight=null;let t=yi(this.getBoundingClientRect()),e=0,i=0;return this.style.top=n+a.top+a.height/2-t.height/2+"px",t=yi(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},o=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),i=0;if(this.style.top=n+window.innerHeight-8-e.height+"px",e=yi(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=yi(this.getBoundingClientRect()),i=0;if(this.style.top=n+8+"px",e=yi(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=l();i>0&&(i>e?t(!0):l(!0))}}else if("left"===e){let e=l();if(e>0){let i=t();i>0&&(i>e?l(!0):t(!0))}}{let[t,e]=r();e>0?(t=o(),t>0&&o(!0)):t>0&&(e=h(),e>0&&h(!0))}}}}customElements.define("x-tooltip",bl);export{Un as default};